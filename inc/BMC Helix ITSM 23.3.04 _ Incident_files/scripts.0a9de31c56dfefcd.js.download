!function(){var p,u,a;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,p={timestamp:"O7L9",version:"4.25.0-lts",revision:"82796d03d0",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var s=window.CKEDITOR_BASEPATH||"";if(!s)for(var c=document.getElementsByTagName("script"),f=0;f<c.length;f++){var l=c[f].src.match(a);if(l){s=l[1];break}}if(-1==s.indexOf(":/")&&"//"!=s.slice(0,2)&&(s=0===s.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+s:location.href.match(/^[^\?]*\/(?:)/)[0]+s),!s)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return s}(),getUrl:function(s){return-1==s.indexOf(":/")&&0!==s.indexOf("/")&&(s=this.basePath+s),this.appendTimestamp(s)},appendTimestamp:function(s){if(!this.timestamp||"/"===s.charAt(s.length-1)||/[&?]t=/.test(s))return s;var c=0<=s.indexOf("?")?"&":"?";return s+c+"t="+this.timestamp},domReady:function(){function s(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",s,!1),window.removeEventListener("load",s,!1),c()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",s),window.detachEvent("onload",s),c())}catch{}}function c(){for(var l;l=f.shift();)l()}var f=[];return function(l){if(f.push(l),"complete"===document.readyState&&setTimeout(s,1),1==f.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",s),window.attachEvent("onload",s),l=!1;try{l=!window.frameElement}catch{}document.documentElement.doScroll&&l&&function n(){try{document.documentElement.doScroll("left")}catch{return void setTimeout(n,1)}s()}()}}}()},u=window.CKEDITOR_GETURL;if(u){var r=p.getUrl;p.getUrl=function(s){return u.call(p,s)||r.call(p,s)}}return p}()),a={},CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(p){var r,u=CKEDITOR.event.prototype;for(r in u)null==p[r]&&(p[r]=u[r])},CKEDITOR.event.prototype=function(){function p(s){var c=u(this);return c[s]||(c[s]=new r(s))}var s,c,f,l,u=function(s){return(s=s.getPrivate&&s.getPrivate()||s._||(s._={})).events||(s.events={})},r=function(s){this.name=s,this.listeners=[]};return r.prototype={getListenerIndex:function(s){for(var c=0,f=this.listeners;c<f.length;c++)if(f[c].fn==s)return c;return-1}},{define:function(s,c){var f=p.call(this,s);CKEDITOR.tools.extend(f,c,!0)},on:function(s,c,f,l,n){function i(E,T,h,R){return E={name:s,sender:this,editor:E,data:T,listenerData:l,stop:h,cancel:R,removeListener:e},!1===c.call(f,E)?a:E.data}function e(){t.removeListener(s,c)}var t=this,o=p.call(this,s);if(0>o.getListenerIndex(c)){o=o.listeners,f||(f=this),isNaN(n)&&(n=10),i.fn=c,i.priority=n;for(var d=o.length-1;0<=d;d--)if(o[d].priority<=n)return o.splice(d+1,0,i),{removeListener:e};o.unshift(i)}return{removeListener:e}},once:function(){var s=Array.prototype.slice.call(arguments),c=s[1];return s[1]=function(f){return f.removeListener(),c.apply(this,arguments)},this.on.apply(this,s)},capture:function(){CKEDITOR.event.useCapture=1;var s=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,s},fire:(s=0,c=function(){s=1},f=0,l=function(){f=1},function(n,i,e){var t=u(this)[n];n=s;var o=f;if(s=f=0,t&&(d=t.listeners).length)for(var E,d=d.slice(0),T=0;T<d.length;T++){if(t.errorProof)try{E=d[T].call(this,e,i,c,l)}catch{}else E=d[T].call(this,e,i,c,l);if(E===a?f=1:typeof E<"u"&&(i=E),s||f)break}return i=!f&&(typeof i>"u"||i),s=n,f=o,i}),fireOnce:function(s,c,f){return c=this.fire(s,c,f),delete u(this)[s],c},removeListener:function(s,c){var f=u(this)[s];if(f){var l=f.getListenerIndex(c);0<=l&&f.listeners.splice(l,1)}},removeAllListeners:function(){var c,s=u(this);for(c in s)delete s[c]},hasListeners:function(s){return(s=u(this)[s])&&0<s.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,p){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,p,this)},CKEDITOR.editor.prototype.fireOnce=function(a,p){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,p,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),p=a.match(/edge[ \/](\d+.?\d*)/),u=-1<a.indexOf("trident/");(u={ie:u=!(!p&&!u),edge:!!p,webkit:!u&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var s=document.domain,c=window.location.hostname;return s!=c&&s!="["+c+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!u.webkit&&!u.ie,u.webkit&&(-1<a.indexOf("chrome")?u.chrome=!0:u.safari=!0);var r=0;return u.ie&&(r=p?parseFloat(p[1]):u.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,u.ie9Compat=9==r,u.ie8Compat=8==r,u.ie7Compat=7==r,u.ie6Compat=7>r||u.quirks),u.gecko&&(p=a.match(/rv:([\d\.]+)/))&&(r=1e4*(p=p[1].split("."))[0]+100*(p[1]||0)+1*(p[2]||0)),u.air&&(r=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),u.webkit&&(r=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),u.version=r,u.isCompatible=!(u.ie&&7>r||u.gecko&&4e4>r||u.webkit&&534>r),u.hidpi=2<=window.devicePixelRatio,u.needsBrFiller=u.gecko||u.webkit||u.ie&&10<r,u.needsNbspFiller=u.ie&&11>r,u.cssClass="cke_browser_"+(u.ie?"ie":u.gecko?"gecko":u.webkit?"webkit":"unknown"),u.quirks&&(u.cssClass+=" cke_browser_quirks"),u.ie&&(u.cssClass+=" cke_browser_ie"+(u.quirks?"6 cke_browser_iequirks":u.version)),u.air&&(u.cssClass+=" cke_browser_air"),u.iOS&&(u.cssClass+=" cke_browser_ios"),u.hidpi&&(u.cssClass+=" cke_hidpi"),u}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,p=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():p&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*p))}),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(a,p){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:p})},CKEDITOR.error=function(a,p){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:p})},CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var p=console[a.data.type]?a.data.type:"log",u=a.data.errorCode;(a=a.data.additionalData)?console[p]("[CKEDITOR] Error code: "+u+".",a):console[p]("[CKEDITOR] Error code: "+u+"."),console[p]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+u)}},null,null,999),CKEDITOR.dom={},function(){function a(t,o,d){this._minInterval=t,this._context=d,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(o,d||{});var E=this;this.input=function(){function T(){E._lastOutput=(new Date).getTime(),E._scheduledTimer=0,E._call()}if(!E._scheduledTimer||!1!==E._reschedule()){var h=(new Date).getTime()-E._lastOutput;h<E._minInterval?E._scheduledTimer=setTimeout(T,E._minInterval-h):T()}}}function p(t,o,d){a.call(this,t,o,d),this._args=[];var E=this;this.input=CKEDITOR.tools.override(this.input,function(T){return function(){E._args=Array.prototype.slice.call(arguments),T.call(this)}})}var t,o,u=[],r=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",s=/&/g,c=/>/g,f=/</g,l=/"/g,n=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,i={lt:"<",gt:">",amp:"&",quot:'"',nbsp:"\xa0",shy:"\xad"},e=function(t,o){return"#"==o[0]?String.fromCharCode(parseInt(o.slice(1),10)):i[o]};CKEDITOR.on("reset",function(){u=[]}),CKEDITOR.tools={arrayCompare:function(t,o){if(!t&&!o)return!0;if(!t||!o||t.length!=o.length)return!1;for(var d=0;d<t.length;d++)if(t[d]!=o[d])return!1;return!0},getIndex:function(t,o){for(var d=0;d<t.length;++d)if(o(t[d]))return d;return-1},clone:function(t){var o;if(t&&t instanceof Array){o=[];for(var d=0;d<t.length;d++)o[d]=CKEDITOR.tools.clone(t[d]);return o}if(null===t||"object"!=typeof t||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;for(d in o=new t.constructor,t)o[d]=CKEDITOR.tools.clone(t[d]);return o},capitalize:function(t,o){return t.charAt(0).toUpperCase()+(o?t.slice(1):t.slice(1).toLowerCase())},extend:function(t){var d,E,o=arguments.length;"boolean"==typeof(d=arguments[o-1])?o--:"boolean"==typeof(d=arguments[o-2])&&(E=arguments[o-1],o-=2);for(var T=1;T<o;T++){var h=arguments[T]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(h),function(R){(!0===d||null==t[R])&&(!E||R in E)&&(t[R]=h[R])})}return t},prototypedCopy:function(t){var o=function(){};return o.prototype=t,new o},copy:function(t){var d,o={};for(d in t)o[d]=t[d];return o},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(t){for(var o in t)if(t.hasOwnProperty(o))return!1;return!0},cssVendorPrefix:function(t,o,d){return d?r+t+":"+o+";"+t+":"+o:((d={})[t]=o,d[r+t]=o,d)},cssStyleToDomStyle:(t=document.createElement("div").style,o=typeof t.cssFloat<"u"?"cssFloat":typeof t.styleFloat<"u"?"styleFloat":"float",function(d){return"float"==d?o:d.replace(/-./g,function(E){return E.substr(1).toUpperCase()})}),buildStyleHtml:function(t){t=[].concat(t);for(var o,d=[],E=0;E<t.length;E++)(o=t[E])&&(/@import|[{}]/.test(o)?d.push("<style>"+o+"</style>"):(o=CKEDITOR.appendTimestamp(o),d.push('<link type="text/css" rel=stylesheet href="'+o+'">')));return d.join("")},htmlEncode:function(t){return null==t?"":String(t).replace(s,"&amp;").replace(c,"&gt;").replace(f,"&lt;")},htmlDecode:function(t){return t.replace(n,e)},htmlEncodeAttr:function(t){return CKEDITOR.tools.htmlEncode(t).replace(l,"&quot;")},htmlDecodeAttr:function(t){return CKEDITOR.tools.htmlDecode(t)},transformPlainTextToHtml:function(t,o){var d=o==CKEDITOR.ENTER_BR,E=(E=this.htmlEncode(t.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),T=o==CKEDITOR.ENTER_P?"p":"div";if(!d){var h=/\n{2}/g;if(h.test(E)){var R="<"+T+">",K="</"+T+">";E=R+E.replace(h,function(){return K+R})+K}}return E=E.replace(/\n/g,"<br>"),d||(E=E.replace(new RegExp("<br>(?=</"+T+">)"),function(A){return CKEDITOR.tools.repeat(A,2)})),(E=E.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(A,v){return v+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var t=0;return function(){return++t}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var t="e",o=0;8>o;o++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t},override:function(t,o){var d=o(t);return d.prototype=t.prototype,d},setTimeout:function(t,o,d,E,T){return T||(T=window),d||(d=T),T.setTimeout(function(){E?t.apply(d,[].concat(E)):t.apply(d)},o||0)},debounce:function(t,o){var d;return function(){var E=this,T=arguments;clearTimeout(d),d=setTimeout(function(){d=null,t.apply(E,T)},o)}},throttle:function(t,o,d){return new this.buffers.throttle(t,o,d)},trim:function(){var t=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(o){return o.replace(t,"")}}(),ltrim:function(){var t=/^[ \t\n\r]+/g;return function(o){return o.replace(t,"")}}(),rtrim:function(){var t=/[ \t\n\r]+$/g;return function(o){return o.replace(t,"")}}(),indexOf:function(t,o){if("function"==typeof o){for(var d=0,E=t.length;d<E;d++)if(o(t[d]))return d}else{if(t.indexOf)return t.indexOf(o);for(d=0,E=t.length;d<E;d++)if(t[d]===o)return d}return-1},search:function(t,o){var d=CKEDITOR.tools.indexOf(t,o);return 0<=d?t[d]:null},bind:function(t,o){var d=Array.prototype.slice.call(arguments,2);return function(){return t.apply(o,d.concat(Array.prototype.slice.call(arguments)))}},createClass:function(t){var h=t.$,o=t.base,d=t.privates||t._,E=t.proto;if(t=t.statics,!h&&(h=function(){o&&this.base.apply(this,arguments)}),d){var T=h;h=function(){var K,R=this._||(this._={});for(K in d){var A=d[K];R[K]="function"==typeof A?CKEDITOR.tools.bind(A,this):A}T.apply(this,arguments)}}return o&&(h.prototype=this.prototypedCopy(o.prototype),h.prototype.constructor=h,h.base=o,h.baseProto=o.prototype,h.prototype.base=function R(){this.base=o.prototype.base,o.apply(this,arguments),this.base=R}),E&&this.extend(h.prototype,E,!0),t&&this.extend(h,t,!0),h},addFunction:function(t,o){return u.push(function(){return t.apply(o||this,arguments)})-1},removeFunction:function(t){u[t]=null},callFunction:function(t){var o=u[t];return o&&o.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var o,t=/^-?\d+\.?\d*px$/;return function(d){return o=CKEDITOR.tools.trim(d+"")+"px",t.test(o)?o:d||""}}(),convertToPx:function(){var t,o;return function(d){if((!t||t.isDetached())&&(t=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(t)),!/%$/.test(d)){var E=0>parseFloat(d);return E&&(d=d.replace("-","")),t.setStyle("width",d),o=t.getClientRect(),d=Math.round(o.width),E?-d:d}return d}}(),repeat:function(t,o){return Array(o+1).join(t)},tryThese:function(){for(var t,o=0,d=arguments.length;o<d;o++){var E=arguments[o];try{t=E();break}catch{}}return t},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(t){return function(){var o=arguments,d=this;window.setTimeout(function(){t.apply(d,o)},0)}},normalizeCssText:function(t,o){var E,d=[],T=CKEDITOR.tools.parseCssText(t,!0,o);for(E in T)d.push(E+":"+T[E]);return d.sort(),d.length?d.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(o,d,E,T){for(o=[d,E,T],d=0;3>d;d++)o[d]=("0"+parseInt(o[d],10).toString(16)).slice(-2);return"#"+o.join("")})},normalizeHex:function(t){return t.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(o,d,E,T){return 3==(o=d.toLowerCase()).length&&(o=[(o=o.split(""))[0],o[0],o[1],o[1],o[2],o[2]].join("")),"#"+o+T})},_isValidColorFormat:function(t){return!!t&&(t=t.replace(/\s+/g,""),/^[a-z0-9()#%,./]+$/i.test(t))},parseCssText:function(t,o,d){var E={};return d&&(t=new CKEDITOR.dom.element("span").setAttribute("style",t).getAttribute("style")||""),t&&(t=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(t))),!t||";"==t||t.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(T,h,R){o&&("font-family"==(h=h.toLowerCase())&&(R=R.replace(/\s*,\s*/g,",")),R=CKEDITOR.tools.trim(R)),E[h]=R}),E},writeCssText:function(t,o){var d,E=[];for(d in t)E.push(d+":"+t[d]);return o&&E.sort(),E.join("; ")},objectCompare:function(t,o,d){var E;if(!t&&!o)return!0;if(!t||!o)return!1;for(E in t)if(t[E]!=o[E])return!1;if(!d)for(E in o)if(t[E]!=o[E])return!1;return!0},objectKeys:function(t){return CKEDITOR.tools.object.keys(t)},convertArrayToObject:function(t,o){var d={};1==arguments.length&&(o=!0);for(var E=0,T=t.length;E<T;++E)d[t[E]]=o;return d},getStyledSpans:function(t,o){var d=CKEDITOR.env.ie&&8==CKEDITOR.env.version?t.toUpperCase():t;d=o.find("span[style*="+d+"]").toArray();return CKEDITOR.tools.array.filter(d,function(E){return!!E.getStyle(t)})},fixDomain:function(){for(var t;;)try{t=window.parent.document.domain;break}catch{if(!(t=t?t.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=t}return!!t},eventsBuffer:function(t,o,d){return new this.buffers.event(t,o,d)},enableHtml5Elements:function(t,o){for(var T,d="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),E=d.length;E--;)T=t.createElement(d[E]),o&&t.appendChild(T)},checkIfAnyArrayItemMatches:function(t,o){for(var d=0,E=t.length;d<E;++d)if(t[d].match(o))return!0;return!1},checkIfAnyObjectPropertyMatches:function(t,o){for(var d in t)if(d.match(o))return!0;return!1},keystrokeToString:function(t,o){var d=this.keystrokeToArray(t,o);return d.display=d.display.join("+"),d.aria=d.aria.join("+"),d},keystrokeToArray:function(t,o){var d=16711680&o,E=65535&o,T=CKEDITOR.env.mac,h=[],R=[];return d&CKEDITOR.CTRL&&(h.push(T?"\u2318":t[17]),R.push(T?t[224]:t[17])),d&CKEDITOR.ALT&&(h.push(T?"\u2325":t[18]),R.push(t[18])),d&CKEDITOR.SHIFT&&(h.push(T?"\u21e7":t[16]),R.push(t[16])),E&&(t[E]?(h.push(t[E]),R.push(t[E])):(h.push(String.fromCharCode(E)),R.push(String.fromCharCode(E)))),{display:h,aria:R}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(t){t=t.toLowerCase();for(var d,o=document.cookie.split(";"),T=0;T<o.length;T++)if(d=o[T].split("="),decodeURIComponent(CKEDITOR.tools.trim(d[0]).toLowerCase())===t)return decodeURIComponent(1<d.length?d[1]:"");return null},setCookie:function(t,o){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(o)+";path=/"},getCsrfToken:function(){if(!(t=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=t.length){var t=[],o="";if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(40),window.crypto.getRandomValues(t);else for(var d=0;40>d;d++)t.push(Math.floor(256*Math.random()));for(d=0;d<t.length;d++){var E="abcdefghijklmnopqrstuvwxyz0123456789".charAt(t[d]%36);o=o+(.5<Math.random()?E.toUpperCase():E)}t=o,CKEDITOR.tools.setCookie("ckCsrfToken",t)}return t},escapeCss:function(t){if(t)if(window.CSS&&CSS.escape)t=CSS.escape(t);else{for(var E,o=(t=String(t)).length,d=-1,T="",h=t.charCodeAt(0);++d<o;)T=0==(E=t.charCodeAt(d))?T+"\ufffd":127==E||1<=E&&31>=E||0==d&&48<=E&&57>=E||1==d&&48<=E&&57>=E&&45==h?T+"\\"+E.toString(16)+" ":0==d&&1==o&&45==E?T+"\\"+t.charAt(d):128<=E||45==E||95==E||48<=E&&57>=E||65<=E&&90>=E||97<=E&&122>=E?T+t.charAt(d):T+"\\"+t.charAt(d);t=T}else t="";return t},getMouseButton:function(t){return!!(t=t&&t.data?t.data.$:t)&&CKEDITOR.tools.normalizeMouseButton(t.button)},normalizeMouseButton:function(t,o){if(!CKEDITOR.env.ie||9<=CKEDITOR.env.version&&!CKEDITOR.env.ie6Compat)return t;for(var d=[[CKEDITOR.MOUSE_BUTTON_LEFT,1],[CKEDITOR.MOUSE_BUTTON_MIDDLE,4],[CKEDITOR.MOUSE_BUTTON_RIGHT,2]],E=0;E<d.length;E++){var T=d[E];if(T[0]===t&&o)return T[1];if(!o&&T[1]===t)return T[0]}},convertHexStringToBytes:function(t){var E,o=[],d=t.length/2;for(E=0;E<d;E++)o.push(parseInt(t.substr(2*E,2),16));return o},convertBytesToBase64:function(t){var E,o="",d=t.length;for(E=0;E<d;E+=3){var K,T=t.slice(E,E+3),h=T.length,R=[];if(3>h)for(K=h;3>K;K++)T[K]=0;for(R[0]=(252&T[0])>>2,R[1]=(3&T[0])<<4|T[1]>>4,R[2]=(15&T[1])<<2|(192&T[2])>>6,R[3]=63&T[2],K=0;4>K;K++)o=K<=h?o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(R[K]):o+"="}return o},style:{parse:{_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(t){var o={},d=this._findColor(t);return d.length&&(o.color=d[0],CKEDITOR.tools.array.forEach(d,function(E){t=t.replace(E,"")})),(t=CKEDITOR.tools.trim(t))&&(o.unprocessed=t),o},margin:function(t){return CKEDITOR.tools.style.parse.sideShorthand(t,function(o){return o.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]})},sideShorthand:function(t,o){function d(h){E.top=T[h[0]],E.right=T[h[1]],E.bottom=T[h[2]],E.left=T[h[3]]}var E={},T=o?o(t):t.split(/\s+/);switch(T.length){case 1:d([0,0,0,0]);break;case 2:d([0,1,0,1]);break;case 3:d([0,1,2,1]);break;case 4:d([0,1,2,3])}return E},border:function(t){return CKEDITOR.tools.style.border.fromCssRule(t)},_findColor:function(t){var d=[],o=CKEDITOR.tools.array;return(d=(d=d.concat(t.match(this._rgbaRegExp)||[])).concat(t.match(this._hslaRegExp)||[])).concat(o.filter(t.split(/\s+/),function(E){return!!E.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||E.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(t,o,d){var E=[];return this.forEach(t,function(T,h){o.call(d,T,h,t)&&E.push(T)}),E},find:function(t,o,d){for(var E=t.length,T=0;T<E;){if(o.call(d,t[T],T,t))return t[T];T++}},forEach:function(t,o,d){var T,E=t.length;for(T=0;T<E;T++)o.call(d,t[T],T,t)},map:function(t,o,d){for(var E=[],T=0;T<t.length;T++)E.push(o.call(d,t[T],T,t));return E},reduce:function(t,o,d,E){for(var T=0;T<t.length;T++)d=o.call(E,d,t[T],T,t);return d},every:function(t,o,d){return!t.length||(o=this.filter(t,o,d),t.length===o.length)},some:function(t,o,d){for(var E=0;E<t.length;E++)if(o.call(d,t[E],E,t))return!0;return!1},zip:function(t,o){return CKEDITOR.tools.array.map(t,function(d,E){return[d,o[E]]})},unique:function(t){return this.filter(t,function(o,d){return d===CKEDITOR.tools.array.indexOf(t,o)})}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(t){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(t),function(o){return[o,t[o]]})},values:function(t){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(t),function(o){return t[o]})},keys:function(t){var o=Object.prototype.hasOwnProperty,d=[],E=CKEDITOR.tools.object.DONT_ENUMS;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(!t||"object"!=typeof t)){if(o=[],"string"==typeof t)for(d=0;d<t.length;d++)o.push(String(d));return o}for(var T in t)d.push(T);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(T=0;T<E.length;T++)o.call(t,E[T])&&d.push(E[T]);return d},findKey:function(t,o){if("object"!=typeof t)return null;for(var d in t)if(t[d]===o)return d;return null},merge:function(t,o){var d=CKEDITOR.tools,E=d.clone(t),T=d.clone(o);return d.array.forEach(d.object.keys(T),function(h){E[h]="object"==typeof T[h]&&"object"==typeof E[h]?d.object.merge(E[h],T[h]):T[h]}),E}},getAbsoluteRectPosition:function(t,o){var E=CKEDITOR.tools.copy(o);!function d(h){if(h){var R=h.getClientRect();E.top+=R.top,E.left+=R.left,"x"in E&&"y"in E&&(E.x+=R.x,E.y+=R.y),d(h.getWindow().getFrame())}}(t.getFrame());var T=CKEDITOR.document.getWindow().getScrollPosition();return E.top+=T.y,E.left+=T.x,"x"in E&&"y"in E&&(E.y+=T.y,E.x+=T.x),E.right=E.left+E.width,E.bottom=E.top+E.height,E}},a.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},p.prototype=CKEDITOR.tools.prototypedCopy(a.prototype),p.prototype._reschedule=function(){this._scheduledTimer&&this._clearTimer()},p.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=a,CKEDITOR.tools.buffers.throttle=p,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(t){t=t||{},this.width=t.width,this.style=t.style,this.color=t.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var t in this._.normalizeMap){var o=this[t];o&&(this[t]=CKEDITOR.tools.array.reduce(this._.normalizeMap[t],function(d,E){return d.replace(E[0],E[1])},o))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],function(t){return!!t}).join(" ")}},statics:{fromCssRule:function(t){var o={},d=t.split(/\s+/g);return(t=CKEDITOR.tools.style.parse._findColor(t)).length&&(o.color=t[0]),CKEDITOR.tools.array.forEach(d,function(E){o.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,E)?!o.width&&CKEDITOR.tools.style.parse._widthRegExp.test(E)&&(o.width=E):o.style=E}),new CKEDITOR.tools.style.border(o)},splitCssValues:function(t,o){o=o||{};var d=CKEDITOR.tools.array.reduce(["width","style","color"],function(E,T){var h=t["border-"+T]||o[T];return E[T]=h?CKEDITOR.tools.style.parse.sideShorthand(h):null,E},{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],function(E,T){var R,h={};for(R in d){var K=t["border-"+T+"-"+R];h[R]=K||d[R]&&d[R][T]}return E["border-"+T]=new CKEDITOR.tools.style.border(h),E},{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,p=function(i,e){for(var t=CKEDITOR.tools.clone(i),o=1;o<arguments.length;o++)for(var d in e=arguments[o])delete t[d];return t},u={},r={},s={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},c={command:1,link:1,meta:1,noscript:1,script:1,style:1},f={},l={"#":1},n={center:1,dir:1,noframes:1};return a(u,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},l,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(r,s,u,n),p={a:p(u,{a:1,button:1}),abbr:u,address:r,area:f,article:r,aside:r,audio:a({source:1,track:1},r),b:u,base:f,bdi:u,bdo:u,blockquote:r,body:r,br:f,button:p(u,{a:1,button:1}),canvas:u,caption:r,cite:u,code:u,col:f,colgroup:{col:1},command:f,datalist:a({option:1},u),dd:r,del:u,details:a({summary:1},r),dfn:u,div:r,dl:{dt:1,dd:1},dt:r,em:u,embed:f,fieldset:a({legend:1},r),figcaption:r,figure:a({figcaption:1},r),footer:r,form:r,h1:u,h2:u,h3:u,h4:u,h5:u,h6:u,head:a({title:1,base:1},c),header:r,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:f,html:a({head:1,body:1},r,c),i:u,iframe:l,img:f,input:f,ins:u,kbd:u,keygen:f,label:u,legend:u,li:r,link:f,main:r,map:r,mark:u,menu:a({li:1},r),meta:f,meter:p(u,{meter:1}),nav:r,noscript:a({link:1,meta:1,style:1},u),object:a({param:1},u),ol:{li:1},optgroup:{option:1},option:l,output:u,p:u,param:f,pre:u,progress:p(u,{progress:1}),q:u,rp:u,rt:u,ruby:a({rp:1,rt:1},u),s:u,samp:u,script:l,section:r,select:{optgroup:1,option:1},small:u,source:f,span:u,strong:u,style:l,sub:u,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},u),sup:u,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:r,textarea:l,tfoot:{tr:1},th:r,thead:{tr:1},time:p(u,{time:1}),title:l,tr:{th:1,td:1},track:f,u,ul:{li:1},var:u,video:a({source:1,track:1},r),wbr:f,acronym:u,applet:a({param:1},r),basefont:f,big:u,center:r,dialog:f,dir:{li:1},font:u,isindex:f,noframes:r,strike:u,tt:u},a(p,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},s,n),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:u,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},p.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),p}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var p=this.$;p.preventDefault?p.preventDefault():p.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.HISTORY_NATIVE=1,CKEDITOR.HISTORY_HASH=2,CKEDITOR.HISTORY_OFF=0,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(p,u){return function(r){typeof CKEDITOR<"u"&&p.fire(u,new CKEDITOR.dom.event(r))}};return{getPrivate:function(){var p;return(p=this.getCustomData("_"))||this.setCustomData("_",p={}),p},on:function(p){var u=this.getCustomData("_cke_nativeListeners");return u||(u={},this.setCustomData("_cke_nativeListeners",u)),u[p]||(u=u[p]=a(this,p),this.$.addEventListener?this.$.addEventListener(p,u,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+p,u)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(p){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(p)){var u=this.getCustomData("_cke_nativeListeners"),r=u&&u[p];r&&(this.$.removeEventListener?this.$.removeEventListener(p,r,!1):this.$.detachEvent&&this.$.detachEvent("on"+p,r),delete u[p])}},removeAllListeners:function(){try{var u,p=this.getCustomData("_cke_nativeListeners");for(u in p){var r=p[u];this.$.detachEvent?this.$.detachEvent("on"+u,r):this.$.removeEventListener&&this.$.removeEventListener(u,r,!1),delete p[u]}}catch(s){if(!CKEDITOR.env.edge||-2146828218!==s.number)throw s}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var p={};CKEDITOR.on("reset",function(){p={}}),a.equals=function(u){try{return u&&u.$===this.$}catch{return!1}},a.setCustomData=function(u,r){var s=this.getUniqueId();return(p[s]||(p[s]={}))[u]=r,this},a.getCustomData=function(u){var r=this.$["data-cke-expando"];return(r=r&&p[r])&&u in r?r[u]:null},a.removeCustomData=function(u){var r,s,c;return(r=(r=this.$["data-cke-expando"])&&p[r])&&(s=r[u],c=u in r,delete r[u]),c?s:null},a.clearCustomData=function(){this.removeAllListeners();var u=this.getUniqueId();u&&delete p[u]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,p){return a.append(this,p),a},clone:function(a,p){var s=this.$.cloneNode(a);return function u(c){if(c["data-cke-expando"]&&(c["data-cke-expando"]=!1),(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(p||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a)){c=c.childNodes;for(var f=0;f<c.length;f++)u(c[f])}}(s),s=new CKEDITOR.dom.node(s),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function r(c){if(c.type==CKEDITOR.NODE_ELEMENT||c.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(c.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var f=c.getName();":"==f[0]&&c.renameNode(f.substring(1))}if(a)for(f=0;f<c.getChildCount();f++)r(c.getChild(f))}}(s),s},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var p=[],u=this.getDocument().$.documentElement,r=this;r&&r!=u;){var s=r.getParent();s&&p.unshift(this.getIndex.call(r,a)),r=s}return p},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function p(c,f){var l=f?c.getNext():c.getPrevious();return l&&l.type==CKEDITOR.NODE_TEXT?l.isEmpty()?p(l,f):l:null}var s,u=this,r=-1;if(!this.getParent()||a&&u.type==CKEDITOR.NODE_TEXT&&u.isEmpty()&&!p(u)&&!p(u,!0))return-1;do{(!a||u.equals(this)||u.type!=CKEDITOR.NODE_TEXT||!s&&!u.isEmpty())&&(r++,s=u.type==CKEDITOR.NODE_TEXT)}while(u=u.getPrevious());return r},getNextSourceNode:function(a,p,u){if(u&&!u.call){var r=u;u=function(c){return!c.equals(r)}}var s;if(!(a=!a&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&u&&!1===u(this,!0))return null;a=this.getNext()}for(;!a&&(s=(s||this).getParent());){if(u&&!1===u(s,!0))return null;a=s.getNext()}return!a||u&&!1===u(a)?null:p&&p!=a.type?a.getNextSourceNode(!1,p,u):a},getPreviousSourceNode:function(a,p,u){if(u&&!u.call){var r=u;u=function(c){return!c.equals(r)}}var s;if(!(a=!a&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&u&&!1===u(this,!0))return null;a=this.getPrevious()}for(;!a&&(s=(s||this).getParent());){if(u&&!1===u(s,!0))return null;a=s.getPrevious()}return!a||u&&!1===u(a)?null:p&&a.type!=p?a.getPreviousSourceNode(!1,p,u):a},getPrevious:function(a){var u,p=this.$;do{u=(p=p.previousSibling)&&10!=p.nodeType&&new CKEDITOR.dom.node(p)}while(u&&a&&!a(u));return u},getNext:function(a){var u,p=this.$;do{u=(p=p.nextSibling)&&new CKEDITOR.dom.node(p)}while(u&&a&&!a(u));return u},getParent:function(a){var p=this.$.parentNode;return p&&(p.nodeType==CKEDITOR.NODE_ELEMENT||a&&p.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(p):null},getParents:function(a){var p=this,u=[];do{u[a?"push":"unshift"](p)}while(p=p.getParent());return u},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var p=this.contains?this:this.getParent();do{if(p.contains(a))return p}while(p=p.getParent());return null},getPosition:function(a){var p=this.$,u=a.$;if(p.compareDocumentPosition)return p.compareDocumentPosition(u);if(p==u)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(p.contains){if(p.contains(u))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(u.contains(p))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in p)return 0>p.sourceIndex||0>u.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:p.sourceIndex<u.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}p=this.getAddress(),a=a.getAddress();u=Math.min(p.length,a.length);for(var r=0;r<u;r++)if(p[r]!=a[r])return p[r]<a[r]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return p.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,p){var r,s,u=this.$;for(p||(u=u.parentNode),"function"==typeof a?(s=!0,r=a):(s=!1,r=function(c){return c="string"==typeof c.nodeName?c.nodeName.toLowerCase():"","string"==typeof a?c==a:c in a});u;){if(r(s?new CKEDITOR.dom.node(u):u))return new CKEDITOR.dom.node(u);try{u=u.parentNode}catch{u=null}}return null},hasAscendant:function(a,p){var u=this.$;for(p||(u=u.parentNode);u;){if(u.nodeName&&u.nodeName.toLowerCase()==a)return!0;u=u.parentNode}return!1},move:function(a,p){a.append(this.remove(),p)},remove:function(a){var p=this.$,u=p.parentNode;if(u){if(a)for(;a=p.firstChild;)u.insertBefore(p.removeChild(a),p);u.removeChild(p)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var p=CKEDITOR.tools.ltrim(a.getText()),u=a.getLength();if(!p){a.remove();continue}p.length<u&&(a.split(u-p.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var p=CKEDITOR.tools.rtrim(a.getText()),u=a.getLength();if(!p){a.remove();continue}p.length<u&&(a.split(p.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var p=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(p=this.getParent()),CKEDITOR.env.edge&&p&&p.is("textarea","input")&&(a=!0),!a&&p&&typeof p.$.isContentEditable<"u")return!(p.$.isContentEditable||p.data("cke-editable"));for(;p;){if(p.data("cke-editable"))return!1;if(p.hasAttribute("contenteditable"))return"false"==p.getAttribute("contenteditable");p=p.getParent()}return!0}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,p="CSS1Compat"==a.compatMode;return{width:(p?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(p?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:{x:(a=a.document).documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(a=CKEDITOR.appendTimestamp(a),this.$.createStyleSheet)this.$.createStyleSheet(a);else{var p=new CKEDITOR.dom.element("link");p.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(p)}},appendStyleText:function(a){if(this.$.createStyleSheet){var p=this.$.createStyleSheet("");p.cssText=a}else{var u=new CKEDITOR.dom.element("style",this);u.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(u)}return p||u.$.sheet},createElement:function(a,p){var u=new CKEDITOR.dom.element(a,this);return p&&(p.attributes&&u.setAttributes(p.attributes),p.styles&&u.setStyles(p.styles)),u},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch{return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,p){for(var u=this.$.documentElement,r=0;u&&r<a.length;r++){var s=a[r];if(p)for(var c=-1,f=0;f<u.childNodes.length;f++){var l=u.childNodes[f];if((!0!==p||3!=l.nodeType||!l.previousSibling||3!=l.previousSibling.nodeType)&&++c==s){u=l;break}}else u=u.childNodes[s]}return u?new CKEDITOR.dom.node(u):null},getElementsByTag:function(a,p){return CKEDITOR.env.ie&&8>=document.documentMode||!p||(a=p+":"+a),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(a),this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(a){return new CKEDITOR.dom.node(a)})}},CKEDITOR.dom.element=function(a,p){"string"==typeof a&&(a=(p?p.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,p){var u=new CKEDITOR.dom.element("div",p);return u.setHtml(a),u.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,p,u,r){var s=p.getCustomData("list_marker_id")||p.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),c=p.getCustomData("list_marker_names")||p.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[s]=p,c[u]=1,p.setCustomData(u,r)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var p in a)CKEDITOR.dom.element.clearMarkers(a,a[p],1)},CKEDITOR.dom.element.clearMarkers=function(a,p,u){var c,r=p.getCustomData("list_marker_names"),s=p.getCustomData("list_marker_id");for(c in r)p.removeCustomData(c);p.removeCustomData("list_marker_names"),u&&(p.removeCustomData("list_marker_id"),delete a[s])},function(){function a(l,n){return-1<(" "+l+" ").replace(c," ").indexOf(" "+n+" ")}function p(l){var n=!0;return l.$.id||(l.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),n=!1),function(){n||l.removeAttribute("id")}}function u(l,n){var i=CKEDITOR.tools.escapeCss(l.$.id);return"#"+i+" "+n.split(/,\s*/).join(", #"+i+" ")}function r(l){for(var n=0,i=0,e=f[l].length;i<e;i++)n+=parseFloat(this.getComputedStyle(f[l][i])||0,10)||0;return n}var l,s=typeof(s=document.createElement("_").classList)<"u"&&null!==String(s.add).match(/\[Native code\]/gi),c=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:s?function(l){return this.$.classList.add(l),this}:function(l){var n=this.$.className;return n&&(a(n,l)||(n+=" "+l)),this.$.className=n||l,this},removeClass:s?function(l){var n=this.$;return n.classList.remove(l),n.className||n.removeAttribute("class"),this}:function(l){var n=this.getAttribute("class");return n&&a(n,l)&&((n=n.replace(new RegExp("(?:^|\\s+)"+l+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",n):this.removeAttribute("class")),this},hasClass:function(l){return a(this.$.className,l)},append:function(l,n){return"string"==typeof l&&(l=this.getDocument().createElement(l)),n?this.$.insertBefore(l.$,this.$.firstChild):this.$.appendChild(l.$),l},appendHtml:function(l){if(this.$.childNodes.length){var n=new CKEDITOR.dom.element("div",this.getDocument());n.setHtml(l),n.moveChildren(this)}else this.setHtml(l)},appendText:function(l){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=l:this.append(new CKEDITOR.dom.text(l))},appendBogus:function(l){if(l||CKEDITOR.env.needsBrFiller){for(l=this.getLast();l&&l.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(l.getText());)l=l.getPrevious();l&&l.is&&l.is("br")||(l=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&l.setAttribute("type","_moz"),this.append(l))}},breakParent:function(l,n){var i=new CKEDITOR.dom.range(this.getDocument());i.setStartAfter(this),i.setEndAfter(l);var t,e=i.extractContents(!1,n||!1);if(i.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(i=new CKEDITOR.dom.element("div");t=e.getFirst();)t.$.style.backgroundColor&&(t.$.style.backgroundColor=t.$.style.backgroundColor),i.append(t);i.insertAfter(this),i.remove(!0)}else e.insertAfterNode(this)},contains:document.compareDocumentPosition?function(l){return!!(16&this.$.compareDocumentPosition(l.$))}:function(l){var n=this.$;return l.type!=CKEDITOR.NODE_ELEMENT?n.contains(l.getParent().$):n!=l.$&&n.contains(l.$)},focus:function(){function l(){try{this.$.focus()}catch{}}return function(n){n?CKEDITOR.tools.setTimeout(l,100,this):l.call(this)}}(),getHtml:function(){var l=this.$.innerHTML;return CKEDITOR.env.ie?l.replace(/<\?[^>]*>/g,""):l},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var l=this.$.ownerDocument.createElement("div");return l.appendChild(this.$.cloneNode(!0)),l.innerHTML},getClientRect:function(l){var n=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!n.width&&(n.width=n.right-n.left),!n.height&&(n.height=n.bottom-n.top),l?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),n):n},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(l){try{var n=this.$;if(this.getParent())return n.innerHTML=l;var i=this.getDocument()._getHtml5ShivFrag();return i.appendChild(n),n.innerHTML=l,i.removeChild(n),l}catch{for(this.$.innerHTML="",(n=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=l,n=n.getChildren();n.count();)this.append(n.getItem(0));return l}}:function(l){return this.$.innerHTML=l},setText:(l=document.createElement("p"),l.innerHTML="x",l=l.textContent,function(n){this.$[l?"textContent":"innerText"]=n}),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(n){switch(n){case"class":n="className";break;case"http-equiv":n="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(n=this.$.getAttribute(n,2))&&0===this.$.tabIndex&&(n=null),n;case"checked":return((n=this.$.attributes.getNamedItem(n)).specified?n.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[n];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(n,2)}:function(n){return this.$.getAttribute(n,2)},getAttributes:function(l){var e,n={},i=this.$.attributes;for(l=CKEDITOR.tools.isArray(l)?l:[],e=0;e<i.length;e++)-1===CKEDITOR.tools.indexOf(l,i[e].name)&&(n[i[e].name]=i[e].value);return n},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getClientSize:function(){return{width:this.$.clientWidth,height:this.$.clientHeight}},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(l){var n=this.getWindow().$.getComputedStyle(this.$,null);return n?n.getPropertyValue(l):""}:function(l){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(l)]},getDtd:function(){var l=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return l},l},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var l=this.$.tabIndex;return 0!==l||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?l:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var l=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var n=this.$.scopeName;"HTML"!=n&&(l=n.toLowerCase()+":"+l)}return this.getName=function(){return l},this.getName()},getValue:function(){return this.$.value},getFirst:function(l){var n=this.$.firstChild;return(n=n&&new CKEDITOR.dom.node(n))&&l&&!l(n)&&(n=n.getNext(l)),n},getLast:function(l){var n=this.$.lastChild;return(n=n&&new CKEDITOR.dom.node(n))&&l&&!l(n)&&(n=n.getPrevious(l)),n},getStyle:function(l){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(l)]},is:function(){var l=this.getName();if("object"==typeof arguments[0])return!!arguments[0][l];for(var n=0;n<arguments.length;n++)if(arguments[n]==l)return!0;return!1},isEditable:function(l){var n=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[n]||CKEDITOR.dtd.$empty[n]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount())&&(!1===l||!(!(l=CKEDITOR.dtd[n]||CKEDITOR.dtd.span)||!l["#"]))},isIdentical:function(l){var n=this.clone(0,1);if(l=l.clone(0,1),n.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),l.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),n.$.isEqualNode)return n.$.style.cssText=CKEDITOR.tools.normalizeCssText(n.$.style.cssText),l.$.style.cssText=CKEDITOR.tools.normalizeCssText(l.$.style.cssText),n.$.isEqualNode(l.$);if(n=n.getOuterHtml(),l=l.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var i=this.getParent();i.type==CKEDITOR.NODE_ELEMENT&&((i=i.clone()).setHtml(n),n=i.getHtml(),i.setHtml(l),l=i.getHtml())}return n==l},isVisible:function(){var n,i,l=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return l&&CKEDITOR.env.webkit&&(!(n=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(i=n.$.frameElement)&&(l=new CKEDITOR.dom.element(i).isVisible())),!!l},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var l=this.getChildren(),n=0,i=l.count();n<i;n++){var e=l.getItem(n);if((e.type!=CKEDITOR.NODE_ELEMENT||!e.data("cke-bookmark"))&&(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var l=this.$.attributes,n=0;n<l.length;n++){var i=l[n];switch(i.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(i.specified)return!0}}return!1}:function(){var l=this.$.attributes,n=l.length,i={"data-cke-expando":1,_moz_dirty:1};return 0<n&&(2<n||!i[l[0].nodeName]||2==n&&!i[l[1].nodeName])},hasAttribute:function(){function l(n){var i=this.$.attributes.getNamedItem(n);if("input"==this.getName())switch(n){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(n=this.getAttribute("type"))||"radio"==n?"on"!=this.$.value:!!this.$.value}return!!i&&i.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(n){return"name"==n?!!this.$.name:l.call(this,n)}:l:function(n){return!!this.$.attributes.getNamedItem(n)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(l,n){var e,i=this.$;if(i!=(l=l.$))if(n)for(;e=i.lastChild;)l.insertBefore(i.removeChild(e),l.firstChild);else for(;e=i.firstChild;)l.appendChild(i.removeChild(e))},mergeSiblings:function(){function l(n,i,e){if(i&&i.type==CKEDITOR.NODE_ELEMENT){for(var t=[];i.data("cke-bookmark")||i.isEmptyInlineRemoveable();)if(t.push(i),!(i=e?i.getNext():i.getPrevious())||i.type!=CKEDITOR.NODE_ELEMENT)return;if(n.isIdentical(i)){for(var o=e?n.getLast():n.getFirst();t.length;)t.shift().move(n,!e);i.moveChildren(n,!e),i.remove(),o&&o.type==CKEDITOR.NODE_ELEMENT&&o.mergeSiblings()}}}return function(n){(!1===n||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(l(this,this.getNext(),!0),l(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var l=function(n,i){return this.$.setAttribute(n,i),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(n,i){return"class"==n?this.$.className=i:"style"==n?this.$.style.cssText=i:"tabindex"==n?this.$.tabIndex=i:"checked"==n?this.$.checked=i:"contenteditable"==n?l.call(this,"contentEditable",i):l.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(n,i){if("src"==n&&i.match(/^http:\/\//))try{l.apply(this,arguments)}catch{}else l.apply(this,arguments);return this}:l}(),setAttributes:function(l){for(var n in l)this.setAttribute(n,l[n]);return this},setValue:function(l){return this.$.value=l,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(n){"class"==n?n="className":"tabindex"==n?n="tabIndex":"contenteditable"==n&&(n="contentEditable"),this.$.removeAttribute(n)}:function(n){this.$.removeAttribute(n)},removeAttributes:function(l){if(CKEDITOR.tools.isArray(l))for(var n=0;n<l.length;n++)this.removeAttribute(l[n]);else for(n in l=l||this.getAttributes())l.hasOwnProperty(n)&&this.removeAttribute(n)},removeStyle:function(l){if((n=this.$.style).removeProperty||"border"!=l&&"margin"!=l&&"padding"!=l)n.removeProperty?n.removeProperty(l):n.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(l)),this.$.style.cssText||this.removeAttribute("style");else{var e,i=["top","left","right","bottom"];"border"==l&&(e=["color","style","width"]);for(var n=[],t=0;t<i.length;t++)if(e)for(var o=0;o<e.length;o++)n.push([l,i[t],e[o]].join("-"));else n.push([l,i[t]].join("-"));for(l=0;l<n.length;l++)this.removeStyle(n[l])}},setStyle:function(l,n){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(l)]=n,this},setStyles:function(l){for(var n in l)this.setStyle(n,l[n]);return this},setOpacity:function(l){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(l=Math.round(100*l),this.setStyle("filter",100<=l?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+l+")")):this.setStyle("opacity",l)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var n=this.getElementsByTag("*"),i=0,e=n.count();i<e;i++)n.getItem(i).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var l=this;"html"!=l.getName();){if("static"!=l.getComputedStyle("position"))return l;l=l.getParent()}return null},getDocumentPosition:function(l){var n=0,i=0,e=this.getDocument(),t=e.getBody(),o="BackCompat"==e.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(T=this,h=null;T&&"body"!=T.getName()&&"html"!=T.getName();){for(n+=T.$.offsetLeft-T.$.scrollLeft,i+=T.$.offsetTop-T.$.scrollTop,T.equals(this)||(n+=T.$.clientLeft||0,i+=T.$.clientTop||0);h&&!h.equals(T);)n-=h.$.scrollLeft,i-=h.$.scrollTop,h=h.getParent();h=T,T=(d=T.$.offsetParent)?new CKEDITOR.dom.element(d):null}else{var d=this.$.getBoundingClientRect(),E=e.$.documentElement,T=E.clientTop||t.$.clientTop||0,h=E.clientLeft||t.$.clientLeft||0,R=!0;CKEDITOR.env.ie&&(R=e.getDocumentElement().contains(this),e=e.getBody().contains(this),R=o&&e||!o&&R),R&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(n=t.$.scrollLeft||E.scrollLeft,i=t.$.scrollTop||E.scrollTop):(n=(i=o?t.$:E).scrollLeft,i=i.scrollTop),n=d.left+n-h,i=d.top+i-T)}return l&&(d=this.getWindow(),T=l.getWindow(),!d.equals(T)&&d.$.frameElement&&(n+=(l=new CKEDITOR.dom.element(d.$.frameElement).getDocumentPosition(l)).x,i+=l.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||o||(n+=this.$.clientLeft?1:0,i+=this.$.clientTop?1:0),{x:n,y:i}},scrollIntoView:function(l){var n=this.getParent();if(n)do{if((n.$.clientWidth&&n.$.clientWidth<n.$.scrollWidth||n.$.clientHeight&&n.$.clientHeight<n.$.scrollHeight)&&!n.is("body")&&this.scrollIntoParent(n,l,1),n.is("html")){var i=n.getWindow();try{var e=i.$.frameElement;e&&(n=new CKEDITOR.dom.element(e))}catch{}}}while(n=n.getParent())},scrollIntoParent:function(l,n,i){var e,t,o,d;function E(B,j){/body|html/.test(l.getName())?l.getWindow().$.scrollBy(B,j):(l.$.scrollLeft+=B,l.$.scrollTop+=j)}function T(B,j){var _={x:0,y:0};if(!B.is(R?"body":"html")){var F=B.$.getBoundingClientRect();_.x=F.left,_.y=F.top}return(F=B.getWindow()).equals(j)||(F=T(CKEDITOR.dom.element.get(F.$.frameElement),j),_.x+=F.x,_.y+=F.y),_}function h(B,j){return parseInt(B.getComputedStyle("margin-"+j)||0,10)||0}!l&&(l=this.getWindow());var R="BackCompat"==(o=l.getDocument()).$.compatMode;l instanceof CKEDITOR.dom.window&&(l=R?o.getBody():o.getDocumentElement()),CKEDITOR.env.webkit&&(o=this.getEditor(!1))&&(o._.previousScrollTop=null),t=T(this,o=l.getWindow());var K=T(l,o),A=this.$.offsetHeight;e=this.$.offsetWidth;var v=l.$.clientHeight,N=l.$.clientWidth;o=t.x-h(this,"left")-K.x||0,d=t.y-h(this,"top")-K.y||0,e=t.x+e+h(this,"right")-(K.x+N)||0,t=t.y+A+h(this,"bottom")-(K.y+v)||0,(0>d||0<t)&&E(0,!0===n?d:!1===n?t:0>d?d:t),i&&(0>o||0<e)&&E(0>o?o:e,0)},setState:function(l,n,i){switch(n=n||"cke",l){case CKEDITOR.TRISTATE_ON:this.addClass(n+"_on"),this.removeClass(n+"_off"),this.removeClass(n+"_disabled"),i&&this.setAttribute("aria-pressed",!0),i&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(n+"_disabled"),this.removeClass(n+"_off"),this.removeClass(n+"_on"),i&&this.setAttribute("aria-disabled",!0),i&&this.removeAttribute("aria-pressed");break;default:this.addClass(n+"_off"),this.removeClass(n+"_on"),this.removeClass(n+"_disabled"),i&&this.removeAttribute("aria-pressed"),i&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var l=this.$;try{l.contentWindow.document}catch{l.src=l.src}return l&&new CKEDITOR.dom.document(l.contentWindow.document)},copyAttributes:function(l,n){var i=this.$.attributes;n=n||{};for(var e=0;e<i.length;e++){var d,t=i[e],o=t.nodeName.toLowerCase();o in n||("checked"==o&&(d=this.getAttribute(o))?l.setAttribute(o,d):(!CKEDITOR.env.ie||this.hasAttribute(o))&&(null===(d=this.getAttribute(o))&&(d=t.nodeValue),l.setAttribute(o,d)))}""!==this.$.style.cssText&&(l.$.style.cssText=this.$.style.cssText)},renameNode:function(l){if(this.getName()!=l){var n=this.getDocument();l=new CKEDITOR.dom.element(l,n),this.copyAttributes(l),this.moveChildren(l),this.getParent(!0)&&this.$.parentNode.replaceChild(l.$,this.$),l.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=l.$,delete this.getName}},getChild:function(){function l(n,i){var e=n.childNodes;if(0<=i&&i<e.length)return e[i]}return function(n){var i=this.$;if(n.slice)for(n=n.slice();0<n.length&&i;)i=l(i,n.shift());else i=l(i,n);return i?new CKEDITOR.dom.node(i):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function l(n){return n.type==CKEDITOR.NODE_ELEMENT&&n.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(n){n.data.getTarget().getAscendant(l,!0)||n.data.preventDefault()})},getDirection:function(l){return l?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(l,n){return l="data-"+l,void 0===n?this.getAttribute(l):(!1===n?this.removeAttribute(l):this.setAttribute(l,n),null)},getEditor:function(l){var i,e,t,n=CKEDITOR.instances;for(i in l=l||void 0===l,n)if((e=n[i]).element.equals(this)&&e.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!l&&(t=e.editable())&&(t.equals(this)||t.contains(this)))return e;return null},find:function(l){var n=p(this);return l=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(u(this,l))),n(),l},findOne:function(l){var n=p(this);return l=this.$.querySelector(u(this,l)),n(),l?new CKEDITOR.dom.element(l):null},forEach:function(l,n,i){if(!(i||n&&this.type!=n))var e=l(this);if(!1!==e){i=this.getChildren();for(var t=0;t<i.count();t++)(e=i.getItem(t)).type==CKEDITOR.NODE_ELEMENT?e.forEach(l,n):n&&e.type!=n||l(e)}},fireEventHandler:function(l,n){var i="on"+l,e=this.$;if(CKEDITOR.env.ie&&9>CKEDITOR.env.version){var o,t=e.ownerDocument.createEventObject();for(o in n)t[o]=n[o];e.fireEvent(i,t)}else e[e[l]?l:i](n)},isDetached:function(){var l=this.getDocument(),n=l.getDocumentElement();return!n.equals(this)&&!n.contains(this)||(!CKEDITOR.env.ie||8<CKEDITOR.env.version&&!CKEDITOR.env.quirks)&&!l.$.defaultView}});var f={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(l,n,i){"number"==typeof n&&(!i||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(n-=r.call(this,l)),this.setStyle(l,n+"px"))},CKEDITOR.dom.element.prototype.getSize=function(l,n){var i=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(l)],this.$["client"+CKEDITOR.tools.capitalize(l)])||0;return n&&(i-=r.call(this,l)),i}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){(a=a.$).parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(a),a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function a(o,d){var E=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,E.collapsed)return this.end(),null;E.optimize()}var T,h=E.startContainer;T=E.endContainer;var A,R=E.startOffset,K=E.endOffset,v=this.guard,N=this.type,B=o?"getPreviousSourceNode":"getNextSourceNode";if(!o&&!this._.guardLTR){var j=T.type==CKEDITOR.NODE_ELEMENT?T:T.getParent(),_=T.type==CKEDITOR.NODE_ELEMENT?T.getChild(K):T.getNext();this._.guardLTR=function(I,w){return!(w&&j.equals(I)||_&&I.equals(_)||I.type==CKEDITOR.NODE_ELEMENT&&w&&I.equals(E.root))}}if(o&&!this._.guardRTL){var F=h.type==CKEDITOR.NODE_ELEMENT?h:h.getParent(),x=h.type==CKEDITOR.NODE_ELEMENT?R?h.getChild(R-1):null:h.getPrevious();this._.guardRTL=function(I,w){return!(w&&F.equals(I)||x&&I.equals(x)||I.type==CKEDITOR.NODE_ELEMENT&&w&&I.equals(E.root))}}var O=o?this._.guardRTL:this._.guardLTR;for(A=v?function(I,w){return!1!==O(I,w)&&v(I,w)}:O,this.current?T=this.current[B](!1,N,A):(o?T.type==CKEDITOR.NODE_ELEMENT&&(T=0<K?T.getChild(K-1):!1===A(T,!0)?null:T.getPreviousSourceNode(!0,N,A)):(T=h).type==CKEDITOR.NODE_ELEMENT&&((T=T.getChild(R))||(T=!1===A(h,!0)?null:h.getNextSourceNode(!0,N,A))),T&&!1===A(T)&&(T=null));T&&!this._.end;){if(this.current=T,this.evaluator&&!1===this.evaluator(T)){if(d&&this.evaluator)return!1}else if(!d)return T;T=T[B](!1,N,A)}return this.end(),this.current=null}function p(o){for(var d,E=null;d=a.call(this,o);)E=d;return E}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(o){this.range=o,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return p.call(this)},lastBackward:function(){return p.call(this,1)},reset:function(){delete this.current,this._={}}}});var u={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},r={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(o){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in r||!u[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||o&&this.is(o))},CKEDITOR.dom.walker.blockBoundary=function(o){return function(d){return!(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary(o))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(o,d){function E(T){return T&&T.getName&&"span"==T.getName()&&T.data("cke-bookmark")}return function(T){var h,R;return h=T&&T.type!=CKEDITOR.NODE_ELEMENT&&(R=T.getParent())&&E(R),h=o?h:h||E(T),!!(d^h)}},CKEDITOR.dom.walker.whitespaces=function(o){return function(d){var E;return d&&d.type==CKEDITOR.NODE_TEXT&&(E=!CKEDITOR.tools.trim(d.getText())||CKEDITOR.env.webkit&&d.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(o^E)}},CKEDITOR.dom.walker.invisible=function(o){var d=CKEDITOR.dom.walker.whitespaces(),E=CKEDITOR.env.webkit?1:0;return function(T){return d(T)?T=1:(T.type==CKEDITOR.NODE_TEXT&&(T=T.getParent()),T=T.$.offsetWidth<=E),!!(o^T)}},CKEDITOR.dom.walker.nodeType=function(o,d){return function(E){return!!(d^E.type==o)}},CKEDITOR.dom.walker.bogus=function(o){function d(E){return!c(E)&&!f(E)}return function(E){var T=CKEDITOR.env.needsBrFiller?E.is&&E.is("br"):E.getText&&s.test(E.getText());return T&&(T=E.getParent(),E=E.getNext(d),T=T.isBlockBoundary()&&(!E||E.type==CKEDITOR.NODE_ELEMENT&&E.isBlockBoundary())),!!(o^T)}},CKEDITOR.dom.walker.temp=function(o){return function(d){return d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),d=d&&d.hasAttribute("data-cke-temp"),!!(o^d)}};var s=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,c=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(),l=CKEDITOR.dom.walker.temp(),n=function(o){return f(o)||c(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.is(CKEDITOR.dtd.$inline)&&!o.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(o){return function(d){return d=c(d)||f(d)||l(d),!!(o^d)}};var i=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(o){return function(d){for(var E=0,T=d.getChildCount();E<T;++E)if(!i(d.getChild(E)))return!!o;return!o}};var e=CKEDITOR.dom.walker.empty(),t=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(o){var E,d={};for(E in o)CKEDITOR.dtd[E]["#"]&&(d[E]=1);return d}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(o){return function(d){return d=!i(d)&&!!(d.type==CKEDITOR.NODE_TEXT||d.type==CKEDITOR.NODE_ELEMENT&&(d.is(CKEDITOR.dtd.$inline)||d.is("hr")||"false"==d.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&d.is(t)&&e(d))),!!(o^d)}},CKEDITOR.dom.element.prototype.getBogus=function(){var o=this;do{o=o.getPreviousSourceNode()}while(n(o));return!(!o||!(CKEDITOR.env.needsBrFiller?o.is&&o.is("br"):o.getText&&s.test(o.getText())))&&o}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var p=a instanceof CKEDITOR.dom.document;this.document=p?a:a.getDocument(),this.root=p?a.getBody():a},function(){function a(e){e.collapsed=e.startContainer&&e.endContainer&&e.startContainer.equals(e.endContainer)&&e.startOffset==e.endOffset}function p(e,t,o,d,E){function T(G,z,X,Z){var Y=X?G.getPrevious():G.getNext();return Z&&K||(v||Z?z.append(G.clone(!0,E),X):(G.remove(),A&&z.append(G,X))),Y}e.optimizeBookmark();var K=0===t,A=1==t,v=2==t;t=v||A;var F,x,O,I,w,U,N=e.startContainer,B=e.endContainer,j=e.startOffset,_=e.endOffset;if(v&&B.type==CKEDITOR.NODE_TEXT&&(N.equals(B)||N.type===CKEDITOR.NODE_ELEMENT&&N.getFirst().equals(B)))o.append(e.document.createText(B.substring(j,_)));else{B.type==CKEDITOR.NODE_TEXT?v?U=!0:B=B.split(_):0<B.getChildCount()?_>=B.getChildCount()?(B=B.getChild(_-1),x=!0):B=B.getChild(_):I=x=!0,N.type==CKEDITOR.NODE_TEXT?v?w=!0:N.split(j):0<N.getChildCount()?0===j?(N=N.getChild(j),F=!0):N=N.getChild(j-1):O=F=!0;for(var g,k,b,$=N.getParents(),S=B.getParents(),q=function h(){var G,z,X,Z=Math.min($.length,S.length);for(G=0;G<Z;G++)if(z=$[G],X=S[G],!z.equals(X))return G;return G-1}(),C=$.length-1,m=S.length-1,y=o,L=-1,H=q;H<=C;H++){for(b=(k=$[H]).getNext(),H!=C||k.equals(S[H])&&C<m?t&&(g=y.append(k.clone(0,E))):F?T(k,y,!1,O):w&&y.append(e.document.createText(k.substring(j)));b;){if(b.equals(S[H])){L=H;break}b=T(b,y)}y=g}for(y=o,H=q;H<=m;H++)if(b=(o=S[H]).getPrevious(),o.equals($[H]))t&&(y=y.getChild(0));else{if(H!=m||o.equals($[H])&&m<C?t&&(g=y.append(o.clone(0,E))):x?T(o,y,!1,I):U&&y.append(e.document.createText(o.substring(0,_))),H>L)for(;b;)b=T(b,y,!0);y=g}v||function R(){var G=q-1,z=O&&I&&!N.equals(B);G<C-1||G<m-1||z?(z?e.moveToPosition(B,CKEDITOR.POSITION_BEFORE_START):m==G+1&&x?e.moveToPosition(S[G],CKEDITOR.POSITION_BEFORE_END):e.moveToPosition(S[G+1],CKEDITOR.POSITION_BEFORE_START),d&&(G=$[G+1])&&G.type==CKEDITOR.NODE_ELEMENT&&((z=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',e.document)).insertAfter(G),G.mergeSiblings(!1),e.moveToBookmark({startNode:z}))):e.collapse(!0)}()}}function u(){var e=!1,t=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(E){return!(!o(E)&&!t(E))||(d(E)&&!e?e=!0:!(E.type==CKEDITOR.NODE_TEXT&&(E.hasAscendant("pre")||CKEDITOR.tools.trim(E.getText()).length)||E.type==CKEDITOR.NODE_ELEMENT&&!E.is(c)))}}function s(e){return function(){var t;return this[e?"getPreviousNode":"getNextNode"](function(o){return!t&&i(o)&&(t=o),n(o)&&!(f(o)&&o.equals(t))})}}var c={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},f=CKEDITOR.dom.walker.bogus(),l=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,n=CKEDITOR.dom.walker.editable(),i=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var e=new CKEDITOR.dom.range(this.root);return e._setStartContainer(this.startContainer),e.startOffset=this.startOffset,e._setEndContainer(this.endContainer),e.endOffset=this.endOffset,e.collapsed=this.collapsed,e},collapse:function(e){e?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(e){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||p(this,2,t,!1,typeof e>"u"||e),t},deleteContents:function(e){this.collapsed||p(this,0,null,e)},extractContents:function(e,t){var o=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||p(this,1,o,e,typeof t>"u"||t),o},equals:function(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset&&this.startContainer.equals(e.startContainer)&&this.endContainer.equals(e.endContainer)},createBookmark:function(e){function t(A){return A.getAscendant(function(v){var N;return(N=v.data&&v.data("cke-temp"))&&(N=-1===CKEDITOR.tools.array.indexOf(["cke_copybin","cke_pastebin"],v.getAttribute("id"))),N},!0)}var T,h,R,K,o=this.startContainer,d=this.endContainer,E=this.collapsed;return(T=this.document.createElement("span")).data("cke-bookmark",1),T.setStyle("display","none"),T.setHtml("&nbsp;"),e&&(R="cke_bm_"+CKEDITOR.tools.getNextNumber(),T.setAttribute("id",R+(E?"C":"S"))),E||((h=T.clone()).setHtml("&nbsp;"),e&&h.setAttribute("id",R+"E"),K=this.clone(),t(d)&&(d=t(d),K.moveToPosition(d,CKEDITOR.POSITION_AFTER_END)),K.collapse(),K.insertNode(h)),K=this.clone(),t(o)&&(d=t(o),K.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START)),K.collapse(!0),K.insertNode(T),h?(this.setStartAfter(T),this.setEndBefore(h)):this.moveToPosition(T,CKEDITOR.POSITION_AFTER_END),{startNode:e?R+(E?"C":"S"):T,endNode:e?R+"E":h,serializable:e,collapsed:E}},createBookmark2:function(){function e(d){var h,E=d.container,T=d.offset,R=T;if((h=(h=E).type!=CKEDITOR.NODE_ELEMENT||0===R||R==h.getChildCount()?0:h.getChild(R-1).type==CKEDITOR.NODE_TEXT&&h.getChild(R).type==CKEDITOR.NODE_TEXT)&&(T=(E=E.getChild(T-1)).getLength()),E.type==CKEDITOR.NODE_ELEMENT&&0<T){e:{for(h=E;T--;)if(0<=(R=h.getChild(T).getIndex(!0))){T=R;break e}T=-1}T+=1}if(E.type==CKEDITOR.NODE_TEXT){for(h=E,R=0;(h=h.getPrevious())&&h.type==CKEDITOR.NODE_TEXT;)R+=h.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;h=R,E.isEmpty()?(R=E.getPrevious(o),h?(T=h,E=R?R.getNext():E.getParent().getFirst()):(E=E.getParent(),T=R?R.getIndex(!0)+1:0)):T+=h}d.container=E,d.offset=T}function t(d,E){var T=E.getCustomData("cke-fillingChar");if(T){var h=d.container;T.equals(h)&&(d.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=d.offset&&(d.offset=h.getIndex(),d.container=h.getParent()))}}var o=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(d){var E=this.collapsed,T={container:this.startContainer,offset:this.startOffset},h={container:this.endContainer,offset:this.endOffset};return d&&(e(T),t(T,this.root),E||(e(h),t(h,this.root))),{start:T.container.getAddress(d),end:E?null:h.container.getAddress(d),startOffset:T.offset,endOffset:h.offset,normalized:d,collapsed:E,is2:!0}}}(),moveToBookmark:function(e){if(e.is2){var t=this.document.getByAddress(e.start,e.normalized),o=e.startOffset,d=e.end&&this.document.getByAddress(e.end,e.normalized);e=e.endOffset,this.setStart(t,o),d?this.setEnd(d,e):this.collapse(!0)}else t=(o=e.serializable)?this.document.getById(e.startNode):e.startNode,e=o?this.document.getById(e.endNode):e.endNode,this.setStartBefore(t),t.remove(),e?(this.setEndBefore(e),e.remove()):this.collapse(!0)},getBoundaryNodes:function(){var E,e=this.startContainer,t=this.endContainer,o=this.startOffset,d=this.endOffset;if(e.type==CKEDITOR.NODE_ELEMENT)if((E=e.getChildCount())>o)e=e.getChild(o);else if(1>E)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=(e=new CKEDITOR.dom.node(e)).getNextSourceNode()||e}if(t.type==CKEDITOR.NODE_ELEMENT)if((E=t.getChildCount())>d)t=t.getChild(d).getPreviousSourceNode(!0);else if(1>E)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t)}return e.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(e=t),{startNode:e,endNode:t}},getCommonAncestor:function(e,t){var d=this.startContainer,o=this.endContainer;d=d.equals(o)?e&&d.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?d.getChild(this.startOffset):d:d.getCommonAncestor(o);return t&&!d.is?d.getParent():d},optimize:function(){var e=this.startContainer,t=this.startOffset;e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setStartAfter(e):this.setStartBefore(e)),e=this.endContainer,t=this.endOffset,e.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=e.getLength()&&this.setEndAfter(e):this.setEndBefore(e))},optimizeBookmark:function(){var e=this.startContainer,t=this.endContainer;e.is&&e.is("span")&&e.data("cke-bookmark")&&this.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(e,t){var o=this.startContainer,d=this.startOffset,E=this.collapsed;if((!e||E)&&o&&o.type==CKEDITOR.NODE_TEXT){if(d)if(d>=o.getLength())d=o.getIndex()+1,o=o.getParent();else{var T=o.split(d);d=o.getIndex()+1,o=o.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(T,this.endOffset-this.startOffset):o.equals(this.endContainer)&&(this.endOffset+=1)}else d=o.getIndex(),o=o.getParent();if(this.setStart(o,d),E)return void this.collapse(!0)}o=this.endContainer,d=this.endOffset,t||E||!o||o.type!=CKEDITOR.NODE_TEXT||(d?(d>=o.getLength()||o.split(d),d=o.getIndex()+1):d=o.getIndex(),o=o.getParent(),this.setEnd(o,d))},enlarge:function(e,t){function o(y){return y&&y.type==CKEDITOR.NODE_ELEMENT&&y.hasAttribute("contenteditable")?null:y}function d(y,g,k){var b=new CKEDITOR.dom.range(k);for(b.setStart(y,g),b.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),(k=new CKEDITOR.dom.walker(b)).guard=function(L){return!(L.type==CKEDITOR.NODE_ELEMENT&&L.isBlockBoundary())};b=k.next();)if(b.type!=CKEDITOR.NODE_TEXT||(T=b!=y?b.getText():b.substring(g),E.test(T)))return!1;return!0}var T,h,E=new RegExp(/[^\s\ufeff]/);switch(e){case CKEDITOR.ENLARGE_INLINE:var q=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var R=this.getCommonAncestor();h=this.root;var K,A,v,N,B,_,j=!1;_=this.startContainer;var F=this.startOffset;for(_.type==CKEDITOR.NODE_TEXT?(F&&(j=!!(_=!CKEDITOR.tools.trim(_.substring(0,F)).length&&_)),_&&((N=_.getPrevious())||(v=_.getParent()))):(F&&(N=_.getChild(F-1)||_.getLast()),N||(v=_)),v=o(v);v||N;){if(v&&!N){if(!B&&v.equals(R)&&(B=!0),q?v.isBlockBoundary():!h.contains(v))break;j&&"inline"==v.getComputedStyle("display")||(j=!1,B?K=v:this.setStartBefore(v)),N=v.getPrevious()}for(;N;)if(_=!1,N.type==CKEDITOR.NODE_COMMENT)N=N.getPrevious();else{if(N.type==CKEDITOR.NODE_TEXT)T=N.getText(),E.test(T)&&(N=null),_=/[\s\ufeff]$/.test(T);else if((N.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&N.is("br"))&&!N.data("cke-bookmark"))if(j&&CKEDITOR.dtd.$removeEmpty[N.getName()]){if(T=N.getText(),E.test(T))N=null;else{F=N.$.getElementsByTagName("*");for(var O,x=0;O=F[x++];)if(!CKEDITOR.dtd.$removeEmpty[O.nodeName.toLowerCase()]){N=null;break}}N&&(_=!!T.length)}else N=null;if(_&&(j?B?K=v:v&&this.setStartBefore(v):j=!0),N){if(_=N.getPrevious(),!v&&!_){v=N,N=null;break}N=_}else v=null}v&&(v=o(v.getParent()))}for(_=this.endContainer,F=this.endOffset,v=N=null,B=j=!1,_.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(_.substring(F)).length?j=!0:(j=!_.getLength(),F==_.getLength()?(N=_.getNext())||(v=_.getParent()):d(_,F,h)&&(v=_.getParent())):(N=_.getChild(F))||(v=_);v||N;){if(v&&!N){if(!B&&v.equals(R)&&(B=!0),q?v.isBlockBoundary():!h.contains(v))break;j&&"inline"==v.getComputedStyle("display")||(j=!1,B?A=v:v&&this.setEndAfter(v)),N=v.getNext()}for(;N;){if(_=!1,N.type==CKEDITOR.NODE_TEXT)T=N.getText(),d(N,0,h)||(N=null),_=/^[\s\ufeff]/.test(T);else if(N.type==CKEDITOR.NODE_ELEMENT){if((0<N.$.offsetWidth||t&&N.is("br"))&&!N.data("cke-bookmark"))if(j&&CKEDITOR.dtd.$removeEmpty[N.getName()]){if(T=N.getText(),E.test(T))N=null;else for(F=N.$.getElementsByTagName("*"),x=0;O=F[x++];)if(!CKEDITOR.dtd.$removeEmpty[O.nodeName.toLowerCase()]){N=null;break}N&&(_=!!T.length)}else N=null}else _=1;if(_&&j&&(B?A=v:this.setEndAfter(v)),N){if(_=N.getNext(),!v&&!_){v=N,N=null;break}N=_}else v=null}v&&(v=o(v.getParent()))}K&&A&&(R=K.contains(A)?A:K,this.setStartBefore(R),this.setEndAfter(R));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:v=new CKEDITOR.dom.range(this.root),h=this.root,v.setStartAt(h,CKEDITOR.POSITION_AFTER_START),v.setEnd(this.startContainer,this.startOffset),v=new CKEDITOR.dom.walker(v);var I,w,U=CKEDITOR.dom.walker.blockBoundary(e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),$=null,S=function(y){if(y.type==CKEDITOR.NODE_ELEMENT&&"false"==y.getAttribute("contenteditable"))if($){if($.equals(y))return void($=null)}else $=y;else if($)return;var g=U(y);return g||(I=y),g};q=function(y){var g=S(y);return!g&&y.is&&y.is("br")&&(w=y),g};if(v.guard=S,v=v.lastBackward(),I=I||h,this.setStartAt(I,!I.is("br")&&(!v&&this.checkStartOfBlock()||v&&I.contains(v))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){v=this.clone(),v=new CKEDITOR.dom.walker(v);var C=CKEDITOR.dom.walker.whitespaces(),m=CKEDITOR.dom.walker.bookmark();if(v.evaluator=function(y){return!C(y)&&!m(y)},(v=v.previous())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("br"))break}(v=this.clone()).collapse(),v.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),(v=new CKEDITOR.dom.walker(v)).guard=e==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?q:S,I=$=w=null,v=v.lastForward(),I=I||h,this.setEndAt(I,!v&&this.checkEndOfBlock()||v&&I.contains(v)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),w&&this.setEndAfter(w)}},shrink:function(e,t,o){var d="boolean"==typeof o?o:!o||"boolean"!=typeof o.shrinkOnBlockBoundary||o.shrinkOnBlockBoundary,E=o&&o.skipBogus;if(!this.collapsed){e=e||CKEDITOR.SHRINK_TEXT;var v=this.clone(),T=this.startContainer,h=this.endContainer,R=this.startOffset,K=this.endOffset,A=o=1;T&&T.type==CKEDITOR.NODE_TEXT&&(R?R>=T.getLength()?v.setStartAfter(T):(v.setStartBefore(T),o=0):v.setStartBefore(T)),h&&h.type==CKEDITOR.NODE_TEXT&&(K?K>=h.getLength()?v.setEndAfter(h):(v.setEndAfter(h),A=0):v.setEndBefore(h));v=new CKEDITOR.dom.walker(v);var j,N=CKEDITOR.dom.walker.bookmark(),B=CKEDITOR.dom.walker.bogus();return v.evaluator=function(_){return _.type==(e==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},v.guard=function(_,F){return!!(E&&B(_)||N(_))||!(e==CKEDITOR.SHRINK_ELEMENT&&_.type==CKEDITOR.NODE_TEXT||F&&_.equals(j)||!1===d&&_.type==CKEDITOR.NODE_ELEMENT&&_.isBlockBoundary()||_.type==CKEDITOR.NODE_ELEMENT&&_.hasAttribute("contenteditable"))&&(F||_.type!=CKEDITOR.NODE_ELEMENT||(j=_),!0)},o&&(T=v[e==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(T,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),A&&(v.reset(),(v=v[e==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(v,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!o&&!A)}},insertNode:function(e){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,o=t.getChild(this.startOffset);o?e.insertBefore(o):t.append(e),e.getParent()&&e.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(e)},moveToPosition:function(e,t){this.setStartAt(e,t),this.collapse(!0)},moveToRange:function(e){this.setStart(e.startContainer,e.startOffset),this.setEnd(e.endContainer,e.endOffset)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e.type==CKEDITOR.NODE_TEXT?e.getLength():e.getChildCount())},setStart:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex(),e=e.getParent()),this._setStartContainer(e),this.startOffset=t,this.endContainer||(this._setEndContainer(e),this.endOffset=t),a(this)},setEnd:function(e,t){e.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[e.getName()]&&(t=e.getIndex()+1,e=e.getParent()),this._setEndContainer(e),this.endOffset=t,this.startContainer||(this._setStartContainer(e),this.startOffset=t),a(this)},setStartAfter:function(e){this.setStart(e.getParent(),e.getIndex()+1)},setStartBefore:function(e){this.setStart(e.getParent(),e.getIndex())},setEndAfter:function(e){this.setEnd(e.getParent(),e.getIndex()+1)},setEndBefore:function(e){this.setEnd(e.getParent(),e.getIndex())},setStartAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setStart(e,e.getLength()):this.setStart(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(e)}a(this)},setEndAt:function(e,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(e,0);break;case CKEDITOR.POSITION_BEFORE_END:e.type==CKEDITOR.NODE_TEXT?this.setEnd(e,e.getLength()):this.setEnd(e,e.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(e);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(e)}a(this)},fixBlock:function(e,t){var o=this.createBookmark(),d=this.document.createElement(t);this.collapse(e),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),this.insertNode(d);var E=d.getBogus();return E&&E.remove(),d.appendBogus(),this.moveToBookmark(o),d},splitBlock:function(e,t){var o=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),E=o.block,T=d.block,h=null;return o.blockLimit.equals(d.blockLimit)?("br"!=e&&(E||(E=this.fixBlock(!0,e),T=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),T||(T=this.fixBlock(!1,e))),o=E&&this.checkStartOfBlock(),d=T&&this.checkEndOfBlock(),this.deleteContents(),E&&E.equals(T)&&(d?(h=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(T,CKEDITOR.POSITION_AFTER_END),T=null):o?(h=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(E,CKEDITOR.POSITION_BEFORE_START),E=null):(T=this.splitElement(E,t||!1),E.is("ul","ol")||E.appendBogus())),{previousBlock:E,nextBlock:T,wasStartOfBlock:o,wasEndOfBlock:d,elementPath:h}):null},splitElement:function(e,t){if(!this.collapsed)return null;this.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var o=this.extractContents(!1,t||!1),d=e.clone(!1,t||!1);return o.appendTo(d),d.insertAfter(e),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),d},removeEmptyBlocksAtEnd:function(){function e(d){return function(E){return!(t(E)||o(E)||E.type==CKEDITOR.NODE_ELEMENT&&E.isEmptyInlineRemoveable()||d.is("table")&&E.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(!1);return function(d){for(var R,E=this.createBookmark(),T=this[d?"endPath":"startPath"](),h=T.block||T.blockLimit;h&&!h.equals(T.root)&&!h.getFirst(e(h));)R=h.getParent(),this[d?"setEndAt":"setStartAt"](h,CKEDITOR.POSITION_AFTER_END),h.remove(1),h=R;this.moveToBookmark(E)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(e,t){var o=t==CKEDITOR.START,d=this.clone();return d.collapse(o),d[o?"setStartAt":"setEndAt"](e,o?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(d=new CKEDITOR.dom.walker(d)).evaluator=function r(e){var t=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark(1);return function(d){return!(!o(d)&&!t(d))||!e&&f(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}(o),d[o?"checkBackward":"checkForward"]()},checkStartOfBlock:function(e){var t=this.startContainer,o=this.startOffset;return CKEDITOR.env.ie&&o&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,o)),l.test(t)&&this.trim(0,1)),e||this.trim(),e=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(e.block||e.blockLimit,CKEDITOR.POSITION_AFTER_START),(e=new CKEDITOR.dom.walker(t)).evaluator=u(),e.checkBackward()},checkEndOfBlock:function(e){var t=this.endContainer,o=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(o)),l.test(t)&&this.trim(1,0)),e||this.trim(),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(e.block||e.blockLimit,CKEDITOR.POSITION_BEFORE_END),(e=new CKEDITOR.dom.walker(t)).evaluator=u(),e.checkForward()},getPreviousNode:function(e,t,o){var d=this.clone();return d.collapse(1),d.setStartAt(o||this.root,CKEDITOR.POSITION_AFTER_START),(o=new CKEDITOR.dom.walker(d)).evaluator=e,o.guard=t,o.previous()},getNextNode:function(e,t,o){var d=this.clone();return d.collapse(),d.setEndAt(o||this.root,CKEDITOR.POSITION_BEFORE_END),(o=new CKEDITOR.dom.walker(d)).evaluator=e,o.guard=t,o.next()},checkReadOnly:function(){function e(t,o){for(;t;){if(t.type==CKEDITOR.NODE_ELEMENT){if("false"==t.getAttribute("contentEditable")&&!t.data("cke-editable"))return 0;if(t.is("html")||"true"==t.getAttribute("contentEditable")&&(t.contains(o)||t.equals(o)))break}t=t.getParent()}return 1}return function(){var t=this.startContainer,o=this.endContainer;return!(e(t,o)&&e(o,t))}}(),moveToElementEditablePosition:function(e,t){if(e.type==CKEDITOR.NODE_ELEMENT&&!e.isEditable(!1))return this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var o=0;e;){if(e.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&l.test(e.getText())?this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(e,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),o=1;break}if(e.type==CKEDITOR.NODE_ELEMENT)if(e.isEditable())this.moveToPosition(e,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),o=1;else if(t&&e.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);else if("false"==e.getAttribute("contenteditable")&&e.is(CKEDITOR.dtd.$block))return this.setStartBefore(e),this.setEndAfter(e),!0;var d=e,E=o,T=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(T=d[t?"getLast":"getFirst"](i)),E||T||(T=d[t?"getPrevious":"getNext"](i)),e=T}return!!o},moveToClosestEditablePosition:function(e,t){var o,E,T,d=0,h=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return e?(o=new CKEDITOR.dom.range(this.root)).moveToPosition(e,h[t?0:1]):o=this.clone(),e&&!e.is(CKEDITOR.dtd.$block)?d=1:(E=o[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(d=1,(T=E.type==CKEDITOR.NODE_ELEMENT)&&E.is(CKEDITOR.dtd.$block)&&"false"==E.getAttribute("contenteditable")?(o.setStartAt(E,CKEDITOR.POSITION_BEFORE_START),o.setEndAt(E,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&T&&E.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(o.setEnd(E,0),o.collapse()):o.moveToPosition(E,h[t?1:0])),d&&this.moveToRange(o),!!d},moveToElementEditStart:function(e){return this.moveToElementEditablePosition(e)},moveToElementEditEnd:function(e){return this.moveToElementEditablePosition(e,!0)},getEnclosedNode:function(){if((e=this.clone()).optimize(),e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var e=new CKEDITOR.dom.walker(e),t=CKEDITOR.dom.walker.bookmark(!1,!0),o=CKEDITOR.dom.walker.whitespaces(!0);e.evaluator=function(E){return o(E)&&t(E)};var d=e.next();return e.reset(),d&&d.equals(e.previous())?d:null},getTouchedStartNode:function(){var e=this.startContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.startOffset)||e},getTouchedEndNode:function(){var e=this.endContainer;return this.collapsed||e.type!=CKEDITOR.NODE_ELEMENT?e:e.getChild(this.endOffset-1)||e},getNextEditableNode:s(),getPreviousEditableNode:s(1),_getTableElement:function(e){e=e||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.getTouchedStartNode(),d=this.getTouchedEndNode(),o=t.getAscendant("table",!0);d=d.getAscendant("table",!0);return o&&!this.root.contains(o)?null:this.getEnclosedNode()?this.getEnclosedNode().getAscendant(e,!0):o&&d&&(o.equals(d)||o.contains(d)||d.contains(o))?t.getAscendant(e,!0):null},scrollIntoView:function(){var t,o,d,e=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),E=this.clone();E.optimize(),(d=E.startContainer.type==CKEDITOR.NODE_TEXT)?(o=E.startContainer.getText(),t=E.startContainer.split(E.startOffset),e.insertAfter(E.startContainer)):E.insertNode(e),e.scrollIntoView(),d&&(E.startContainer.setText(o),t.remove()),e.remove()},getClientRects:function(){function o(E,T,h){return E=CKEDITOR.tools.extend({},E),T&&(E=CKEDITOR.tools.getAbsoluteRectPosition(h.document.getWindow(),E)),!E.width&&(E.width=E.right-E.left),!E.height&&(E.height=E.bottom-E.top),E}function d(E){var h,T=E.startNode;return E=E.endNode,T.setText("\u200b"),T.removeStyle("display"),E?(E.setText("\u200b"),E.removeStyle("display"),h=[T.getClientRect(),E.getClientRect()],E.remove()):h=[T.getClientRect(),T.getClientRect()],T.remove(),{right:Math.max(h[0].right,h[1].right),bottom:Math.max(h[0].bottom,h[1].bottom),left:Math.min(h[0].left,h[1].left),top:Math.min(h[0].top,h[1].top),width:Math.abs(h[0].left-h[1].left),height:Math.max(h[0].bottom,h[1].bottom)-Math.min(h[0].top,h[1].top)}}return void 0!==document.getSelection?function(E){var h,T=this.root.getDocument().$.createRange();return T.setStart(this.startContainer.$,this.startOffset),T.setEnd(this.endContainer.$,this.endOffset),h=function e(E,T){var K,A,v,h=CKEDITOR.tools.array.map(E,function(N){return N}),R=new CKEDITOR.dom.range(T.root);if(T.startContainer instanceof CKEDITOR.dom.element&&(A=0===T.startOffset&&T.startContainer.hasAttribute("data-widget")),T.endContainer instanceof CKEDITOR.dom.element&&(v=(v=T.endOffset===(T.endContainer.getChildCount?T.endContainer.getChildCount():T.endContainer.length))&&T.endContainer.hasAttribute("data-widget")),A&&R.setStart(T.startContainer.getParent(),T.startContainer.getIndex()),v&&R.setEnd(T.endContainer.getParent(),T.endContainer.getIndex()+1),(A||v)&&(T=R),R=T.cloneContents().find("[data-cke-widget-id]").toArray(),R=CKEDITOR.tools.array.map(R,function(N){var B=T.root.editor;return N=N.getAttribute("data-cke-widget-id"),B.widgets.instances[N].element}))return R=CKEDITOR.tools.array.map(R,function(N){var B;return B=N.getParent().hasClass("cke_widget_wrapper")?N.getParent():N,(K=this.root.getDocument().$.createRange()).setStart(B.getParent().$,B.getIndex()),K.setEnd(B.getParent().$,B.getIndex()+1),(B=K.getClientRects()).widgetRect=N.getClientRect(),B},T),CKEDITOR.tools.array.forEach(R,function(N){var j;!function B(_){CKEDITOR.tools.array.forEach(h,function(F,x){var O=CKEDITOR.tools.objectCompare(N[_],F);O||(O=CKEDITOR.tools.objectCompare(N.widgetRect,F)),O&&(Array.prototype.splice.call(h,x,N.length-_,N.widgetRect),j=!0)}),j||(_<h.length-1?B(_+1):h.push(N.widgetRect))}(0)}),h}(h=T.getClientRects(),this),h.length||(h=function t(E,T,h){var R;return T.collapsed?h.startContainer instanceof CKEDITOR.dom.element?(E=h.checkStartOfBlock(),R=new CKEDITOR.dom.text("\u200b"),E?h.startContainer.append(R,!0):0===h.startOffset?R.insertBefore(h.startContainer.getFirst()):(h=h.startContainer.getChildren().getItem(h.startOffset-1),R.insertAfter(h)),T.setStart(R.$,0),T.setEnd(R.$,0),E=T.getClientRects(),R.remove()):h.startContainer instanceof CKEDITOR.dom.text&&(""===h.startContainer.getText()?(h.startContainer.setText("\u200b"),E=T.getClientRects(),h.startContainer.setText("")):E=[d(h.createBookmark())]):E=[d(h.createBookmark())],E}(h,T,this)),CKEDITOR.tools.array.map(h,function(R){return o(R,E,this)},this)}:function(E){return[o(d(this.createBookmark()),E,this)]}}(),_setStartContainer:function(e){this.startContainer=e},_setEndContainer:function(e){this.endContainer=e},_find:function(e,t){var T,h,R,K,o=this.getCommonAncestor(),d=this.getBoundaryNodes(),E=[];if(o&&o.find)for(h=o.find(e),T=0;T<h.count();T++)o=h.getItem(T),(t||!o.isReadOnly())&&(R=o.getPosition(d.startNode)&CKEDITOR.POSITION_FOLLOWING||d.startNode.equals(o),K=o.getPosition(d.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||d.endNode.equals(o),R&&K&&E.push(o));return E}},CKEDITOR.dom.range.mergeRanges=function(e){return CKEDITOR.tools.array.reduce(e,function(t,o){var d=t[t.length-1],E=!1;if((o=o.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),d){var T=new CKEDITOR.dom.range(o.root),h=(E=new CKEDITOR.dom.walker(T),CKEDITOR.dom.walker.whitespaces());for(T.setStart(d.endContainer,d.endOffset),T.setEnd(o.startContainer,o.startOffset),T=E.next();h(T)||o.endContainer.equals(T);)T=E.next();E=!T}return E?d.setEnd(o.endContainer,o.endOffset):t.push(o),t},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(i){1>arguments.length||(this.range=i,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function u(i,e,t,o){e:{null==o&&(o=function p(i){var e=[];return i.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return e.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),e}(t));for(var d;d=o.shift();)if(d.getDtd().p){o={element:d,remaining:o};break e}o=null}return o?(d=CKEDITOR.filter.instances[o.element.data("cke-filter")])&&!d.check(e)?u(i,e,t,o.remaining):((e=new CKEDITOR.dom.range(o.element)).selectNodeContents(o.element),(e=e.createIterator()).enlargeBr=i.enlargeBr,e.enforceRealBlocks=i.enforceRealBlocks,e.activeFilter=e.filter=d,i._.nestedEditable={element:o.element,container:t,remaining:o.remaining,iterator:e},1):0}function r(i,e,t){return!!e&&((i=i.clone()).collapse(!t),i.checkBoundaryOfElement(e,t?CKEDITOR.START:CKEDITOR.END))}var s=/^[\r\n\t ]+$/,c=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0),l=function(i){return c(i)&&f(i)},n={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(i){var e,t,o,d,E;if(i=i||"p",this._.nestedEditable){if(e=this._.nestedEditable.iterator.getNextParagraph(i))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,e;if(this.activeFilter=this.filter,u(this,i,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(i);this._.nestedEditable=null}if(!this.range.root.getDtd()[i])return null;if(!this._.started){var T=this.range.clone();t=T.startPath();var h=T.endPath(),R=!T.collapsed&&r(T,t.block),K=!T.collapsed&&r(T,h.block,1);T.shrink(CKEDITOR.SHRINK_ELEMENT,!0),R&&T.setStartAt(t.block,CKEDITOR.POSITION_BEFORE_END),K&&T.setEndAt(h.block,CKEDITOR.POSITION_AFTER_START),t=T.endContainer.hasAscendant("pre",!0)||T.startContainer.hasAscendant("pre",!0),T.enlarge(this.forceBrBreak&&!t||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),T.collapsed||(t=new CKEDITOR.dom.walker(T.clone()),h=CKEDITOR.dom.walker.bookmark(!0,!0),t.evaluator=h,this._.nextNode=t.next(),(t=new CKEDITOR.dom.walker(T.clone())).evaluator=h,t=t.previous(),this._.lastNode=t.getNextSourceNode(!0,null,T.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((h=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&T.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=T.document.createText(""),this._.lastNode.insertAfter(t)),T=null),this._.started=1,t=T}for(h=this._.nextNode,T=this._.lastNode,this._.nextNode=null;h;){R=0,K=h.hasAscendant("pre");var A=h.type!=CKEDITOR.NODE_ELEMENT,v=0;if(A)h.type==CKEDITOR.NODE_TEXT&&s.test(h.getText())&&(A=0);else{var N=h.getName();if(CKEDITOR.dtd.$block[N]&&"false"==h.getAttribute("contenteditable")){u(this,i,e=h);break}if(h.isBlockBoundary(this.forceBrBreak&&!K&&{br:1})){if("br"==N)A=1;else if(!t&&!h.getChildCount()&&"hr"!=N){e=h,o=h.equals(T);break}t&&(t.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=N&&(this._.nextNode=h)),R=1}else{if(h.getFirst()){t||(t=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),h=h.getFirst();continue}A=1}}if(A&&!t&&(t=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),o=(!R||A)&&h.equals(T),t&&!R)for(;!h.getNext(l)&&!o;){if((N=h.getParent()).isBlockBoundary(this.forceBrBreak&&!K&&{br:1})){R=1,A=0,o||N.equals(T),t.setEndAt(N,CKEDITOR.POSITION_BEFORE_END);break}A=1,o=(h=N).equals(T),v=1}if(A&&t.setEndAt(h,CKEDITOR.POSITION_AFTER_END),(o=!(h=this._getNextSourceNode(h,v,T)))||R&&t)break}if(!e){if(!t)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;h=(e=new CKEDITOR.dom.elementPath(t.startContainer,t.root)).blockLimit,R={div:1,th:1,td:1},!(e=e.block)&&h&&!this.enforceRealBlocks&&R[h.getName()]&&t.checkStartOfBlock()&&t.checkEndOfBlock()&&!h.equals(t.root)?e=h:!e||this.enforceRealBlocks&&e.is(n)?(e=this.range.document.createElement(i),t.extractContents().appendTo(e),e.trim(),t.insertNode(e),d=E=!0):"li"!=e.getName()?t.checkStartOfBlock()&&t.checkEndOfBlock()||(e=e.clone(!1),t.extractContents().appendTo(e),e.trim(),d=!(E=t.splitBlock()).wasStartOfBlock,E=!E.wasEndOfBlock,t.insertNode(e)):o||(this._.nextNode=e.equals(T)?null:this._getNextSourceNode(t.getBoundaryNodes().endNode,1,T))}return d&&(d=e.getPrevious())&&d.type==CKEDITOR.NODE_ELEMENT&&("br"==d.getName()?d.remove():d.getLast()&&"br"==d.getLast().$.nodeName.toLowerCase()&&d.getLast().remove()),E&&(d=e.getLast())&&d.type==CKEDITOR.NODE_ELEMENT&&"br"==d.getName()&&(!CKEDITOR.env.needsBrFiller||d.getPrevious(c)||d.getNext(c))&&d.remove(),this._.nextNode||(this._.nextNode=o||e.equals(T)||!T?null:this._getNextSourceNode(e,1,T)),e},_getNextSourceNode:function(i,e,t){function o(E){return!(E.equals(t)||E.equals(d))}var d=this.range.root;for(i=i.getNextSourceNode(e,null,o);!c(i);)i=i.getNextSourceNode(e,null,o);return i}},CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,p){var u;this.uiItems=[],this.exec=function(r){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&a.focus(),!1===this.fire("exec")||!1!==p.exec.call(this,a,r))},this.refresh=function(r,s){return!(this.readOnly||!r.readOnly)||(this.context&&!s.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[r.mode]&&this.disable(),!1===this.fire("refresh",{editor:r,path:s})||p.refresh&&!1!==p.refresh.apply(this,arguments)))},this.checkAllowed=function(r){return r||"boolean"!=typeof u?u=a.activeFilter.checkFeature(this):u},CKEDITOR.tools.extend(this,p,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!p.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&typeof this.previousState<"u"?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return!(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())&&(this.previousState=this.state,this.state=a,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",licenseKey:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,useComputedState:!0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(g,k,b,L,H){var G,z,M;for(G in g=[],k){z="boolean"==typeof(z=k[G])?{}:"function"==typeof z?{match:z}:O(z),"$"!=G.charAt(0)&&(z.elements=G),b&&(z.featureName=b.toLowerCase());var X=z;X.elements=f(X.elements,/\s+/)||null,X.propertiesOnly=X.propertiesOnly||!0===X.elements;var Z=/\s*,\s*/,Y=void 0;for(Y in U){X[Y]=f(X[Y],Z)||null;var Q=X,te=$[Y],oe=f(X[$[Y]],Z),se=X[Y],ee=[],D=!0,P=void 0;for(P in oe?D=!1:oe={},se)"!"==P.charAt(0)&&(P=P.slice(1),ee.push(P),oe[P]=!0,D=!1);for(;P=ee.pop();)se[P]=se["!"+P],delete se["!"+P];Q[te]=!D&&oe||null}X.match=X.match||null,L.push(z),g.push(z)}for(k=H.elements,H=H.generic,b=0,L=g.length;b<L;++b){for(Z in z=!0===(G=O(g[b])).classes||!0===G.styles||!0===G.attributes,X=G,Y=te=Z=void 0,U)X[Z]=R(X[Z]);for(Y in Q=!0,$){for(se in oe=[],se=void 0,te=X[Z=$[Y]])-1<se.indexOf("*")?oe.push(new RegExp("^"+se.replace(/\*/g,".*")+"$")):oe.push(se);(te=oe).length&&(X[Z]=te,Q=!1)}if(X.nothingRequired=Q,X.noProperties=!(X.attributes||X.classes||X.styles),!0===G.elements||null===G.elements)H[z?"unshift":"push"](G);else for(M in X=G.elements,delete G.elements,X)k[M]?k[M][z?"unshift":"push"](G):k[M]=[G]}}function p(g,k,b,L){if((!g.match||g.match(k))&&(L||function l(g,k){if(g.nothingRequired)return!0;var b,L,H,G;if(H=g.requiredClasses)for(G=k.classes,b=0;b<H.length;++b)if("string"==typeof(L=H[b])){if(-1==CKEDITOR.tools.indexOf(G,L))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(G,L))return!1;return n(k.styles,g.requiredStyles)&&n(k.attributes,g.requiredAttributes)}(g,k))&&(g.propertiesOnly||(b.valid=!0),b.allAttributes||(b.allAttributes=u(g.attributes,k.attributes,b.validAttributes)),b.allStyles||(b.allStyles=u(g.styles,k.styles,b.validStyles)),!b.allClasses)){if(g=g.classes,k=k.classes,L=b.validClasses,g)if(!0===g)g=!0;else{for(var z,H=0,G=k.length;H<G;++H)L[z=k[H]]||(L[z]=g(z));g=!1}else g=!1;b.allClasses=g}}function u(g,k,b){if(!g)return!1;if(!0===g)return!0;for(var L in k)b[L]||(b[L]=g(L));return!1}function r(g,k,b){if(!g.match||g.match(k)){if(g.noProperties)return!1;if(b.hadInvalidAttribute=s(g.attributes,k.attributes)||b.hadInvalidAttribute,b.hadInvalidStyle=s(g.styles,k.styles)||b.hadInvalidStyle,g=g.classes,k=k.classes,g){for(var L=!1,H=!0===g,G=k.length;G--;)(H||g(k[G]))&&(k.splice(G,1),L=!0);g=L}else g=!1;b.hadInvalidClass=g||b.hadInvalidClass}}function s(g,k){if(!g)return!1;var H,b=!1,L=!0===g;for(H in k)(L||g(H))&&(delete k[H],b=!0);return b}function c(g,k,b){return!(g.disabled||g.customConfig&&!b||!k)&&(g._.cachedChecks={},!0)}function f(g,k){if(!g)return!1;if(!0===g)return g;if("string"==typeof g)return"*"==(g=I(g))||CKEDITOR.tools.convertArrayToObject(g.split(k));if(CKEDITOR.tools.isArray(g))return!!g.length&&CKEDITOR.tools.convertArrayToObject(g);var H,b={},L=0;for(H in g)b[H]=g[H],L++;return!!L&&b}function n(g,k){if(!k)return!0;for(var L,b=0;b<k.length;++b)if("string"==typeof(L=k[b])){if(!(L in g))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(g,L))return!1;return!0}function i(g){if(!g)return{};g=g.split(/\s*,\s*/).sort();for(var k={};g.length;)k[g.shift()]="cke-test";return k}function e(g){var k,b,L,H,G={},z=1;for(g=I(g);k=g.match(S);)(b=k[2])?(L=t(b,"styles"),H=t(b,"attrs"),b=t(b,"classes")):L=H=b=null,G["$"+z++]={elements:k[1],classes:b,styles:L,attributes:H},g=g.slice(k[0].length);return G}function t(g,k){var b=g.match(q[k]);return b?I(b[1]):null}function o(g){var k=g.styleBackup=g.attributes.style,b=g.classBackup=g.attributes.class;g.styles||(g.styles=CKEDITOR.tools.parseCssText(k||"",1)),g.classes||(g.classes=b?b.split(/\s+/):[])}function d(g,k,b,L){var G,H=0;if(L.toHtml&&(k.name=k.name.replace(C,"$1")),L.doCallbacks&&g.elementCallbacks){e:{for(var Z,z=0,X=(G=g.elementCallbacks).length;z<X;++z)if(Z=G[z](k)){G=Z;break e}G=void 0}if(G)return G}if(L.doTransform&&(G=g._.transformations[k.name])){for(o(k),z=0;z<G.length;++z)N(g,k,G[z]);T(k)}if(L.doFilter){e:{z=k.name,g=(X=g._).allowedRules.elements[z],G=X.allowedRules.generic,z=X.disallowedRules.elements[z],X=X.disallowedRules.generic,Z=L.skipRequired;var Y,Q,M={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(g||G){if(o(k),z)for(Y=0,Q=z.length;Y<Q;++Y)if(!1===r(z[Y],k,M)){g=null;break e}if(X)for(Y=0,Q=X.length;Y<Q;++Y)r(X[Y],k,M);if(g)for(Y=0,Q=g.length;Y<Q;++Y)p(g[Y],k,M,Z);if(G)for(Y=0,Q=G.length;Y<Q;++Y)p(G[Y],k,M,Z);g=M}else g=null}if(!g||!g.valid)return b.push(k),1;Q=g.validAttributes;var te=g.validStyles;G=g.validClasses;z=k.attributes;var oe=k.styles;X=k.classes;Z=k.classBackup;var ee,D,se=k.styleBackup,P=[],W=(M=[],/^data-cke-/);if(Y=!1,delete z.style,delete z.class,delete k.classBackup,delete k.styleBackup,!g.allAttributes)for(ee in z)Q[ee]||W.test(ee)&&(ee==(D=ee.replace(/^data-cke-saved-/,""))||Q[D])||(delete z[ee],Y=!0);if(!g.allStyles||g.hadInvalidStyle){for(ee in oe)g.allStyles||te[ee]?P.push(ee+":"+oe[ee]):Y=!0;P.length&&(z.style=P.sort().join("; "))}else se&&(z.style=se);if(!g.allClasses||g.hadInvalidClass){for(ee=0;ee<X.length;++ee)(g.allClasses||G[X[ee]])&&M.push(X[ee]);M.length&&(z.class=M.sort().join(" ")),Z&&M.length<Z.split(/\s+/).length&&(Y=!0)}else Z&&(z.class=Z);if(Y&&(H=1),!L.skipFinalValidation&&!h(k))return b.push(k),1}return L.toHtml&&(k.name=k.name.replace(m,"cke:$1")),H}function T(g){var b,k=g.attributes;delete k.style,delete k.class,(b=CKEDITOR.tools.writeCssText(g.styles,!0))&&(k.style=b),g.classes.length&&(k.class=g.classes.sort().join(" "))}function h(g){switch(g.name){case"a":if(!(g.children.length||g.attributes.name||g.attributes.id))return!1;break;case"img":if(!g.attributes.src)return!1}return!0}function R(g){if(!g)return!1;if(!0===g)return!0;var k=function E(g){var b,k=[];for(b in g)-1<b.indexOf("*")&&k.push(b.replace(/\*/g,".*"));return k.length?new RegExp("^(?:"+k.join("|")+")$"):null}(g);return function(b){return b in g||k&&b.match(k)}}function K(){return new CKEDITOR.htmlParser.element("br")}function A(g){return g.type==CKEDITOR.NODE_ELEMENT&&("br"==g.name||x.$block[g.name])}function v(g,k,b){var L=g.name;if(x.$empty[L]||!g.children.length)"hr"==L&&"br"==k?g.replaceWith(K()):(g.parent&&b.push({check:"it",el:g.parent}),g.remove());else if(x.$block[L]||"tr"==L)if("br"==k)g.previous&&!A(g.previous)&&(k=K()).insertBefore(g),g.next&&!A(g.next)&&(k=K()).insertAfter(g),g.replaceWithChildren();else{var H;L=g.children;e:{H=x[k];for(var X,G=0,z=L.length;G<z;++G)if((X=L[G]).type==CKEDITOR.NODE_ELEMENT&&!H[X.name]){H=!1;break e}H=!0}if(H)g.name=k,g.attributes={},b.push({check:"parent-down",el:g});else{var Z,Y;for(G=(H=g.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==H.name,z=L.length;0<z;)X=L[--z],G&&(X.type==CKEDITOR.NODE_TEXT||X.type==CKEDITOR.NODE_ELEMENT&&x.$inline[X.name])?(Z||((Z=new CKEDITOR.htmlParser.element(k)).insertAfter(g),b.push({check:"parent-down",el:Z})),Z.add(X,0)):(Z=null,Y=x[H.name]||x.span,X.insertAfter(g),H.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||X.type!=CKEDITOR.NODE_ELEMENT||Y[X.name]||b.push({check:"el-up",el:X}));g.remove()}}else L in{style:1,script:1}?g.remove():(g.parent&&b.push({check:"it",el:g.parent}),g.replaceWithChildren())}function N(g,k,b){var L,H;for(L=0;L<b.length;++L)if(!((H=b[L]).check&&!g.check(H.check,!1)||H.left&&!H.left(k))){H.right(k,y);break}}function B(g,k){var G,z,X,Z,b=k.getDefinition(),L=b.attributes,H=b.styles;if(g.name!=b.element)return!1;for(G in L)if("class"==G){for(b=L[G].split(/\s+/),X=g.classes.join("|");Z=b.pop();)if(-1==X.indexOf(Z))return!1}else if(g.attributes[G]!=L[G])return!1;for(z in H)if(g.styles[z]!=H[z])return!1;return!0}function j(g,k){var b,L;return"string"==typeof g?b=g:g instanceof CKEDITOR.style?L=g:(b=g[0],L=g[1]),[{element:b,left:L,right:function(H,G){G.transform(H,k)}}]}function _(g){return function(k){return B(k,g)}}function F(g){return function(k,b){b[g](k)}}var g,k,x=CKEDITOR.dtd,O=CKEDITOR.tools.copy,I=CKEDITOR.tools.trim,w=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(g,k){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var b=this.editor=g instanceof CKEDITOR.editor?g:null;if(b&&!k){this.customConfig=!0;var L=b.config.allowedContent;!0===L?this.disabled=!0:(L||(this.customConfig=!1),this.allow(L,"config",1),this.allow(b.config.extraAllowedContent,"extra",1),this.allow(w[b.enterMode]+" "+w[b.shiftEnterMode],"default",1),this.disallow(b.config.disallowedContent))}else this.customConfig=!1,this.allow(k||g,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(g,k,b){if(!c(this,g,b))return!1;var L,H;if("string"==typeof g)g=e(g);else if(g instanceof CKEDITOR.style){if(g.toAllowedContentRules)return this.allow(g.toAllowedContentRules(this.editor),k,b);L=g.getDefinition(),g={},b=L.attributes,g[L.element]=L={styles:L.styles,requiredStyles:L.styles&&CKEDITOR.tools.object.keys(L.styles)},b&&(b=O(b),L.classes=b.class?b.class.split(/\s+/):null,L.requiredClasses=L.classes,delete b.class,L.attributes=b,L.requiredAttributes=b&&CKEDITOR.tools.object.keys(b))}else if(CKEDITOR.tools.isArray(g)){for(L=0;L<g.length;++L)H=this.allow(g[L],k,b);return H}return a(this,g,k,this.allowedContent,this._.allowedRules),!0},applyTo:function(g,k,b,L){if(this.disabled)return!1;var X,Q,te,H=this,G=[],z=this.editor&&this.editor.config.protectedSource,Z=!1,Y={doFilter:!b,doTransform:!0,doCallbacks:!0,toHtml:k};for(g.forEach(function(oe){if(oe.type==CKEDITOR.NODE_ELEMENT){if("off"==oe.attributes["data-cke-filter"])return!1;if(!k||"span"!=oe.name||!~CKEDITOR.tools.object.keys(oe.attributes).join("|").indexOf("data-cke-"))if(1&(X=d(H,oe,G,Y)))Z=!0;else if(2&X)return!1}else if(oe.type==CKEDITOR.NODE_COMMENT&&oe.value.match(/^\{cke_protected\}(?!\{C\})/)){var se;e:{var D,P,M,ee=decodeURIComponent(oe.value.replace(/^\{cke_protected\}/,""));if(se=[],z)for(P=0;P<z.length;++P)if((M=ee.match(z[P]))&&M[0].length==ee.length){se=!0;break e}1==(ee=CKEDITOR.htmlParser.fragment.fromHtml(ee)).children.length&&(D=ee.children[0]).type==CKEDITOR.NODE_ELEMENT&&d(H,D,se,Y),se=!se.length}se||G.push(oe)}},null,!0),G.length&&(Z=!0),g=[],L=w[L||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];b=G.pop();)b.type==CKEDITOR.NODE_ELEMENT?v(b,L,g):b.remove();for(;Q=g.pop();)if((b=Q.el).parent)switch(te=x[b.parent.name]||x.span,Q.check){case"it":x.$removeEmpty[b.name]&&!b.children.length?v(b,L,g):h(b)||v(b,L,g);break;case"el-up":b.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||te[b.name]||v(b,L,g);break;case"parent-down":b.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||te[b.name]||v(b.parent,L,g)}return Z},checkFeature:function(g){return!(!this.disabled&&g)||(g.toFeature&&(g=g.toFeature(this.editor)),!g.requiredContent||this.check(g.requiredContent))},disable:function(){this.disabled=!0},disallow:function(g){return!!c(this,g,!0)&&("string"==typeof g&&(g=e(g)),a(this,g,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(g){if(!this.disabled&&g){var k,b,H,L=[];for(k=0;k<g.length&&!H;++k)("string"==typeof(b=g[k])||b instanceof CKEDITOR.style)&&this.check(b)&&(H=b);if(H){for(k=0;k<g.length;++k)L.push(j(g[k],H));this.addTransformations(L)}}},addElementCallback:function(g){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(g)},addFeature:function(g){return!(!this.disabled&&g)||(g.toFeature&&(g=g.toFeature(this.editor)),this.allow(g.allowedContent,g.name),this.addTransformations(g.contentTransformations),this.addContentForms(g.contentForms),!g.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(g.requiredContent))},addTransformations:function(g){var k,b;if(!this.disabled&&g){var H,L=this._.transformations;for(H=0;H<g.length;++H){k=g[H];var G=void 0,z=void 0,X=void 0,Z=void 0,Y=void 0,Q=void 0;for(b=[],z=0;z<k.length;++z)"string"==typeof(X=k[z])?(Z=(X=X.split(/\s*:\s*/))[0],Y=null,Q=X[1]):(Z=X.check,Y=X.left,Q=X.right),G||(G=(G=X).element?G.element:Z?Z.match(/^([a-z0-9]+)/i)[0]:G.left.getDefinition().element),Y instanceof CKEDITOR.style&&(Y=_(Y)),b.push({check:Z==G?null:Z,left:Y,right:"string"==typeof Q?F(Q):Q});L[k=G]||(L[k]=[]),L[k].push(b)}}},check:function(g,k,b){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(g)){for(var L=g.length;L--;)if(this.check(g[L],k,b))return!0;return!1}var H,G;if("string"==typeof g){if((G=g+"<"+(!1===k?"0":"1")+(b?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[G];var z=(H=e(g).$1).styles;L=H.classes;H.name=H.elements,H.classes=L=L?L.split(/\s*,\s*/):[],H.styles=i(z),H.attributes=i(H.attributes),H.children=[],L.length&&(H.attributes.class=L.join(" ")),z&&(H.attributes.style=CKEDITOR.tools.writeCssText(H.styles))}else z=(H=g.getDefinition()).styles,L=H.attributes||{},z&&!CKEDITOR.tools.isEmpty(z)?(z=O(z),L.style=CKEDITOR.tools.writeCssText(z,!0)):z={},H={name:H.element,attributes:L,classes:L.class?L.class.split(/\s+/):[],styles:z,children:[]};z=CKEDITOR.tools.clone(H);var Z,X=[];if(!1!==k&&(Z=this._.transformations[H.name])){for(L=0;L<Z.length;++L)N(this,H,Z[L]);T(H)}return d(this,z,X,{doFilter:!0,doTransform:!1!==k,skipRequired:!b,skipFinalValidation:!b}),0<X.length?b=!1:((k=H.attributes.class)&&(H.attributes.class=H.attributes.class.split(" ").sort().join(" ")),b=CKEDITOR.tools.objectCompare(H.attributes,z.attributes,!0),k&&(H.attributes.class=k)),"string"==typeof g&&(this._.cachedChecks[G]=b),b},getAllowedEnterMode:(g=["p","div","br"],k={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR},function(b,L){var G,H=g.slice();if(this.check(w[b]))return b;for(L||(H=H.reverse());G=H.pop();)if(this.check(G))return k[G];return CKEDITOR.ENTER_BR}),clone:function(){var g=new CKEDITOR.filter,k=CKEDITOR.tools.clone;return g.allowedContent=k(this.allowedContent),g._.allowedRules=k(this._.allowedRules),g.disallowedContent=k(this.disallowedContent),g._.disallowedRules=k(this._.disallowedRules),g._.transformations=k(this._.transformations),g.disabled=this.disabled,g.editor=this.editor,g},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var y,U={styles:1,attributes:1,classes:1},$={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},S=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,q={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},C=/^cke:(object|embed|param)$/,m=/^(object|embed|param)$/;y=CKEDITOR.filter.transformationsTools={sizeToStyle:function(g){this.lengthToStyle(g,"width"),this.lengthToStyle(g,"height")},sizeToAttribute:function(g){this.lengthToAttribute(g,"width"),this.lengthToAttribute(g,"height")},lengthToStyle:function(g,k,b){if(!((b=b||k)in g.styles)){var L=g.attributes[k];L&&(/^\d+$/.test(L)&&(L+="px"),g.styles[b]=L)}delete g.attributes[k]},lengthToAttribute:function(g,k,b){if(!((b=b||k)in g.attributes)){var L=g.styles[k],H=L&&L.match(/^(\d+)(?:\.\d*)?px$/);H?g.attributes[b]=H[1]:"cke-test"==L&&(g.attributes[b]="cke-test")}delete g.styles[k]},alignmentToStyle:function(g){if(!("float"in g.styles)){var k=g.attributes.align;("left"==k||"right"==k)&&(g.styles.float=k)}delete g.attributes.align},alignmentToAttribute:function(g){if(!("align"in g.attributes)){var k=g.styles.float;("left"==k||"right"==k)&&(g.attributes.align=k)}delete g.styles.float},splitBorderShorthand:function(g){if(g.styles.border){var k=CKEDITOR.tools.style.parse.border(g.styles.border);k.color&&(g.styles["border-color"]=k.color),k.style&&(g.styles["border-style"]=k.style),k.width&&(g.styles["border-width"]=k.width),delete g.styles.border}},listTypeToStyle:function(g){if(g.attributes.type)switch(g.attributes.type){case"a":g.styles["list-style-type"]="lower-alpha";break;case"A":g.styles["list-style-type"]="upper-alpha";break;case"i":g.styles["list-style-type"]="lower-roman";break;case"I":g.styles["list-style-type"]="upper-roman";break;case"1":g.styles["list-style-type"]="decimal";break;default:g.styles["list-style-type"]=g.attributes.type}},splitMarginShorthand:function(g){function k(L){g.styles["margin-top"]=b[L[0]],g.styles["margin-right"]=b[L[1]],g.styles["margin-bottom"]=b[L[2]],g.styles["margin-left"]=b[L[3]]}if(g.styles.margin){var b=g.styles.margin.match(/(auto|0|(?:\-?[\.\d]+(?:\w+|%)))/g)||["0px"];switch(b.length){case 1:k([0,0,0,0]);break;case 2:k([0,1,0,1]);break;case 3:k([0,1,2,1]);break;case 4:k([0,1,2,3])}delete g.styles.margin}},matchesStyle:B,transform:function(g,k){if("string"==typeof k)g.name=k;else{var G,z,X,Z,b=k.getDefinition(),L=b.styles,H=b.attributes;for(G in g.name=b.element,H)if("class"==G)for(b=g.classes.join("|"),X=H[G].split(/\s+/);Z=X.pop();)-1==b.indexOf(Z)&&g.classes.push(Z);else g.attributes[G]=H[G];for(z in L)g.styles[z]=L[z]}}}}(),CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function p(){if(this.hasFocus){this.hasFocus=!1;var r=this._.editor.container;r&&r.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var u=CKEDITOR.focusManager._.blurDelay;a||!u?p.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,p.call(this)},u,this)}},add:function(a,p){if(!(u=a.getCustomData("focusmanager"))||u!=this){u&&u.remove(a);var u="focus",r="blur";p&&(CKEDITOR.env.ie?(u="focusin",r="focusout"):CKEDITOR.event.useCapture=1);var s={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(u,s.focus,this),a.on(r,s.blur,this),p&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",s)}},remove:function(a){a.removeCustomData("focusmanager");var p=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",p.blur),a.removeListener("focus",p.focus)}},CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,p=function(r){var s=(r=r.data).getKeystroke(),c=this.keystrokes[s],f=this._.editor;return(a=!1===f.fire("key",{keyCode:s,domEvent:r}))||(c&&(a=!1!==f.execCommand(c,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[s])),a&&r.preventDefault(!0),!a},u=function(r){a&&(a=!1,r.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(r){r.on("keydown",p,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&r.on("keypress",u,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,p,u){a&&CKEDITOR.lang.languages[a]||(a=this.detect(p,a));var r=this;p=function(){r[a].dir=r.rtl[a]?"rtl":"ltr",u(a,r[a])},this[a]?p():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),p,this)},detect:function(a,p){var u=this.languages,r=(s=(p=p||navigator.userLanguage||navigator.language||a).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1],s=s[2];return u[r+"-"+s]?r=r+"-"+s:u[r]||(r=null),CKEDITOR.lang.detect=r?function(){return r}:function(c){return c},r||a}},CKEDITOR.scriptLoader=function(){var a={},p={};return{load:function(u,r,s,c){var f="string"==typeof u;f&&(u=[u]),s||(s=CKEDITOR);var l=u.length,n=l,i=[],e=[],t=function(h){r&&(f?r.call(s,h):r.call(s,i,e))};if(0===n)t(!0);else{var o=function(h,R){(R?i:e).push(h),0>=--n&&(c&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),t(R))},d=function(h,R){a[h]=1;var K=p[h];delete p[h];for(var A=0;A<K.length;A++)K[A](h,R)},E=function(h){if(a[h])o(h,!0);else{var R=p[h]||(p[h]=[]);if(R.push(o),!(1<R.length)){var K=new CKEDITOR.dom.element("script");K.setAttributes({type:"text/javascript",src:h}),r&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?K.$.onreadystatechange=function(){("loaded"==K.$.readyState||"complete"==K.$.readyState)&&(K.$.onreadystatechange=null,d(h,!0))}:(K.$.onload=function(){setTimeout(function(){K.$.onload=null,K.$.onerror=null,d(h,!0)},0)},K.$.onerror=function(){K.$.onload=null,K.$.onerror=null,d(h,!1)})),K.appendTo(CKEDITOR.document.getHead())}}};c&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var T=0;T<l;T++)E(u[T])}},queue:function(){function u(){var s;(s=r[0])&&this.load(s.scriptUrl,s.callback,CKEDITOR,0)}var r=[];return function(s,c){var f=this;r.push({scriptUrl:s,callback:function(){c&&c.apply(this,arguments),r.shift(),u.call(f)}}),1==r.length&&u.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,p){this.basePath=a,this.fileName=p,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,p){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var u=this.registered[a]=p||{};return u.name=a,u.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",u),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var p=this.externals[a];return CKEDITOR.getUrl(p&&p.dir||this.basePath+a+"/")},getFilePath:function(a){var p=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(p?p.file:this.fileName+".js"))},addExternal:function(a,p,u){u||(p=p.replace(/[^\/]+$/,function(s){return u=s,""})),u=u||this.fileName+".js",a=a.split(",");for(var r=0;r<a.length;r++)this.externals[a[r]]={dir:p,file:u}},load:function(a,p,u){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var r=this.loaded,s=this.registered,c=[],f={},l={},n=0;n<a.length;n++){var i=a[n];if(i)if(r[i]||s[i])l[i]=this.get(i);else{var e=this.getFilePath(i);c.push(e),e in f||(f[e]=[]),f[e].push(i)}}CKEDITOR.scriptLoader.load(c,function(t,o){if(o.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+f[o[0]].join(",")+'" was not found at "'+o[0]+'".');for(var d=0;d<t.length;d++)for(var E=f[t[d]],T=0;T<E.length;T++){var h=E[T];l[h]=this.get(h),r[h]=1}p.call(u,l)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var p={};return function(u,r,s){var c={},f=function(l){a.call(this,l,function(n){CKEDITOR.tools.extend(c,n);var e,i=[];for(e in n){var t=n[e],o=t&&t.requires;if(!p[e]){if(t.icons)for(var d=t.icons.split(","),E=d.length;E--;)CKEDITOR.skin.addIcon(d[E],t.path+"icons/"+(CKEDITOR.env.hidpi&&t.hidpi?"hidpi/":"")+d[E]+".png");t.isSupportedEnvironment=t.isSupportedEnvironment||function(){return!0},p[e]=1}if(o)for(o.split&&(o=o.split(",")),t=0;t<o.length;t++)c[o[t]]||i.push(o[t])}if(i.length)f.call(this,i);else{for(e in c)(t=c[e]).onLoad&&!t.onLoad._called&&(!1===t.onLoad()&&delete c[e],t.onLoad._called=1);r&&r.call(s||window,c)}},this)};f.call(this,u)}}),CKEDITOR.plugins.setLang=function(a,p,u){var r=this.get(a);a=r.langEntries||(r.langEntries={}),(r=r.lang||(r.lang=[])).split&&(r=r.split(",")),-1==CKEDITOR.tools.indexOf(r,p)&&r.push(p),a[p]=u},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,p,u){u.name=a.toLowerCase();var r=this.items[a]={type:p,command:u.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(r,u)},get:function(a){return this.instances[a]},create:function(a){var p=this.items[a],r=p&&this._.handlers[p.type],u=p&&p.command&&this.editor.getCommand(p.command);r=r&&r.create.apply(this,p.args);return this.instances[a]=r,u&&u.uiItems.push(r),r&&!r.type&&(r.type=p.type),r},addHandler:function(a,p){this._.handlers[a]=p},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(h,R,K){if(CKEDITOR.event.call(this),h=h&&CKEDITOR.tools.clone(h),void 0!==R){if(!(R instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!K)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&K==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function u(h,R){return R==CKEDITOR.ELEMENT_MODE_INLINE?h.is(CKEDITOR.dtd.$editable)||h.is("textarea"):R==CKEDITOR.ELEMENT_MODE_REPLACE?!h.is(CKEDITOR.dtd.$nonBodyContent):1}(R,K))throw Error('The specified element mode is not supported on element: "'+R.getName()+'".');this.element=R,this.elementMode=K,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(R.getId()||R.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function p(){do{var h="editor"+ ++E}while(CKEDITOR.instances[h]);return h}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",r),this.on("selectionChange",function(A){c(this,A.data.path)}),this.on("activeFilterChange",function(){c(this,this.elementPath(),!0)}),this.on("mode",r),CKEDITOR.dom.selection.setupEditorOptimization(this),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var A=this.createRange();A.selectNodeContents(this.editable()),A.shrink(CKEDITOR.SHRINK_ELEMENT,!0),A.collapse(),this.getSelection().selectRanges([A])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){this.isDestroyed()||this.isDetached()||function l(h,R){h.on("customConfigLoaded",function(){if(R){if(R.on)for(var K in R.on)h.on(K,R.on[K]);CKEDITOR.tools.extend(h.config,R,!0),delete h.config.on}K=h.config,h.readOnly=!!K.readOnly||(h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.is("textarea")?h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"):h.element.isReadOnly():h.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"))),h.blockless=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(h.element.is("textarea")||CKEDITOR.dtd[h.element.getName()].p),h.tabIndex=K.tabIndex||h.element&&h.element.getAttribute("tabindex")||0,h.activeEnterMode=h.enterMode=h.blockless?CKEDITOR.ENTER_BR:K.enterMode,h.activeShiftEnterMode=h.shiftEnterMode=h.blockless?CKEDITOR.ENTER_BR:K.shiftEnterMode,K.skin&&(CKEDITOR.skinName=K.skin),h.fireOnce("configLoaded"),h.dataProcessor=new CKEDITOR.htmlDataProcessor(h),h.filter=h.activeFilter=new CKEDITOR.filter(h),function n(h){CKEDITOR.skin.loadPart("editor",function(){!function i(h){CKEDITOR.lang.load(h.config.language,h.config.defaultLanguage,function(R,K){var A=h.config.title,v=h.config.applicationTitle;h.langCode=R,h.lang=CKEDITOR.tools.prototypedCopy(K),h.title="string"==typeof A||!1===A?A:[h.lang.editor,h.name].join(", "),h.applicationTitle="string"==typeof v||!1===v?v:[h.lang.application,h.name].join(", "),h.config.contentsLangDirection||(h.config.contentsLangDirection=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.getDirection(1):h.lang.dir),h.fire("langLoaded"),function e(h){h.getStylesSet(function(R){h.once("loaded",function(){h.fire("stylesSet",{styles:R})},null,null,1),function t(h){function R(_){return _?(CKEDITOR.tools.isArray(_)&&(_=_.join(",")),_.replace(/\s/g,"")):""}var K=h.config,j=R(K.plugins),A=R(K.extraPlugins),v=R(K.removePlugins);if(A){var N=new RegExp("(?:^|,)(?:"+A.replace(/,/g,"|")+")(?=,|$)","g");j=(j=j.replace(N,""))+","+A}if(v){var B=new RegExp("(?:^|,)(?:"+v.replace(/,/g,"|")+")(?=,|$)","g");j=j.replace(B,"")}CKEDITOR.env.air&&(j+=",adobeair"),CKEDITOR.plugins.load(j.split(","),function(_){var F=[],x=[],O=[];for(var I in h.plugins=CKEDITOR.tools.extend({},h.plugins,_),_){var q,w=_[I],U=w.lang,$=null,S=w.requires;if(CKEDITOR.tools.isArray(S)&&(S=S.join(",")),S&&(q=S.match(B)))for(;S=q.pop();)CKEDITOR.error("editor-plugin-required",{plugin:S.replace(",",""),requiredBy:I});U&&!h.lang[I]&&(U.split&&(U=U.split(",")),0<=CKEDITOR.tools.indexOf(U,h.langCode)?$=h.langCode:$=($=h.langCode.replace(/-.*/,""))!=h.langCode&&0<=CKEDITOR.tools.indexOf(U,$)?$:0<=CKEDITOR.tools.indexOf(U,"en")?"en":U[0],w.langEntries&&w.langEntries[$]?(h.lang[I]=w.langEntries[$],$=null):O.push(CKEDITOR.getUrl(w.path+"lang/"+$+".js"))),x.push($),F.push(w)}CKEDITOR.scriptLoader.load(O,function(){if(!h.isDestroyed()&&!h.isDetached()){for(var C=["beforeInit","init","afterInit"],m=0;m<C.length;m++)for(var y=0;y<F.length;y++){var g=F[y];0===m&&x[y]&&g.lang&&g.langEntries&&(h.lang[g.name]=g.langEntries[x[y]]),g[C[m]]&&g[C[m]](h)}for(h.fireOnce("pluginsLoaded"),K.keystrokes&&h.setKeystroke(h.config.keystrokes),y=0;y<h.config.blockedKeystrokes.length;y++)h.keystrokeHandler.blockedKeystrokes[h.config.blockedKeystrokes[y]]=1;h.status="loaded",h.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,h)}})})}(h)})}(h)})}(h)})}(h)}),R&&null!=R.customConfig&&(h.config.customConfig=R.customConfig),f(h)||h.fireOnce("customConfigLoaded")}(this,h)},0,this)}function r(){var R,h=this.commands;for(R in h)s(this,h[R])}function s(h,R){R[R.startDisabled||h.readOnly&&!R.readOnly?"disable":R.modes[h.mode]?"enable":"disable"]()}function c(h,R,K){if(R){var A,v,N=h.commands;for(v in N)A=N[v],(K||A.contextSensitive)&&A.refresh(h,R)}}function f(h){if(!(R=h.config.customConfig))return!1;var R=CKEDITOR.getUrl(R),K=T[R]||(T[R]={});return K.fn?(K.fn.call(h,h.config),CKEDITOR.getUrl(h.config.customConfig)!=R&&f(h)||h.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(R,function(){K.fn=K.fn||CKEDITOR.editorConfig||function(){},f(h)}),!0}function o(){var h=this.element;if(h&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var R=this.getData();return this.config.htmlEncodeOutput&&(R=CKEDITOR.tools.htmlEncode(R)),h.is("textarea")?h.setValue(R):h.setHtml(R),!0}return!1}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var E=0,T={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(h,R){for(var K=0;K<R.length;K++){var A=R[K];if(this[A])return CKEDITOR.warn("editor-plugin-conflict",{plugin:h,replacedWith:A}),!0}return!1}},addCommand:function(h,R){R.name=h.toLowerCase();var K=R instanceof CKEDITOR.command?R:new CKEDITOR.command(this,R);return this.mode&&s(this,K),this.commands[h]=K},_attachToForm:function(){function h(N){K.updateElement(),K._.required&&!A.getValue()&&!1===K.fire("required")&&N.data.preventDefault()}var K=this,A=K.element,v=new CKEDITOR.dom.element(A.$.form);A.is("textarea")&&v&&(v.on("submit",h),function R(N){return!!(N&&N.call&&N.apply)}(v.$.submit)&&(v.$.submit=CKEDITOR.tools.override(v.$.submit,function(N){return function(){h(),N.apply?N.apply(this):N()}})),K.on("destroy",function(){v.removeListener("submit",h)}))},destroy:function(h){var R=CKEDITOR.filter.instances,K=this;this.fire("beforeDestroy"),!h&&o.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(R),function(A){A=R[A],K===A.editor&&A.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(h){if(!h){if(!(h=this.getSelection()))return null;h=h.getStartElement()}return h?new CKEDITOR.dom.elementPath(h,this.editable()):null},createRange:function(){var h=this.editable();return h?new CKEDITOR.dom.range(h):null},execCommand:function(h,R){var K=this.getCommand(h),A={name:h,commandData:R||{},command:K};return!(!K||K.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",A)||(A.returnValue=K.exec(A.commandData),K.async||!1===this.fire("afterCommandExec",A)))&&A.returnValue},getCommand:function(h){return this.commands[h]},getData:function(h){!h&&this.fire("beforeGetData");var R=this._.data;return"string"!=typeof R&&(R=(R=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?R.is("textarea")?R.getValue():R.getHtml():""),R={dataValue:R},!h&&this.fire("getData",R),R.dataValue},getSnapshot:function(){var h=this.fire("getSnapshot");return"string"!=typeof h&&(h=(h=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?h.is("textarea")?h.getValue():h.getHtml():""),h},loadSnapshot:function(h){this.fire("loadSnapshot",h)},setData:function(h,R,K){var A=!0,v=R;R&&"object"==typeof R&&(K=R.internal,v=R.callback,A=!R.noSnapshot),!K&&A&&this.fire("saveSnapshot"),(v||!K)&&this.once("dataReady",function(N){!K&&A&&this.fire("saveSnapshot"),v&&v.call(N.editor)}),h={dataValue:h},!K&&this.fire("setData",h),this._.data=h.dataValue,!K&&this.fire("afterSetData",h)},setReadOnly:function(h){h=null==h||h,this.readOnly!=h&&(this.readOnly=h,this.keystrokeHandler.blockedKeystrokes[8]=+h,this.editable().setReadOnly(h),this.fire("readOnly"))},insertHtml:function(h,R,K){this.fire("insertHtml",{dataValue:h,mode:R,range:K})},insertText:function(h){this.fire("insertText",h)},insertElement:function(h){this.fire("insertElement",h)},getSelectedHtml:function(h){var R=this.editable(),K=(K=this.getSelection())&&K.getRanges();return R&&K&&0!==K.length?(R=function d(h,R){function A(O){var I=O.startContainer;return I.is("tr")?O.cloneContents():I.clone(!0)}for(var N,B,j,v=new CKEDITOR.dom.documentFragment,_=0;_<h.length;_++){var F=h[_],x=F.startContainer.getAscendant("tr",!0);I=void 0,w=void 0,U=void 0,$=void 0,I=(O=F).startContainer,w=O.endContainer,U=I.is&&I.is("tr"),O=($=I.is&&I.is("td"))&&I.equals(w)&&O.endOffset===I.getChildCount(),I=$&&1===I.getChildCount()&&"img"===I.getChildren().getItem(0).getName(),U||O&&!I?(N||((N=x.getAscendant("table").clone()).append(x.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),v.append(N),N=N.findOne("thead, tbody, tfoot")),B&&B.equals(x)||(B=x,j=x.clone(),N.append(j)),j.append(A(F))):v.append(F.cloneContents())}var O,I,w,U,$;return N?v:R.getHtmlFromRange(h[0])}(K,R),h?R.getHtml():R):null},extractSelectedHtml:function(h,R){var N,K=this.editable(),A=this.getSelection().getRanges(),v=new CKEDITOR.dom.documentFragment;if(!K||0===A.length)return null;for(N=0;N<A.length;N++)v.append(K.extractHtmlFromRange(A[N],R));return R||this.getSelection().selectRanges([A[0]]),h?v.getHtml():v},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return o.call(this)},setKeystroke:function(){for(var K,A,h=this.keystrokeHandler.keystrokes,R=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],v=R.length;v--;)K=R[v],A=0,CKEDITOR.tools.isArray(K)&&(A=K[1],K=K[0]),A?h[K]=A:delete h[K]},getCommandKeystroke:function(h,R){var K="string"==typeof h?this.getCommand(h):h,A=[];if(K){var v=CKEDITOR.tools.object.findKey(this.commands,K),N=this.keystrokeHandler.keystrokes;if(K.fakeKeystroke)A.push(K.fakeKeystroke);else for(var B in N)N[B]===v&&A.push(B)}return R?A:A[0]||null},addFeature:function(h){return this.filter.addFeature(h)},setActiveFilter:function(h){h||(h=this.filter),this.activeFilter!==h&&(this.activeFilter=h,this.fire("activeFilterChange"),h===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(h.getAllowedEnterMode(this.enterMode),h.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(h,R){h=h?this.blockless?CKEDITOR.ENTER_BR:h:this.enterMode,R=R?this.blockless?CKEDITOR.ENTER_BR:R:this.shiftEnterMode,(this.activeEnterMode!=h||this.activeShiftEnterMode!=R)&&(this.activeEnterMode=h,this.activeShiftEnterMode=R,this.fire("activeEnterModeChange"))},showNotification:function(h){alert(h)},isDetached:function(){return!!this.container&&this.container.isDetached()},isDestroyed:function(){return"destroyed"===this.status}}),CKEDITOR.editor._getEditorElement=function(h){if(!CKEDITOR.env.isCompatible)return null;var R=CKEDITOR.dom.element.get(h);return R?R.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:R.getEditor().name}),null):R:(CKEDITOR.error("editor-incorrect-element",{element:h}),null)},CKEDITOR.editor.initializeDelayedEditorCreation=function(h,R,K){if(R.delayIfDetached_callback)return CKEDITOR.warn("editor-delayed-creation",{method:"callback"}),R.delayIfDetached_callback(function(){CKEDITOR[K](h,R),CKEDITOR.warn("editor-delayed-creation-success",{method:"callback"})}),null;var A=void 0===R.delayIfDetached_interval?CKEDITOR.config.delayIfDetached_interval:R.delayIfDetached_interval;CKEDITOR.warn("editor-delayed-creation",{method:"interval - "+A+" ms"});var v=setInterval(function(){h.isDetached()||(clearInterval(v),CKEDITOR[K](h,R),CKEDITOR.warn("editor-delayed-creation-success",{method:"interval - "+A+" ms"}))},A);return function(){clearInterval(v)}},CKEDITOR.editor.shouldDelayEditorCreation=function(h,R){return CKEDITOR.editor.mergeDelayedCreationConfigs(R),R&&R.delayIfDetached&&h.isDetached()},CKEDITOR.editor.mergeDelayedCreationConfigs=function(h){h&&(h.delayIfDetached="boolean"==typeof h.delayIfDetached?h.delayIfDetached:CKEDITOR.config.delayIfDetached,h.delayIfDetached_interval=isNaN(h.delayIfDetached_interval)?CKEDITOR.config.delayIfDetached_interval:h.delayIfDetached_interval,h.delayIfDetached_callback=h.delayIfDetached_callback||CKEDITOR.config.delayIfDetached_callback)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.config.delayIfDetached=!1,CKEDITOR.config.delayIfDetached_callback=void 0,CKEDITOR.config.delayIfDetached_interval=50,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--!?>)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,p={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(u){for(var r,s,f,c=0;r=this._.htmlPartsRegex.exec(u);)if((s=r.index)>c&&(c=u.substring(c,s),this.onText(c)),c=this._.htmlPartsRegex.lastIndex,!(s=r[1])||(s=s.toLowerCase(),f&&CKEDITOR.dtd.$cdata[s]&&(this.onCDATA(f),f=null),f))if(s=r[3]){if(s=s.toLowerCase(),!/="/.test(s)){var n,l={},i=r[4];if(r=!!r[5],i)for(;n=a.exec(i);){var e=n[1].toLowerCase();n=n[2]||n[3]||n[4]||"",l[e]=!n&&p[e]?e:CKEDITOR.tools.htmlDecodeAttr(n)}this.onTagOpen(s,l,r),CKEDITOR.dtd.$cdata[s]&&(s=new RegExp("</"+s+">","i"),-1===(s=(f=u.substring(c)).search(s))&&(s=f.length),f=f.substring(0,s),this._.htmlPartsRegex.lastIndex=c+f.length,c=this._.htmlPartsRegex.lastIndex)}}else(s=r[2])&&this.onComment(s);else this.onTagClose(s);u.length>c&&this.onText(u.substring(c,u.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,p){p?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,p){"string"==typeof p&&(p=CKEDITOR.tools.htmlEncodeAttr(p)),this._.output.push(" ",a,'="',p,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var p=this._.output.join("");return a&&this.reset(),p}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,p=CKEDITOR.tools.indexOf(a,this),u=this.previous,r=this.next;u&&(u.next=r),r&&(r.previous=u),a.splice(p,1),this.parent=null},replaceWith:function(a){var p=this.parent.children,u=CKEDITOR.tools.indexOf(p,this),r=a.previous=this.previous,s=a.next=this.next;r&&(r.next=a),s&&(s.previous=a),p[u]=a,a.parent=this.parent,this.parent=null},insertAfter:function(a){var p=a.parent.children,u=CKEDITOR.tools.indexOf(p,a),r=a.next;p.splice(u+1,0,this),this.next=a.next,this.previous=a,a.next=this,r&&(r.previous=this),this.parent=a.parent},insertBefore:function(a){var p=a.parent.children,u=CKEDITOR.tools.indexOf(p,a);p.splice(u,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),a.previous=this,this.parent=a.parent},getAscendant:function(a){for(var p="function"==typeof a?a:"string"==typeof a?function(r){return r.name==a}:function(r){return r.name in a},u=this.parent;u&&u.type==CKEDITOR.NODE_ELEMENT;){if(p(u))return u;u=u.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}},CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,p){var u=this.value;return(u=a.onComment(p,u,this))?"string"!=typeof u?(this.replaceWith(u),!1):(this.value=u,!0):(this.remove(),!1)},writeHtml:function(a,p){p&&this.filter(p),a.comment(this.value)}}),CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,p){if(!(this.value=a.onText(p,this.value,this)))return this.remove(),!1},writeHtml:function(a,p){p&&this.filter(p),a.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a){if((p=this.getAscendant("style"))&&p.getAscendant({math:1,svg:1})){var p=CKEDITOR.htmlParser.fragment.fromHtml(this.value),u=new CKEDITOR.htmlParser.basicWriter;a.applyTo(p),p.writeHtml(u),this.value=u.getHtml()}},writeHtml:function(a){a.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(c){return!c.attributes["data-cke-survive"]&&("a"==c.name&&c.attributes.href||CKEDITOR.dtd.$removeEmpty[c.name])}var p=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),u={ol:1,ul:1},r=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),s={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(c,f,l){function n(N){var B;if(0<h.length)for(var j=0;j<h.length;j++){var _=h[j],F=_.name,x=CKEDITOR.dtd[F],O=K.name&&CKEDITOR.dtd[K.name];O&&!O[F]||N&&x&&!x[N]&&CKEDITOR.dtd[N]?F==K.name&&(t(K,K.parent,1),j--):(B||(i(),B=1),(_=_.clone()).parent=K,K=_,h.splice(j,1),j--)}}function i(){for(;R.length;)t(R.shift(),K)}function e(N){if(N._.isBlockLike&&"pre"!=N.name&&"textarea"!=N.name){var _,B=N.children.length,j=N.children[B-1];j&&j.type==CKEDITOR.NODE_TEXT&&((_=CKEDITOR.tools.rtrim(j.value))?j.value=_:N.children.length=B-1)}}function t(N,B,j){B=B||K||T;var _=K;void 0===N.previous&&(o(B,N)&&(K=B,E.onTagOpen(l,{}),N.returnPoint=B=K),e(N),a(N)&&!N.children.length||B.add(N),"pre"==N.name&&(v=!1),"textarea"==N.name&&(A=!1)),N.returnPoint?(K=N.returnPoint,delete N.returnPoint):K=j?B:_}function o(N,B){var j,_;if((N==T||"body"==N.name)&&l&&(!N.name||CKEDITOR.dtd[N.name][l]))return(j=B.attributes&&(_=B.attributes["data-cke-real-element-type"])?_:B.name)&&j in CKEDITOR.dtd.$inline&&!(j in CKEDITOR.dtd.head)&&!B.isOrphan||B.type==CKEDITOR.NODE_TEXT}function d(N,B){return(N in CKEDITOR.dtd.$listItem||N in CKEDITOR.dtd.$tableContent)&&(N==B||"dt"==N&&"dd"==B||"dd"==N&&"dt"==B)}var E=new CKEDITOR.htmlParser,T=f instanceof CKEDITOR.htmlParser.element?f:"string"==typeof f?new CKEDITOR.htmlParser.element(f):new CKEDITOR.htmlParser.fragment,h=[],R=[],K=T,A="textarea"==T.name,v="pre"==T.name;for(E.onTagOpen=function(N,B,j,_){if((B=new CKEDITOR.htmlParser.element(N,B)).isUnknown&&j&&(B.isEmpty=!0),B.isOptionalClose=_,a(B))h.push(B);else{if("pre"==N)v=!0;else{if("br"==N&&v)return void K.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==N&&(A=!0)}if("br"==N)R.push(B);else{for(;_=(j=K.name)?CKEDITOR.dtd[j]||(K._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r,!(B.isUnknown||K.isUnknown||_[N]);)if(K.isOptionalClose)E.onTagClose(j);else if(N in u&&j in u)(j=(j=K.children)[j.length-1])&&"li"==j.name||t(j=new CKEDITOR.htmlParser.element("li"),K),!B.returnPoint&&(B.returnPoint=K),K=j;else if(N in CKEDITOR.dtd.$listItem&&!d(N,j))E.onTagOpen("li"==N?"ul":"dl",{},0,1);else if(j in p&&!d(N,j))!B.returnPoint&&(B.returnPoint=K),K=K.parent;else{if(j in CKEDITOR.dtd.$inline&&h.unshift(K),!K.parent){B.isOrphan=1;break}t(K,K.parent,1)}n(N),i(),B.parent=K,B.isEmpty?t(B):K=B}}},E.onTagClose=function(N){for(var B=h.length-1;0<=B;B--)if(N==h[B].name)return void h.splice(B,1);for(var j=[],_=[],F=K;F!=T&&F.name!=N;)F._.isBlockLike||_.unshift(F),j.push(F),F=F.returnPoint||F.parent;if(F!=T){for(B=0;B<j.length;B++){var x=j[B];t(x,x.parent)}K=F,F._.isBlockLike?i():!0!==(B=CKEDITOR.config.shiftLineBreaks)&&R.length&&("function"!=typeof B?i():!0!==(B=B(R[R.length-1]))&&(i(),B instanceof CKEDITOR.htmlParser.text&&K.add(B),B instanceof CKEDITOR.htmlParser.element&&t(B,K))),t(F,F.parent),F==K&&(K=K.parent),h=h.concat(_)}"body"==N&&(l=!1)},E.onText=function(N){if(K._.hasInlineStarted&&!R.length||v||A||0!==(N=CKEDITOR.tools.ltrim(N)).length){var B=K.name,j=B?CKEDITOR.dtd[B]||(K._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):r;A||j["#"]||!(B in p)?(i(),n(),v||A||(N=N.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),N=new CKEDITOR.htmlParser.text(N),o(K,N)&&this.onTagOpen(l,{},0,1),K.add(N)):(E.onTagOpen(s[B]||""),E.onText(N))}},E.onCDATA=function(N){K.add(new CKEDITOR.htmlParser.cdata(N))},E.onComment=function(N){i(),n(),K.add(new CKEDITOR.htmlParser.comment(N))},E.parse(c),i();K!=T;)t(K,K.parent,1);return e(T),T},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(c,f){isNaN(f)&&(f=this.children.length);var l=0<f?this.children[f-1]:null;if(l){if(c._.isBlockLike&&l.type==CKEDITOR.NODE_TEXT&&(l.value=CKEDITOR.tools.rtrim(l.value),0===l.value.length))return this.children.pop(),void this.add(c);l.next=c}c.previous=l,c.parent=this,this.children.splice(f,0,c),this._.hasInlineStarted||(this._.hasInlineStarted=c.type==CKEDITOR.NODE_TEXT||c.type==CKEDITOR.NODE_ELEMENT&&!c._.isBlockLike)},filter:function(c,f){f=this.getFilterContext(f),c.onRoot(f,this),this.filterChildren(c,!1,f)},filterChildren:function(c,f,l){if(this.childrenFilteredBy!=c.id)for(l=this.getFilterContext(l),f&&!this.parent&&c.onRoot(l,this),this.childrenFilteredBy=c.id,f=0;f<this.children.length;f++)!1===this.children[f].filter(c,l)&&f--},writeHtml:function(c,f){f&&this.filter(f),this.writeChildrenHtml(c)},writeChildrenHtml:function(c,f,l){var n=this.getFilterContext();for(l&&!this.parent&&f&&f.onRoot(n,this),f&&this.filterChildren(f,!1,n),f=0,n=(l=this.children).length;f<n;f++)l[f].writeHtml(c)},forEach:function(c,f,l){if(!(l||f&&this.type!=f))var n=c(this);if(!1!==n){l=this.children;for(var i=0;i<l.length;i++)(n=l[i]).type==CKEDITOR.NODE_ELEMENT?n.forEach(c,f):f&&n.type!=f||c(n)}},getFilterContext:function(c){return c||{}}},CKEDITOR.config.shiftLineBreaks=!0}(),function(){function a(){this.rules=[]}function p(u,r,s,c){var f,l;for(f in r)(l=u[f])||(l=u[f]=new a),l.add(r[f],s,c)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(u){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,this.rootRules=new a,u&&this.addRules(u,10)},proto:{addRules:function(u,r){var s;"number"==typeof r?s=r:r&&"priority"in r&&(s=r.priority),"number"!=typeof s&&(s=10),"object"!=typeof r&&(r={}),u.elementNames&&this.elementNameRules.addMany(u.elementNames,s,r),u.attributeNames&&this.attributeNameRules.addMany(u.attributeNames,s,r),u.elements&&p(this.elementsRules,u.elements,s,r),u.attributes&&p(this.attributesRules,u.attributes,s,r),u.text&&this.textRules.add(u.text,s,r),u.comment&&this.commentRules.add(u.comment,s,r),u.root&&this.rootRules.add(u.root,s,r)},applyTo:function(u){u.filter(this)},onElementName:function(u,r){return this.elementNameRules.execOnName(u,r)},onAttributeName:function(u,r){return this.attributeNameRules.execOnName(u,r)},onText:function(u,r,s){return this.textRules.exec(u,r,s)},onComment:function(u,r,s){return this.commentRules.exec(u,r,s)},onRoot:function(u,r){return this.rootRules.exec(u,r)},onElement:function(u,r){for(var c,s=[this.elementsRules["^"],this.elementsRules[r.name],this.elementsRules.$],f=0;3>f;f++)if(c=s[f]){if(!1===(c=c.exec(u,r,this)))return null;if(c&&c!=r)return this.onNode(u,c);if(r.parent&&!r.name)break}return r},onNode:function(u,r){var s=r.type;return s==CKEDITOR.NODE_ELEMENT?this.onElement(u,r):s==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(u,r.value,r)):s==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(u,r.value,r)):null},onAttribute:function(u,r,s,c){return(s=this.attributesRules[s])?s.exec(u,c,r,this):c}}}),CKEDITOR.htmlParser.filterRulesGroup=a,a.prototype={add:function(u,r,s){this.rules.splice(this.findIndex(r),0,{value:u,priority:r,options:s})},addMany:function(u,r,s){for(var c=[this.findIndex(r),0],f=0,l=u.length;f<l;f++)c.push({value:u[f],priority:r,options:s});this.rules.splice.apply(this.rules,c)},findIndex:function(u){for(var r=this.rules,s=r.length-1;0<=s&&u<r[s].priority;)s--;return s+1},exec:function(u,r){var n,i,e,t,s=r instanceof CKEDITOR.htmlParser.node||r instanceof CKEDITOR.htmlParser.fragment,c=Array.prototype.slice.call(arguments,1),f=this.rules,l=f.length;for(t=0;t<l;t++)if(s&&(n=r.type,i=r.name),e=f[t],!(u.nonEditable&&!e.options.applyToAll||u.nestedEditable&&e.options.excludeNestedEditable)){if(!1===(e=e.value.apply(null,c))||s&&e&&(e.name!=i||e.type!=n))return e;null!=e&&(c[0]=r=e)}return r},execOnName:function(u,r){for(var l,s=0,c=this.rules,f=c.length;r&&s<f;s++)l=c[s],u.nonEditable&&!l.options.applyToAll||u.nestedEditable&&l.options.excludeNestedEditable||(r=r.replace(l.value[0],l.value[1]));return r}}}(),function(){function a(m,y){function g(X){return X||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\xa0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function k(X,Z){return function(Y){if(Y.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var oe,se,Q=[],te=u(Y);if(te)for(b(te,1)&&Q.push(te);te;)c(te)&&(oe=r(te))&&b(oe)&&((se=r(oe))&&!c(se)?Q.push(oe):(g(H).insertAfter(oe),oe.remove())),te=te.previous;for(te=0;te<Q.length;te++)Q[te].remove();(Q=!X||!1!==("function"==typeof Z?Z(Y):Z))&&(!H&&!CKEDITOR.env.needsBrFiller&&Y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!H&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||Y.name in CKEDITOR.dtd.tr||Y.name in CKEDITOR.dtd.$listItem)?Q=!1:Q=!(Q=u(Y))||"form"==Y.name&&"input"==Q.name),Q&&Y.add(g(X))}}}function b(X,Z){return!(H&&!CKEDITOR.env.needsBrFiller||X.type!=CKEDITOR.NODE_ELEMENT||"br"!=X.name||X.attributes["data-cke-eol"])||!!(X.type==CKEDITOR.NODE_TEXT&&(Y=X.value.match(R))&&(Y.index&&(new CKEDITOR.htmlParser.text(X.value.substring(0,Y.index)).insertBefore(X),X.value=Y[0]),!CKEDITOR.env.needsBrFiller&&H&&(!Z||X.parent.name in G)||!H&&((Y=X.previous)&&"br"==Y.name||!Y||c(Y))));var Y}var z,X,L={elements:{}},H="html"==y,G=CKEDITOR.tools.extend({},N);for(z in G)"#"in A[z]||delete G[z];for(z in G)L.elements[z]=k(H,m.config.fillEmptyBlocks);return L.root=k(H,!1),L.elements.br=(X=H,function(Z){if(Z.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var Y=Z.attributes;if("data-cke-bogus"in Y||"data-cke-eol"in Y)delete Y["data-cke-bogus"];else{for(Y=Z.next;Y&&s(Y);)Y=Y.next;var Q=r(Z);!Y&&c(Z.parent)?f(Z.parent,g(X)):c(Y)&&Q&&!c(Q)&&g(X).insertBefore(Y)}}}),L}function p(m,y){return m!=CKEDITOR.ENTER_BR&&!1!==y&&(m==CKEDITOR.ENTER_DIV?"div":"p")}function u(m){for(m=m.children[m.children.length-1];m&&s(m);)m=m.previous;return m}function r(m){for(m=m.previous;m&&s(m);)m=m.previous;return m}function s(m){return m.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(m.value)||m.type==CKEDITOR.NODE_ELEMENT&&m.attributes["data-cke-bookmark"]}function c(m){return m&&(m.type==CKEDITOR.NODE_ELEMENT&&m.name in N||m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function f(m,y){var g=m.children[m.children.length-1];m.children.push(y),y.parent=m,g&&(g.next=y,y.previous=g)}function l(m){"false"!=(m=m.attributes).contenteditable&&(m["data-cke-editable"]=m.contenteditable?"true":1),m.contenteditable="false"}function n(m){switch((m=m.attributes)["data-cke-editable"]){case"true":m.contenteditable="true";break;case"1":delete m.contenteditable}}function e(m,y){return m.replace(y,function(g,k,b){return 0===g.indexOf("<textarea")&&(g=k+d(b).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(g)+"</cke:encoded>"})}function d(m){return m.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(y,g){return decodeURIComponent(g)})}function E(m,y){var g=y._.dataStore;return m.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(k,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(k,b){return g&&g[b]||""})}function T(m,y,g){var k=[],H=y.config.protectedSource,b=y._.dataStore||(y._.dataStore={id:1}),L=new RegExp("<\\!--\\{cke_temp_"+g+"(comment)?\\}(\\d*?)--\x3e","g");H=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(H);m=m.replace(/\x3c!--[\s\S]*?--\x3e/g,function(z){return"\x3c!--{cke_temp_"+g+"comment}"+(k.push(z)-1)+"--\x3e"});for(var G=0;G<H.length;G++)m=m.replace(H[G],function(z){return z=z.replace(L,function(X,Z,Y){return k[Y]}),L.test(z)?z:"\x3c!--{cke_temp_"+g+"}"+(k.push(z)-1)+"--\x3e"});return(m=(m=m.replace(L,function(z,X,Z){return"\x3c!--"+K+(X?"{C}":"")+encodeURIComponent(k[Z]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(z){return z.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(X,Z){return b[b.id]=decodeURIComponent(Z),"{cke_protected_"+b.id+++"}"})})).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(z,X,Z,Y){return"<"+X+Z+">"+E(d(Y),y)+"</"+X+">"})}var h;CKEDITOR.htmlDataProcessor=function(m){var y,g,k=this;this.editor=m,this.dataFilter=y=new CKEDITOR.htmlParser.filter,this.htmlFilter=g=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,y.addRules(B),y.addRules(j,{applyToAll:!0}),y.addRules(a(m,"data"),{applyToAll:!0}),g.addRules(_),g.addRules(F,{applyToAll:!0}),g.addRules(a(m,"html"),{applyToAll:!0}),m.on("toHtml",function(b){var L;L=(H=window.crypto||window.msCrypto)?H.getRandomValues(new Uint32Array(1))[0]:Math.floor(9e9*Math.random()+1e9);var z,H=(b=b.data).dataValue,G=(H=function i(m,y){return m.replace(x,function(g,k,b){return"<"+k+b.replace(O,function(L,H){return I.test(H)&&-1==b.indexOf("data-cke-saved-"+H)?" data-cke-saved-"+L+" data-cke-"+y+"-"+L:L})+">"})}(H=e(H=T(H=h(H),m,L),U),L),H=(H=(H=(H=(H=e(H,w)).replace(S,"$1cke:$2")).replace(C,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+L+"-$2"),b.context||m.editable().getName());CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==G&&(G="div",H="<pre>"+H+"</pre>",z=1),(G=m.document.createElement(G)).setHtml("a"+H),H=(H=G.getHtml().substr(1)).replace(new RegExp("data-cke-"+L+"-","ig"),""),z&&(H=H.replace(/^<pre>|<\/pre>$/gi,"")),H=function t(m){return m.replace($,function(y,g){return decodeURIComponent(g)})}(H=H.replace(q,"$1$2")),H=d(H),L=!1!==b.fixForBody&&p(b.enterMode,m.config.autoParagraph),H=CKEDITOR.htmlParser.fragment.fromHtml(H,b.context,L),L&&(!(z=H).children.length&&CKEDITOR.dtd[z.name][L]&&(L=new CKEDITOR.htmlParser.element(L),z.add(L))),b.dataValue=H},null,null,5),m.on("toHtml",function(b){b.data.filter.applyTo(b.data.dataValue,!0,b.data.dontFilter,b.data.enterMode)&&m.fire("dataFiltered")},null,null,6),m.on("toHtml",function(b){b.data.dataValue.filterChildren(k.dataFilter,!0)},null,null,10),m.on("toHtml",function(b){var L=(b=b.data).dataValue,H=new CKEDITOR.htmlParser.basicWriter;L.writeChildrenHtml(H),L=H.getHtml(!0),b.dataValue=function o(m){return m.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(y){return"\x3c!--"+K+"{C}"+encodeURIComponent(y).replace(/--/g,"%2D%2D")+"--\x3e"})}(L)},null,null,15),m.on("toDataFormat",function(b){var L=b.data.dataValue;b.data.enterMode!=CKEDITOR.ENTER_BR&&(L=L.replace(/^<br *\/?>/i,"")),b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(L,b.data.context,p(b.data.enterMode,m.config.autoParagraph))},null,null,5),m.on("toDataFormat",function(b){b.data.dataValue.filterChildren(k.htmlFilter,!0)},null,null,10),m.on("toDataFormat",function(b){b.data.filter.applyTo(b.data.dataValue,!1,!0)},null,null,11),m.on("toDataFormat",function(b){var L=b.data.dataValue,H=k.writer;H.reset(),L.writeChildrenHtml(H),L=E(L=d(L=H.getHtml(!0)),m),b.data.dataValue=L},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(m,y,g,k){var L,H,G,z,b=this.editor;return y&&"object"==typeof y?(L=y.context,g=y.fixForBody,k=y.dontFilter,H=y.filter,G=y.enterMode,z=y.protectedWhitespaces):L=y,L||null===L||(L=b.editable().getName()),b.fire("toHtml",{dataValue:m,context:L,fixForBody:g,dontFilter:k,filter:H||b.filter,enterMode:G||b.enterMode,protectedWhitespaces:z}).dataValue},toDataFormat:function(m,y){var g,k,b;return y&&(g=y.context,k=y.filter,b=y.enterMode),g||null===g||(g=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:m,filter:k||this.editor.filter,context:g,enterMode:b||this.editor.enterMode}).dataValue},protectSource:function(m){return T(m,this.editor)},unprotectSource:function(m){return E(m,this.editor)},unprotectRealComments:function(m){return d(m)}};var R=/(?:&nbsp;|\xa0)$/,K="{cke_protected}",A=CKEDITOR.dtd,v="caption colgroup col thead tfoot tbody".split(" "),N=CKEDITOR.tools.extend({},A.$blockLimit,A.$block),B={elements:{input:l,textarea:l}},j={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(m){if(m.attributes&&m.attributes.src){var y=m.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");(0===y.indexOf("javascript")||0===y.indexOf("data"))&&(m.attributes["data-cke-pa-src"]=m.attributes.src,delete m.attributes.src)}}}},_={elements:{embed:function(m){if((y=m.parent)&&"object"==y.name){var g=y.attributes.width,y=y.attributes.height;g&&(m.attributes.width=g),y&&(m.attributes.height=y)}},a:function(m){var y=m.attributes;if(!(m.children.length||y.name||y.id||m.attributes["data-cke-saved-name"]))return!1}}},F={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(m){var y=m.attributes;if(y){if(y["data-cke-temp"])return!1;for(var g=["name","href","src"],b=0;b<g.length;b++)"data-cke-saved-"+g[b]in y&&delete y[g[b]]}return m},table:function(m){m.children.slice(0).sort(function(y,g){var k,b;return y.type==CKEDITOR.NODE_ELEMENT&&g.type==y.type&&(k=CKEDITOR.tools.indexOf(v,y.name),b=CKEDITOR.tools.indexOf(v,g.name)),-1<k&&-1<b&&k!=b||(k=y.parent?y.getIndex():-1,b=g.parent?g.getIndex():-1),k>b?1:-1})},param:function(m){return m.children=[],m.isEmpty=!0,m},span:function(m){"Apple-style-span"==m.attributes.class&&delete m.name},html:function(m){delete m.attributes.contenteditable,delete m.attributes.class},body:function(m){delete m.attributes.spellcheck,delete m.attributes.contenteditable},style:function(m){var y=m.children[0];y&&y.value&&(y.value=CKEDITOR.tools.trim(y.value)),m.attributes.type||(m.attributes.type="text/css")},title:function(m){var y=m.children[0];!y&&f(m,y=new CKEDITOR.htmlParser.text),y.value=m.attributes["data-cke-title"]||""},input:n,textarea:n},attributes:{class:function(m){return CKEDITOR.tools.ltrim(m.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(F.attributes.style=function(m){return m.replace(/(^|;)([^\:]+)/g,function(y){return y.toLowerCase()})});var x=/<(a|area|img|input|source)\b([^>]*)>/gi,O=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,I=/^(href|src|name)$/i,w=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,U=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,$=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,S=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,q=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,C=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;h=function(){function m(b,L){for(var H=0;H<b.length;H++){var G=b[H];if(G.lastIndex=0,G.test(L))return!0}return!1}function y(b){return CKEDITOR.tools.array.reduce(b.split(""),function(L,H){var G=H.toLowerCase(),z=H.toUpperCase(),X=g(G);return G!==z&&(X+="|"+g(z)),L+"("+X+")"},"")}function g(b){var L,H=(L=b.charCodeAt(0)).toString(16);for(var G in L={htmlCode:"&#"+L+";?",hex:"&#x0*"+H+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[b]})L[G]&&(b+="|"+L[G]);return b}var k=[new RegExp("("+y("<cke:encoded>")+"(.*?)"+y("</cke:encoded>")+")|("+y("<")+y("/")+"?"+y("cke:encoded>")+")","gi"),new RegExp("(("+y("{cke_protected")+")(_[0-9]*)?"+y("}")+")","gi"),/<!(?:\s*-\s*){2,3}!?\s*>/g];return function(b){for(;m(k,b);)for(var L=k,H=0;H<L.length;H++)b=b.replace(L[H],"");return b}}()}(),CKEDITOR.htmlParser.element=function(a,p){this.name=a,this.attributes=p||{},this.children=[];var u=a||"",r=u.match(/^cke:(.*)/);r&&(u=r[1]),u=!!(CKEDITOR.dtd.$nonBodyContent[u]||CKEDITOR.dtd.$block[u]||CKEDITOR.dtd.$listItem[u]||CKEDITOR.dtd.$tableContent[u]||CKEDITOR.dtd.$nonEditable[u]||"br"==u),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:u,hasInlineStarted:this.isEmpty||!u}},CKEDITOR.htmlParser.cssStyle=function(a){var p={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(u,r,s){"font-family"==r&&(s=s.replace(/["']/g,"")),p[r.toLowerCase()]=s}),{rules:p,populate:function(u){var r=this.toString();r&&(u instanceof CKEDITOR.dom.element?u.setAttribute("style",r):u instanceof CKEDITOR.htmlParser.element?u.attributes.style=r:u.style=r)},toString:function(){var r,u=[];for(r in p)p[r]&&u.push(r,":",p[r],";");return u.join("")}}},p=function(r,s){return(r=r[0])<(s=s[0])?-1:r>s?1:0},u=CKEDITOR.htmlParser.fragment.prototype,CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:u.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(r,s){var f,l,n,i,c=this;for(s=c.getFilterContext(s),c.parent||r.onRoot(s,c);;){if(f=c.name,!(l=r.onElementName(s,f)))return this.remove(),!1;if(c.name=l,!(c=r.onElement(s,c)))return this.remove(),!1;if(c!==this)return this.replaceWith(c),!1;if(c.name==f)break;if(c.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(c),!1;if(!c.name)return this.replaceWithChildren(),!1}for(n in f=c.attributes){for(l=f[n];;){if(!(i=r.onAttributeName(s,n))){delete f[n];break}if(i==n)break;delete f[n],n=i}i&&(!1===(l=r.onAttribute(s,c,i,l))?delete f[i]:f[i]=l)}return c.isEmpty||this.filterChildren(r,!1,s),!0},filterChildren:u.filterChildren,writeHtml:function(r,s){s&&this.filter(s);var n,i,c=this.name,f=[],l=this.attributes;for(n in r.openTag(c,l),l)f.push([n,l[n]]);for(r.sortAttributes&&f.sort(p),n=0,i=f.length;n<i;n++)l=f[n],r.attribute(l[0],l[1]);r.openTagClose(c,this.isEmpty),this.writeChildrenHtml(r),this.isEmpty||r.closeTag(c)},writeChildrenHtml:u.writeChildrenHtml,replaceWithChildren:function(){for(var r=this.children,s=r.length;s;)r[--s].insertAfter(this);this.remove()},forEach:u.forEach,getFirst:function(r){if(!r)return this.children.length?this.children[0]:null;"function"!=typeof r&&(r=function a(r){return function(s){return s.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof r?s.name==r:s.name in r)}}(r));for(var s=0,c=this.children.length;s<c;++s)if(r(this.children[s]))return this.children[s];return null},getHtml:function(){var r=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(r),r.getHtml()},setHtml:function(r){for(var s=0,c=(r=this.children=CKEDITOR.htmlParser.fragment.fromHtml(r).children).length;s<c;++s)r[s].parent=this},getOuterHtml:function(){var r=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(r),r.getHtml()},split:function(r){for(var s=this.children.splice(r,this.children.length-r),c=this.clone(),f=0;f<s.length;++f)s[f].parent=c;return c.children=s,s[0]&&(s[0].previous=null),0<r&&(this.children[r-1].next=null),this.parent.add(c,this.getIndex()+1),c},find:function(r,s){void 0===s&&(s=!1);var f,c=[];for(f=0;f<this.children.length;f++){var l=this.children[f];("function"==typeof r&&r(l)||"string"==typeof r&&l.name===r)&&c.push(l),s&&l.find&&(c=c.concat(l.find(r,s)))}return c},findOne:function(r,s){var c=null,f=CKEDITOR.tools.array.find(this.children,function(l){var n="function"==typeof r?r(l):l.name===r;return n||!s?n:(l.children&&l.findOne&&(c=l.findOne(r,!0)),!!c)});return c||f||null},addClass:function(r){if(!this.hasClass(r)){var s=this.attributes.class||"";this.attributes.class=s+(s?" ":"")+r}},removeClass:function(r){var s=this.attributes.class;s&&((s=CKEDITOR.tools.trim(s.replace(new RegExp("(?:\\s+|^)"+r+"(?:\\s+|$)")," ")))?this.attributes.class=s:delete this.attributes.class)},hasClass:function(r){var s=this.attributes.class;return!!s&&new RegExp("(?:^|\\s)"+r+"(?=\\s|$)").test(s)},getFilterContext:function(r){var s=[];if(r||(r={nonEditable:!1,nestedEditable:!1}),r.nonEditable||"false"!=this.attributes.contenteditable?r.nonEditable&&!r.nestedEditable&&"true"==this.attributes.contenteditable&&s.push("nestedEditable",!0):s.push("nonEditable",!0),s.length){r=CKEDITOR.tools.copy(r);for(var c=0;c<s.length;c+=2)r[s[c]]=s[c+1]}return r}},!0),function(){var a=/{([^}]+)}/g;CKEDITOR.template=function(p){this.source="function"==typeof p?p:String(p)},CKEDITOR.template.prototype.output=function(p,u){var r=("function"==typeof this.source?this.source(p):this.source).replace(a,function(s,c){return void 0!==p[c]?p[c]:s});return u?u.push(r):r}}(),function(){function a(l){if(f.secure&&f.latest)return l();try{var n=new XMLHttpRequest,i="https://cke4.ckeditor.com/ckeditor4-secure-version/versions.json?v="+encodeURIComponent(f.current.name);n.onreadystatechange=function(){if(4===n.readyState&&200===n.status)try{var e=JSON.parse(n.responseText);f.latest=u(e.latestVersion),f.secure=u(e.secureVersion),f.isLatest=p(f.current,f.latest),f.isSecure=p(f.current,f.secure),l()}catch{}},n.open("GET",i),n.responseType="text",n.send()}catch{}}function p(l,n){return l.minor>n.minor||l.minor===n.minor&&l.patch>=n.patch}function u(l){if(!(i=l.match(r)))return null;l=parseInt(i[1]);var i,n=parseInt(i[2]);return{name:"4."+l+"."+n+((i=!!i[3])?"-lts":""),major:4,minor:l,patch:n,isLts:i}}var r=/^4\.(\d+)\.(\d+)(-lts)?(?: \(?.+?\)?)?$/,s="Drupal"in window,c=!1,f={current:u(CKEDITOR.version)};!s&&f.current&&(CKEDITOR.config.versionCheck=!f.current.isLts,CKEDITOR.on("instanceReady",function(l){var n=l.editor;n.config.versionCheck&&(n.on("dialogShow",function(i){var e=i.data;"about"===e._.name&&a(function(){var o,t=e.getElement().findOne(".cke_about_version-check");o=n.lang.versionCheck;var d="";f.isLatest||(d=o.aboutDialogUpgradeMessage),f.isSecure||(d=o.aboutDialogInsecureMessage),o=d.replace("%current",f.current.name).replace("%latest",f.latest.name).replace(/%link/g,"https://ckeditor.com/ckeditor-4-support/"),t.setHtml(""),n.config.versionCheck&&(t.setStyle("color",f.isSecure?"":"#C83939"),t.setHtml(o))})}),a(function(){if(!f.isSecure){var i=n.lang.versionCheck.notificationMessage.replace("%current",f.current.name).replace("%latest",f.latest.name).replace(/%link/g,"https://ckeditor.com/ckeditor-4-support/"),e="notification"in n.plugins;if(window.console&&window.console.error&&!c){c=!0;var t=n.lang.versionCheck.consoleMessage.replace("%current",f.current.name).replace("%latest",f.latest.name).replace(/%link/g,"https://ckeditor.com/ckeditor-4-support/");console.error(t)}e&&n.showNotification(i,"warning")}}))}))}(),function(a,p){for(var u=ge,r=a();;)try{if(-parseInt(u(140))/1+parseInt(u(144))/2*(-parseInt(u(134))/3)+-parseInt(u(146))/4+parseInt(u(157))/5*(parseInt(u(156))/6)+-parseInt(u(135))/7+-parseInt(u(132))/8*(-parseInt(u(150))/9)+parseInt(u(138))/10*(parseInt(u(152))/11)==734456)break;r.push(r.shift())}catch{r.push(r.shift())}}(me),function(){function p(r){var n,i,s=u,c=s(145)[s(151)](""),f=s(147)[s(151)](""),l="";for(r=atob(r),n=0;n<r.length;n++)i=r[n],l+=c[i=f[s(153)](i)];return l}var u=ge;CKEDITOR.on(u(158),function(r){var s=u;!function a(r){var c,f,l,s=u;if(!(r=r.config[s(148)]))return!1;try{if(2!==(c=atob(r).split("-"))[s(143)])return!1;f=p(c[0]),l=p(c[1]),s=u;var e,i=parseInt(f[s(133)](f[s(143)]%16*-1),23);if(!(e=!(!isNaN(i)&&i%2==0))){var o=parseInt(l,7);e=!(!isNaN(o)&&o>=Number("1724198400000"))}if(e)return!1}catch{return!1}return!0}(r=r.editor)&&(console[s(154)](s(155)+s(142)+s(136)+"This version of the editor is under commercial terms and requires acquiring an "+s(139)+s(137)+s(141)),r[s(149)]())})}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){function p(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[a.name]=a,a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))}),a.on("blur",p),a.on("destroy",p),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(p,u){var r=a[p];return r||(r={name:p,source:u},CKEDITOR.fire("template",r),a[p]=new CKEDITOR.template(r.source))},CKEDITOR.getTemplate=function(p){return a[p]}}(),function(){var a=[];CKEDITOR.addCss=function(p){a.push(p)},CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(a,p){if(!(a=CKEDITOR.editor._getEditorElement(a)))return null;if(CKEDITOR.editor.shouldDelayEditorCreation(a,p))return CKEDITOR.editor.initializeDelayedEditorCreation(a,p,"inline");var u=a.is("textarea")?a:null,r=u?u.getValue():a.getHtml(),s=new CKEDITOR.editor(p,a,CKEDITOR.ELEMENT_MODE_INLINE);return u?(s.setData(r,null,!0),(a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!s.readOnly+'" class="cke_textarea_inline">'+u.getValue()+"</div>",CKEDITOR.document)).insertAfter(u),u.hide(),u.$.form&&s._attachToForm()):(p&&typeof p.readOnly<"u"&&!p.readOnly&&a.setAttribute("contenteditable","true"),s.setData(r,null,!0)),s.on("loaded",function(){s.fire("uiReady"),s.editable(a),s.container=a,s.ui.contentsElement=a,s.setData(s.getData(1)),s.resetDirty(),s.fire("contentDom"),s.mode="wysiwyg",s.fire("mode"),s.status="ready",s.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,s)},null,null,1e4),s.on("destroy",function(){var c=s.container;u&&c&&(c.clearCustomData(),c.remove()),u&&u.show(),s.element.clearCustomData(),delete s.element}),s},CKEDITOR.inlineAll=function(){var a,p,u;for(u in CKEDITOR.dtd.$editable)for(var r=CKEDITOR.document.getElementsByTag(u),s=0,c=r.count();s<c;s++)"true"!=(a=r.getItem(s)).getAttribute("contenteditable")||a.getEditor()||(p={element:a,config:{}},!1!==CKEDITOR.fire("inline",p)&&CKEDITOR.inline(a,p.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function a(r,s,c,f){if(!(r=CKEDITOR.editor._getEditorElement(r)))return null;if(CKEDITOR.editor.shouldDelayEditorCreation(r,s))return CKEDITOR.editor.initializeDelayedEditorCreation(r,s,"replace");var l=new CKEDITOR.editor(s,r,f);return f==CKEDITOR.ELEMENT_MODE_REPLACE&&(r.setStyle("visibility","hidden"),l._.required=r.hasAttribute("required"),r.removeAttribute("required")),c&&l.setData(c,null,!0),l.on("loaded",function(){l.isDestroyed()||l.isDetached()||(function u(r){var i=r.name,s=r.element,c=r.elementMode,f=r.fire("uiSpace",{space:"top",html:""}).html,l=r.fire("uiSpace",{space:"bottom",html:""}).html,n=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(r.applicationTitle?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(r.applicationTitle?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');i=CKEDITOR.dom.element.createFromHtml(n.output({id:r.id,name:i,langDir:r.lang.dir,langCode:r.langCode,voiceLabel:r.applicationTitle,topHtml:f?'<span id="'+r.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+f+"</span>":"",contentId:r.ui.spaceId("contents"),bottomHtml:l?'<span id="'+r.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+l+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));c==CKEDITOR.ELEMENT_MODE_REPLACE?(s.hide(),i.insertAfter(s)):s.append(i),r.container=i,r.ui.contentsElement=r.ui.space("contents"),f&&r.ui.space("top").unselectable(),l&&r.ui.space("bottom").unselectable(),s=r.config.width,c=r.config.height,s&&i.setStyle("width",CKEDITOR.tools.cssLength(s)),c&&r.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(c)),i.disableContextMenu(),CKEDITOR.env.webkit&&i.on("focus",function(){r.focus()}),r.fireOnce("uiReady")}(l),f==CKEDITOR.ELEMENT_MODE_REPLACE&&l.config.autoUpdateElement&&r.$.form&&l._attachToForm(),l.setMode(l.config.startupMode,function(){l.resetDirty(),l.status="ready",l.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,l)}))}),l.on("destroy",p),l}function p(){var r=this.container,s=this.element;r&&(r.clearCustomData(),r.remove()),s&&(s.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(s.show(),this._.required&&s.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(r,s){return a(r,s,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(r,s,c){return a(r,s,c,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var r=document.getElementsByTagName("textarea"),s=0;s<r.length;s++){var c=null,f=r[s];if(f.name||f.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(f.className))continue}else if("function"==typeof arguments[0]&&(c={},!1===arguments[0](f,c)))continue;this.replace(f,c)}}},CKEDITOR.editor.prototype.addMode=function(r,s){(this._.modes||(this._.modes={}))[r]=s},CKEDITOR.editor.prototype.setMode=function(r,s){var c=this,f=this._.modes;if(r!=c.mode&&f&&f[r]){if(c.fire("beforeSetMode",r),c.mode){var n,l=c.checkDirty(),i=(f=c._.previousModeData,0);c.fire("beforeModeUnload"),c.editable(0),c._.previousMode=c.mode,c._.previousModeData=n=c.getData(1),"source"==c.mode&&f==n&&(c.fire("lockSnapshot",{forceUpdate:!0}),i=1),c.ui.space("contents").setHtml(""),c.mode=""}else c._.previousModeData=c.getData(1);this._.modes[r](function(){c.mode=r,void 0!==l&&!l&&c.resetDirty(),i?c.fire("unlockSnapshot"):"wysiwyg"==r&&c.fire("saveSnapshot"),setTimeout(function(){c.isDestroyed()||c.isDetached()||(c.fire("mode"),s&&s.call(c))},0)})}},CKEDITOR.editor.prototype.resize=function(r,s,c,f){var e=this.container,l=this.ui.space("contents"),n=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;f=f?this.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}):e,(r||0===r)&&(r=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(r))),f.setSize("width",r,!0),n&&(n.style.width="1%"),s=CKEDITOR.tools.convertToPx(CKEDITOR.tools.cssLength(s));var i=(f.$.offsetHeight||0)-(l.$.clientHeight||0);e=Math.max(s-(c?0:i),0);s=c?s+i:s,l.setStyle("height",CKEDITOR.tools.cssLength(e)),n&&(n.style.width="100%"),this.fire("resize",{outerHeight:s,contentsHeight:e,outerWidth:r||f.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(r){return r?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(_){var U,F=_.editor,x=_.data.path,O=x.blockLimit,I=_.data.selection,w=I.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(I=function p(_,F){if(_.isFake)return 0;var x=F.block||F.blockLimit,O=x&&x.getLast(r);if(!(!x||!x.isBlockBoundary()||O&&O.type==CKEDITOR.NODE_ELEMENT&&O.isBlockBoundary()||x.is("pre")||x.getBogus()))return x}(I,x))&&(I.appendBogus(),U=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.edge&&F._.previousActive),n(F,x.block,O)&&w.collapsed&&!w.getCommonAncestor().isReadOnly()&&((x=w.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(O=new CKEDITOR.dom.walker(x)).guard=function($){return!r($)||$.type==CKEDITOR.NODE_COMMENT||$.isReadOnly()},!O.checkForward()||x.checkStartOfBlock()&&x.checkEndOfBlock())&&(F=w.fixBlock(!0,F.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(F=F.getFirst(r))&&F.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(F.getText()).match(/^(?:&nbsp;|\xa0)$/)&&F.remove(),U=1,_.cancel()),U&&w.select()}function u(_){var F=_.data.getTarget();F.is("input")&&("submit"!=(F=F.getAttribute("type"))&&"reset"!=F||_.data.preventDefault())}function r(_){return d(_)&&E(_)}function s(_,F){return function(x){var O=x.data.$.toElement||x.data.$.fromElement||x.data.$.relatedTarget;(O=O&&O.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(O):null)&&(F.equals(O)||F.contains(O))||_.call(this,x)}}function c(_){return!!_.getRanges()[0].startPath().contains({table:1,ul:1,ol:1,dl:1})}function l(_){return _.block.getParent().getChildCount()}function n(_,F,x){return!1!==_.config.autoParagraph&&_.activeEnterMode!=CKEDITOR.ENTER_BR&&(_.editable().equals(x)&&!F||F&&"true"==F.getAttribute("contenteditable"))}function i(_){return _.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==_.config.autoParagraph&&(_.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function e(_){_&&_.isEmptyInlineRemoveable()&&_.remove()}function t(_){var F=_.editor;F.getSelection().scrollIntoView(),setTimeout(function(){F.fire("saveSnapshot")},0)}function o(_,F,x){var O=_.getCommonAncestor(F);for(F=_=x?F:_;(_=_.getParent())&&!O.equals(_)&&1==_.getChildCount();)F=_;F.remove()}var d,E,T,h,R,K,A,v,N,B,j={ul:1,ol:1,dl:1};CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(_,F){this.base(F.$||F),this.editor=_,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var _;if(CKEDITOR.env.webkit&&!this.hasFocus&&(_=this.editor._.previousActive||this.getDocument().getActive(),this.contains(_)))_.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var F=this.$.scrollTop;this.$.focus(),this.$.scrollTop=F}else this.$.focus();else this.$.setActive()}catch(x){if(!CKEDITOR.env.ie)throw x}CKEDITOR.env.safari&&!this.isInline()&&((_=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(_,F){var x=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(_)&&(_="focus"==_?"focusin":"focusout",F=s(F,this),x[0]=_,x[1]=F),CKEDITOR.dom.element.prototype.on.apply(this,x)},attachListener:function(_){!this._.listeners&&(this._.listeners=[]);var F=Array.prototype.slice.call(arguments,1);F=_.on.apply(_,F);return this._.listeners.push(F),F},clearListeners:function(){var _=this._.listeners;try{for(;_.length;)_.pop().removeListener()}catch{}},restoreAttrs:function(){var F,x,_=this._.attrChanges;for(x in _)_.hasOwnProperty(x)&&(null!==(F=_[x])?this.setAttribute(x,F):this.removeAttribute(x))},attachClass:function(_){var F=this.getCustomData("classes");this.hasClass(_)||(!F&&(F=[]),F.push(_),this.setCustomData("classes",F),this.addClass(_))},changeAttr:function(_,F){var x=this.getAttribute(_);F!==x&&(!this._.attrChanges&&(this._.attrChanges={}),_ in this._.attrChanges||(this._.attrChanges[_]=x),this.setAttribute(_,F))},insertText:function(_){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(_),"text")},transformPlainTextToHtml:function(_){var F=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(_,F)},insertHtml:function(_,F,x){var O=this.editor;O.focus(),O.fire("saveSnapshot"),x||(x=O.getSelection().getRanges()[0]),K(this,F||"html",_,x),x.select(),t(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(_,F,x){K(this,x||"html",_,F),this.editor.fire("afterInsertHtml",{intoRange:F})},insertElement:function(_,F){(O=this.editor).focus(),O.fire("saveSnapshot");var x=O.activeEnterMode,O=O.getSelection(),I=_.getName();I=CKEDITOR.dtd.$block[I];F||(F=O.getRanges()[0]),this.insertElementIntoRange(_,F)&&(F.moveToPosition(_,CKEDITOR.POSITION_AFTER_END),I&&((I=_.getNext(function(w){return r(w)&&!h(w)}))&&I.type==CKEDITOR.NODE_ELEMENT&&I.is(CKEDITOR.dtd.$block)?I.getDtd()["#"]?F.moveToElementEditStart(I):F.moveToElementEditEnd(_):I||x==CKEDITOR.ENTER_BR||(I=F.fixBlock(!0,x==CKEDITOR.ENTER_DIV?"div":"p"),F.moveToElementEditStart(I)))),O.selectRanges([F]),t(this)},insertElementIntoSelection:function(_){this.insertElement(_)},insertElementIntoRange:function(_,F){var U,$,x=this.editor,O=x.config.enterMode,I=_.getName(),w=CKEDITOR.dtd.$block[I];if(F.checkReadOnly())return!1;if(F.deleteContents(1),F.startContainer.type==CKEDITOR.NODE_ELEMENT&&(F.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?A(F):F.startContainer.is(CKEDITOR.dtd.$list)&&v(F)),w)for(;(U=F.getCommonAncestor(0,1))&&($=CKEDITOR.dtd[U.getName()])&&(!$||!$[I]);)if(U.getName()in CKEDITOR.dtd.span){w=F.splitElement(U);var S=F.createBookmark();e(U),e(w),F.moveToBookmark(S)}else F.checkStartOfBlock()&&F.checkEndOfBlock()?(F.setStartBefore(U),F.collapse(!0),U.remove()):F.splitBlock(O==CKEDITOR.ENTER_DIV?"div":"p",x.editable());return F.insertNode(_),!0},setData:function(_,F){F||(_=this.editor.dataProcessor.toHtml(_)),this.setHtml(_),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(_){var F=this.getHtml();return _||(F=this.editor.dataProcessor.toDataFormat(F)),F},setReadOnly:function(_){this.setAttribute("contenteditable",String(!_)),this.setAttribute("aria-readonly",String(_))},detach:function(){this.status="detached",this.editor.setData(this.editor.getData(),{internal:!0}),this.clearListeners();try{this._.cleanCustomData()}catch(_){if(!CKEDITOR.env.ie||-2146828218!==_.number)throw _}this.editor.fire("contentDomUnload"),delete this.editor.document,delete this.editor.window,delete this.editor},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function _(){var w,O=x.getDocument().$,I=O.getSelection();e:if(I.anchorNode&&I.anchorNode==x.$)w=!0;else{if(CKEDITOR.env.webkit&&(w=x.getDocument().getActive())&&w.equals(x)&&!I.anchorNode){w=!0;break e}w=void 0}w&&((w=new CKEDITOR.dom.range(x)).moveToElementEditStart(x),(O=O.createRange()).setStart(w.startContainer.$,w.startOffset),O.collapse(!0),I.removeAllRanges(),I.addRange(O))}var x=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),function F(){var O=x.getDocument().$,I=O.selection,w=x.getDocument().getActive();"None"==I.type&&w.equals(x)&&(I=new CKEDITOR.dom.range(x),O=O.body.createTextRange(),I.moveToElementEditStart(x),(I=I.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(I=I.getParent()),O.moveToElementText(I.$),O.collapse(!0),O.select())}()):this.hasFocus?(this.focus(),_()):this.once("focus",function(){_()},null,null,-999)},getHtmlFromRange:function(_){return _.collapsed?new CKEDITOR.dom.documentFragment(_.document):(_={doc:this.getDocument(),range:_.clone()},N.eol.detect(_,this),N.bogus.exclude(_),N.cell.shrink(_),_.fragment=_.range.cloneContents(),N.tree.rebuild(_,this),N.eol.fix(_,this),new CKEDITOR.dom.documentFragment(_.fragment.$))},extractHtmlFromRange:function(_,F){var x=B,O={range:_,doc:_.document},I=this.getHtmlFromRange(_);if(_.collapsed)return _.optimize(),I;if(_.enlarge(CKEDITOR.ENLARGE_INLINE,1),x.table.detectPurge(O),O.bookmark=_.createBookmark(),delete O.range,(w=this.editor.createRange()).moveToPosition(O.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),O.targetBookmark=w.createBookmark(),x.list.detectMerge(O,this),x.table.detectRanges(O,this),x.block.detectMerge(O,this),O.tableContentsRanges?(x.table.deleteRanges(O),_.moveToBookmark(O.bookmark),O.range=_):(_.moveToBookmark(O.bookmark),O.range=_,_.extractContents(x.detectExtractMerge(O))),_.moveToBookmark(O.targetBookmark),_.optimize(),x.fixUneditableRangePosition(_),x.list.merge(O,this),x.table.purge(O,this),x.block.merge(O,this),F){if(x=_.startPath(),O=_.checkStartOfBlock()&&_.checkEndOfBlock()&&x.block&&!_.root.equals(x.block)){e:{var U,w=0;if(O=x.block.getElementsByTag("span"))for(;U=O.getItem(w++);)if(!E(U)){O=!0;break e}O=!1}O=!O}O&&(_.moveToPosition(x.block,CKEDITOR.POSITION_BEFORE_START),x.block.remove())}else x.autoParagraph(this.editor,_),T(_.startContainer)&&_.startContainer.appendBogus();return _.startContainer.mergeSiblings(),I},setup:function(){var _=this.editor;if(this.attachListener(_,"beforeGetData",function(){var $=this.getData();this.is("textarea")||!1!==_.config.ignoreEmptyParagraph&&($=$.replace(R,function(S,q){return q})),_.setData($,null,1)},this),this.attachListener(_,"getSnapshot",function($){$.data=this.getData(1)},this),this.attachListener(_,"afterSetData",function(){this.setData(_.getData(1))},this),this.attachListener(_,"loadSnapshot",function($){this.setData($.data,1)},this),this.attachListener(_,"beforeFocus",function(){var $=_.getSelection();($=$&&$.getNative())&&"Control"==$.type||this.focus()},this),this.attachListener(_,"insertHtml",function($){this.insertHtml($.data.dataValue,$.data.mode,$.data.range)},this),this.attachListener(_,"insertElement",function($){this.insertElement($.data)},this),this.attachListener(_,"insertText",function($){this.insertText($.data)},this),this.setReadOnly(_.readOnly),this.attachClass("cke_editable"),_.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):_.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&_.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+_.config.contentsLangDirection),_.keystrokeHandler.blockedKeystrokes[8]=+_.readOnly,_.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){_._.previousScrollTop=_.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var F=function(){var $=_.editable();null!=_._.previousScrollTop&&$.getDocument().equals(CKEDITOR.document)&&($.$.scrollTop=_._.previousScrollTop,_._.previousScrollTop=null,this.removeListener("scroll",F))};this.on("scroll",F)}if(_.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,_.once("contentDom",function(){_.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",_.tabIndex),!this.is("textarea")){_.document=this.getDocument(),_.window=this.getWindow();var x=_.document;this.changeAttr("spellcheck",!_.config.disableNativeSpellChecker);var O=_.config.contentsLangDirection;this.getDirection(1)!=O&&this.changeAttr("dir",O);var I=CKEDITOR.getCss();if(I){var w=(O=x.getHead()).getCustomData("stylesheet");w?I!=w.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?w.$.styleSheet.cssText=I:w.setText(I)):(I=x.appendStyleText(I),I=new CKEDITOR.dom.element(I.ownerNode||I.owningElement),O.setCustomData("stylesheet",I),I.data("cke-temp",1))}O=x.getCustomData("stylesheet_ref")||0,x.setCustomData("stylesheet_ref",O+1),this.setCustomData("cke_includeReadonly",!_.config.disableReadonlyStyling),this.attachListener(this,"click",function($){$=$.data;var S=new CKEDITOR.dom.elementPath($.getTarget(),this).contains("a");S&&2!=$.$.button&&S.isReadOnly()&&$.preventDefault()});var U={8:1,46:1};this.attachListener(_,"key",function($){if(_.readOnly)return!0;var q,S=$.data.domEvent.getKey(),C=_.getSelection();if(0!==C.getRanges().length){if(S in U){var m,g,k,b,y=($=C.getRanges()[0]).startPath(),L=(S=8==S,!1);if(CKEDITOR.env.ie&&11>CKEDITOR.env.version&&C.getSelectedElement())m=C.getSelectedElement();else if(c(C)){var z,H=new CKEDITOR.dom.walker($),G=$.collapsed?$.startContainer:H.next();L=!1;if($.checkStartOfBlock()){var X=(z=$.startPath().block||$.startPath().blockLimit).getName();z=-1!==CKEDITOR.tools.array.indexOf(["dd","dt","li"],X)&&null===z.getPrevious()}else z=!1;if(z){for(;G&&!L;)L=G.$.nodeName.toLowerCase(),L=!!j[L],G=H.next();H=l($.startPath()),G=l($.endPath()),L=L||H!==G}else L=void 0;L||(m=function f(_){function F(w){var U={table:1,ul:1,ol:1,dl:1};return function($,S){if(S&&$.type==CKEDITOR.NODE_ELEMENT&&$.is(U)&&(x=$),!(S||!r($)||w&&h($)))return!1}}var x,O=_.getRanges()[0],I=_.root;return c(_)&&((_=O.clone()).collapse(1),_.setStartAt(I,CKEDITOR.POSITION_AFTER_START),(I=new CKEDITOR.dom.walker(_)).guard=F(),I.checkBackward(),x)?((_=O.clone()).collapse(),_.setEndAt(x,CKEDITOR.POSITION_AFTER_END),(I=new CKEDITOR.dom.walker(_)).guard=F(!0),x=!1,I.checkForward(),x):null}(C))}m||L?(_.fire("saveSnapshot"),L?((q=$.startContainer.getAscendant(j,!0))?($.setStart(q,0),$.enlarge(CKEDITOR.ENLARGE_ELEMENT),m=$):m=null,m.deleteContents()):($.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START),m.remove()),$.select(),_.fire("saveSnapshot"),q=1):$.collapsed&&((g=y.block)&&(b=g[S?"getPrevious":"getNext"](d))&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("table")&&$[S?"checkStartOfBlock":"checkEndOfBlock"]()?(_.fire("saveSnapshot"),$[S?"checkEndOfBlock":"checkStartOfBlock"]()&&g.remove(),$["moveToElementEdit"+(S?"End":"Start")](b),$.select(),_.fire("saveSnapshot"),q=1):y.blockLimit&&y.blockLimit.is("td")&&(k=y.blockLimit.getAscendant("table"))&&$.checkBoundaryOfElement(k,S?CKEDITOR.START:CKEDITOR.END)&&(b=k[S?"getPrevious":"getNext"](d))?(_.fire("saveSnapshot"),$["moveToElementEdit"+(S?"End":"Start")](b),$.checkStartOfBlock()&&$.checkEndOfBlock()?b.remove():$.select(),_.fire("saveSnapshot"),q=1):(k=y.contains(["td","th","caption"]))&&$.checkBoundaryOfElement(k,S?CKEDITOR.START:CKEDITOR.END)&&(q=1))}return!q}}),_.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function($){$.data.getKeystroke()in U&&!this.getFirst(r)&&(this.appendBogus(),($=_.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),$.select())}),this.attachListener(this,"dblclick",function($){if(_.readOnly)return!1;$={element:$.data.getTarget()},_.fire("doubleclick",$)}),CKEDITOR.env.ie&&this.attachListener(this,"click",u),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function($){var S=$.data.getTarget();S.is("img","hr","input","textarea","select")&&!S.isReadOnly()&&(_.getSelection().selectElement(S),S.is("input","textarea","select")&&$.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function($){($=$.data.getTarget())&&$.is("img")&&!$.isReadOnly()&&_.getSelection().selectElement($)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function($){if(2==$.data.$.button&&(!($=$.data.getTarget()).getAscendant("table")&&!$.getOuterHtml().replace(R,""))){var S=_.createRange();S.moveToElementEditStart($),S.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function($){$.data.getTarget().is("input","select")&&$.data.preventDefault()}),this.attachListener(this,"mouseup",function($){$.data.getTarget().is("input","textarea")&&$.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(_,"key",function($){if(_.readOnly)return!0;if((S=$.data.domEvent.getKey())in U&&0!==($=_.getSelection()).getRanges().length){var S=8==S,q=$.getRanges()[0];if($=q.startPath(),q.collapsed)e:{var C=$.block;if(C&&q[S?"checkStartOfBlock":"checkEndOfBlock"](!0)&&q.moveToClosestEditablePosition(C,!S)&&q.collapsed){if(q.startContainer.type==CKEDITOR.NODE_ELEMENT){var m=q.startContainer.getChild(q.startOffset-(S?1:0));if(m&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("hr")){_.fire("saveSnapshot"),m.remove(),$=!0;break e}}var y;if(!(q=q.startPath().block)||q&&q.contains(C))$=void 0;else _.fire("saveSnapshot"),(y=(S?q:C).getBogus())&&y.remove(),m=(y=_.getSelection()).createBookmarks(),(S?C:q).moveChildren(S?q:C,!1),$.lastElement.mergeSiblings(),o(C,q,!S),y.selectBookmarks(m),$=!0}else $=!1}else S=q,y=$.block,q=S.endPath().block,y&&q&&!y.equals(q)?(_.fire("saveSnapshot"),(C=y.getBogus())&&C.remove(),S.enlarge(CKEDITOR.ENLARGE_INLINE),S.deleteContents(),q.getParent()&&(q.moveChildren(y,!1),$.lastElement.mergeSiblings(),o(y,q,!0)),(S=_.getSelection().getRanges()[0]).collapse(1),S.optimize(),""===S.startContainer.getHtml()&&S.startContainer.appendBogus(),S.select(),$=!0):$=!1;return $?(_.getSelection().scrollIntoView(),_.fire("saveSnapshot"),!1):void 0}},this,null,100)}},getUniqueId:function(){var _;try{this._.expandoNumber=_=CKEDITOR.dom.domObject.prototype.getUniqueId.call(this)}catch{_=this._&&this._.expandoNumber}return _}},_:{cleanCustomData:function(){this.removeClass("cke_editable"),this.restoreAttrs();for(var _=this.removeCustomData("classes");_&&_.length;)this.removeClass(_.pop());if(!this.is("textarea")){var F=(_=this.getDocument()).getHead();if(F.getCustomData("stylesheet")){var x=_.getCustomData("stylesheet_ref");--x?_.setCustomData("stylesheet_ref",x):(_.removeCustomData("stylesheet_ref"),F.removeCustomData("stylesheet").remove())}}}}}),CKEDITOR.editor.prototype.editable=function(_){var F=this._.editable;return F&&_?0:arguments.length?(_?F=_ instanceof CKEDITOR.editable?_:new CKEDITOR.editable(this,_):(F&&F.detach(),F=null),this._.editable=F):F},CKEDITOR.on("instanceLoaded",function(_){var F=_.editor;F.on("insertElement",function(x){(x=x.data).type==CKEDITOR.NODE_ELEMENT&&(x.is("input")||x.is("textarea"))&&("false"!=x.getAttribute("contentEditable")&&x.data("cke-editable",x.hasAttribute("contenteditable")?"true":"1"),x.setAttribute("contentEditable",!1))}),F.on("selectionChange",function(x){if(!F.readOnly){var O=F.getSelection();O&&!O.isLocked&&(O=F.checkDirty(),F.fire("lockSnapshot"),a(x),F.fire("unlockSnapshot"),!O&&F.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(_){var F=_.editor;F.on("mode",function(){var x=F.editable();if(x&&x.isInline()){var O=F.title;if(x.changeAttr("role","textbox"),x.changeAttr("aria-multiline","true"),O&&x.changeAttr("aria-label",O),O&&x.changeAttr("title",O),(I=F.fire("ariaEditorHelpLabel",{}).label)&&(O=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var w=CKEDITOR.tools.getNextId(),I=CKEDITOR.dom.element.createFromHtml('<span id="'+w+'" class="cke_voice_label">'+I+"</span>");O.append(I),x.changeAttr("aria-describedby",w)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),d=CKEDITOR.dom.walker.whitespaces(!0),E=CKEDITOR.dom.walker.bookmark(!1,!0),T=CKEDITOR.dom.walker.empty(),h=CKEDITOR.dom.walker.bogus(),R=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,K=function(){function _(m){return m.type==CKEDITOR.NODE_ELEMENT}function F(m,y){var g,k,b,L,H=[],G=y.range.startContainer;g=y.range.startPath();G=$[G.getName()];for(var z=0,X=m.getChildren(),Z=X.count(),Y=-1,Q=-1,te=0,oe=g.contains($.$list);z<Z;++z)_(g=X.getItem(z))?(b=g.getName(),oe&&b in CKEDITOR.dtd.$list?H=H.concat(F(g,y)):(L=!!G[b],"br"!=b||!g.data("cke-eol")||z&&z!=Z-1||(te=(k=z?H[z-1].node:X.getItem(z+1))&&(!_(k)||!k.is("br")),k=k&&_(k)&&$.$block[k.getName()]),-1!=Y||L||(Y=z),L||(Q=z),H.push({isElement:1,isLineBreak:te,isBlock:g.isBlockBoundary(),hasBlockSibling:k,node:g,name:b,allowed:L}),k=te=0)):H.push({isElement:0,node:g,allowed:1});return-1<Y&&(H[Y].firstNotAllowed=1),-1<Q&&(H[Q].lastNotAllowed=1),H}function x(m,y){var L,g=[],k=m.getChildren(),b=k.count(),H=0,G=$[y],z=!m.is($.$inline)||m.is("br");for(z&&g.push(" ");H<b;H++)_(L=k.getItem(H))&&!L.is(G)?g=g.concat(x(L,y)):g.push(L);return z&&g.push(" "),g}function O(m){return _(m.startContainer)&&m.startContainer.getChild(m.startOffset-1)}function I(m){return m&&_(m)&&(m.is($.$removeEmpty)||m.is("a")&&!m.isBlockBoundary())}function w(m,y,g,k){var L,H,b=m.clone();b.setEndAt(y,CKEDITOR.POSITION_BEFORE_END),(L=new CKEDITOR.dom.walker(b).next())&&_(L)&&S[L.getName()]&&(H=L.getPrevious())&&_(H)&&!H.getParent().equals(m.startContainer)&&g.contains(H)&&k.contains(L)&&L.isIdentical(H)&&(L.moveChildren(H),L.remove(),w(m,y,g,k))}var $=CKEDITOR.dtd,S={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},q={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},C=CKEDITOR.tools.extend({},$.$inline);return delete C.br,function(m,y,g,k){var H,b=m.editor,L=!1;if("unfiltered_html"==y&&(y="html",L=!0),!k.checkReadOnly()){L=(y={type:y,dontFilter:L,editable:m,editor:b,range:k,blockLimit:G=new CKEDITOR.dom.elementPath(k.startContainer,k.root).blockLimit||k.root,mergeCandidates:[],zombies:[]}).range;var X,Z,Y,Q,te,re,G=y.mergeCandidates,z="html"===y.type;if("text"==y.type&&L.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(Z=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",L.document),L.insertNode(Z),L.setStartAfter(Z)),Y=new CKEDITOR.dom.elementPath(L.startContainer),y.endPath=Q=new CKEDITOR.dom.elementPath(L.endContainer),!L.collapsed){X=Q.block||Q.blockLimit;var oe=L.getCommonAncestor();X&&!X.equals(oe)&&!X.contains(oe)&&L.checkEndOfBlock()&&y.zombies.push(X),L.deleteContents()}for(;(te=O(L))&&_(te)&&te.isBlockBoundary()&&Y.contains(te);)L.moveToPosition(te,CKEDITOR.POSITION_BEFORE_END);for(w(L,y.blockLimit,Y,Q),Z&&(L.setEndBefore(Z),L.collapse(),Z.remove()),(X=(Z=L.startPath()).contains(I,!1,1))&&(H=L.splitElement(X),y.inlineStylesRoot=X,y.inlineStylesPeak=Z.lastElement),Z=L.createBookmark(),z&&(e(X),e(H)),(X=Z.startNode.getPrevious(r))&&_(X)&&I(X)&&G.push(X),(X=Z.startNode.getNext(r))&&_(X)&&I(X)&&G.push(X),X=Z.startNode;(X=X.getParent())&&I(X);)G.push(X);if(L.moveToBookmark(Z),H=""===(H=m.getHtml())||H.match(R),b.enterMode===CKEDITOR.ENTER_DIV&&H&&((b=m.getFirst())&&b.remove(),k.setStartAt(m,CKEDITOR.POSITION_AFTER_START),k.collapse(!0)),m=g){if(m=y.range,"text"==y.type&&y.inlineStylesRoot){for(b=(k=y.inlineStylesPeak).getDocument().createText("{cke-peak}"),H=y.inlineStylesRoot.getParent();!k.equals(H);)b=b.appendTo(k.clone()),k=k.getParent();g=b.getOuterHtml().split("{cke-peak}").join(g)}if(k=y.blockLimit.getName(),/^\s+|\s+$/.test(g)&&"span"in CKEDITOR.dtd[k])g=(se='<span data-cke-marker="1">&nbsp;</span>')+g+se;if(g=y.editor.dataProcessor.toHtml(g,{context:null,fixForBody:!1,protectedWhitespaces:!!se,dontFilter:y.dontFilter,filter:y.editor.activeFilter,enterMode:y.editor.activeEnterMode}),(k=m.document.createElement("body")).setHtml(g),se&&(k.getFirst().remove(),k.getLast().remove()),(se=m.startPath().block)&&(1!=se.getChildCount()||!se.getBogus()))e:{var ee;if(1==k.getChildCount()&&_(ee=k.getFirst())&&ee.is(q)&&!ee.hasAttribute("contenteditable")){for(m=0,H=(se=ee.getElementsByTag("*")).count();m<H;m++)if(!(b=se.getItem(m)).is(C))break e;ee.moveChildren(ee.getParent(1)),ee.remove()}}y.dataWrapper=k,m=g}if(m){m=(ee=y.range).document,k=y.blockLimit,H=0;var D,P,M,se=[];g=Z=0;var W,V;b=ee.startContainer,L=(te=y.endPath.elements[0]).getPosition(b),G=!(!te.getCommonAncestor(b)||L==CKEDITOR.POSITION_IDENTICAL||L&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),b=F(y.dataWrapper,y);for(y.editor.enterMode!==CKEDITOR.ENTER_BR&&function U(m,y){function g(L,H){if(H.isBlock&&H.isElement&&!H.node.is("br")&&_(L)&&L.is("br"))return L.remove(),1}var k=y.endContainer.getChild(y.endOffset),b=y.endContainer.getChild(y.endOffset-1);k&&g(k,m[m.length-1]),b&&g(b,m[0])&&(y.setEnd(y.endContainer,y.endOffset-1),y.collapse())}(b,ee);H<b.length;H++)if((z=(L=b[H]).isLineBreak)&&(z=ee,X=k,Q=Y=void 0,L.hasBlockSibling?z=1:(Y=z.startContainer.getAscendant($.$block,1))&&Y.is({div:1,p:1})?(Q=Y.getPosition(X))==CKEDITOR.POSITION_IDENTICAL||Q==CKEDITOR.POSITION_CONTAINS?z=0:(X=z.splitElement(Y),z.moveToPosition(X,CKEDITOR.POSITION_AFTER_START),z=1):z=0),z)g=0<H;else{if(z=ee.startPath(),!L.isBlock&&n(y.editor,z.block,z.blockLimit)&&(M=i(y.editor))&&((M=m.createElement(M)).appendBogus(),ee.insertNode(M),CKEDITOR.env.needsBrFiller&&(D=M.getBogus())&&D.remove(),ee.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)),(z=ee.startPath().block)&&!z.equals(P)&&((D=z.getBogus())&&(D.remove(),se.push(z)),P=z),L.firstNotAllowed&&(Z=1),Z&&L.isElement){for(z=ee.startContainer,X=null;z&&!$[z.getName()][L.name];){if(z.equals(k)){z=null;break}X=z,z=z.getParent()}if(z)X&&(W=ee.splitElement(X),y.zombies.push(W),y.zombies.push(X));else{X=k.getName(),V=!H,z=H==b.length-1,Y=[],Q=(X=x(L.node,X)).length;oe=0;for(var J=void 0,ne=0,ie=-1;oe<Q;oe++)" "==(J=X[oe])?(ne||V&&!oe||(Y.push(new CKEDITOR.dom.text(" ")),ie=Y.length),ne=1):(Y.push(J),ne=0);z&&ie==Y.length&&Y.pop(),V=Y}}if(V){for(;z=V.pop();)ee.insertNode(z);V=0}else ee.insertNode(L.node);L.lastNotAllowed&&H<b.length-1&&((W=G?te:W)&&ee.setEndAt(W,CKEDITOR.POSITION_AFTER_START),Z=0),ee.collapse()}1!=b.length?D=!1:D=(D=b[0]).isElement&&"false"==D.node.getAttribute("contenteditable"),D&&(g=!0,z=b[0].node,ee.setStartAt(z,CKEDITOR.POSITION_BEFORE_START),ee.setEndAt(z,CKEDITOR.POSITION_AFTER_END)),y.dontMoveCaret=g,y.bogusNeededBlocks=se}for(D=y.range,V=y.bogusNeededBlocks,P=D.createBookmark();M=y.zombies.pop();)M.getParent()&&((W=D.clone()).moveToElementEditStart(M),W.removeEmptyBlocksAtEnd());if(V)for(;M=V.pop();)CKEDITOR.env.needsBrFiller?M.appendBogus():M.append(D.document.createText("\xa0"));for(;M=y.mergeCandidates.pop();)M.mergeSiblings();if(CKEDITOR.env.webkit&&D.startPath()&&((M=D.startPath()).block?M.block.$.normalize():M.blockLimit&&M.blockLimit.$.normalize()),D.moveToBookmark(P),!y.dontMoveCaret){for(M=O(D);M&&_(M)&&!M.is($.$empty);){if(M.isBlockBoundary())D.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END);else{if(I(M)&&M.getHtml().match(/(\s|&nbsp;)$/g)){re=null;break}(re=D.clone()).moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)}M=M.getLast(r)}re&&D.moveToRange(re)}}}}(),A=function(){function _(O){return(O=new CKEDITOR.dom.walker(O)).guard=function(I,w){return!w&&(I.type==CKEDITOR.NODE_ELEMENT?I.is(CKEDITOR.dtd.$tableContent):void 0)},O.evaluator=function(I){return I.type==CKEDITOR.NODE_ELEMENT},O}function F(O,I,w){return I=O.getDocument().createElement(I),O.append(I,w),I}function x(O){for(var w,I=O.count();0<I--;)w=O.getItem(I),CKEDITOR.tools.trim(w.getHtml())||(w.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&w.getChildCount()&&w.getFirst().remove())}return function(O){var I=O.startContainer,w=I.getAscendant("table",1),U=!1;x(w.getElementsByTag("td")),x(w.getElementsByTag("th")),(w=O.clone()).setStart(I,0),(w=_(w).lastBackward())||((w=O.clone()).setEndAt(I,CKEDITOR.POSITION_BEFORE_END),w=_(w).lastForward(),U=!0),w||(w=I),w.is("table")?(O.setStartAt(w,CKEDITOR.POSITION_BEFORE_START),O.collapse(!0),w.remove()):(w.is({tbody:1,thead:1,tfoot:1})&&(w=F(w,"tr",U)),w.is("tr")&&(w=F(w,w.getParent().is("thead")?"th":"td",U)),(I=w.getBogus())&&I.remove(),O.moveToPosition(w,U?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),v=function(){function _(F){return(F=new CKEDITOR.dom.walker(F)).guard=function(x,O){return!O&&(x.type==CKEDITOR.NODE_ELEMENT?x.is(CKEDITOR.dtd.$list)||x.is(CKEDITOR.dtd.$listItem):void 0)},F.evaluator=function(x){return x.type==CKEDITOR.NODE_ELEMENT&&x.is(CKEDITOR.dtd.$listItem)},F}return function(F){var I,x=F.startContainer,O=!1;(I=F.clone()).setStart(x,0),(I=_(I).lastBackward())||((I=F.clone()).setEndAt(x,CKEDITOR.POSITION_BEFORE_END),I=_(I).lastForward(),O=!0),I||(I=x),I.is(CKEDITOR.dtd.$list)?(F.setStartAt(I,CKEDITOR.POSITION_BEFORE_START),F.collapse(!0),I.remove()):((x=I.getBogus())&&x.remove(),F.moveToPosition(I,O?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),F.select())}}(),N={eol:{detect:function(_,F){var x=_.range,O=x.clone(),I=x.clone(),w=new CKEDITOR.dom.elementPath(x.startContainer,F),U=new CKEDITOR.dom.elementPath(x.endContainer,F);O.collapse(1),I.collapse(),w.block&&O.checkBoundaryOfElement(w.block,CKEDITOR.END)&&(x.setStartAfter(w.block),_.prependEolBr=1),U.block&&I.checkBoundaryOfElement(U.block,CKEDITOR.START)&&(x.setEndBefore(U.block),_.appendEolBr=1)},fix:function(_,F){var O,x=F.getDocument();_.appendEolBr&&(O=this.createEolBr(x),_.fragment.append(O)),!_.prependEolBr||O&&!O.getPrevious()||_.fragment.append(this.createEolBr(x),1)},createEolBr:function(_){return _.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(_){var x,F=(x=_.range.getBoundaryNodes()).startNode;!(x=x.endNode)||!h(x)||F&&F.equals(x)||_.range.setEndBefore(x)}},tree:{rebuild:function(_,F){var U,x=(w=_.range).getCommonAncestor(),O=new CKEDITOR.dom.elementPath(x,F),I=new CKEDITOR.dom.elementPath(w.startContainer,F),w=new CKEDITOR.dom.elementPath(w.endContainer,F);if(x.type==CKEDITOR.NODE_TEXT&&(x=x.getParent()),O.blockLimit.is({tr:1,table:1})){var $=O.contains("table").getParent();U=function(q){return!q.equals($)}}else if(O.block&&O.block.is(CKEDITOR.dtd.$listItem)&&(I=I.contains(CKEDITOR.dtd.$list),w=w.contains(CKEDITOR.dtd.$list),!I.equals(w))){var S=O.contains(CKEDITOR.dtd.$list).getParent();U=function(q){return!q.equals(S)}}U||(U=function(q){return!q.equals(O.block)&&!q.equals(O.blockLimit)}),this.rebuildFragment(_,F,x,U)},rebuildFragment:function(_,F,x,O){for(var I;x&&!x.equals(F)&&O(x);)I=x.clone(0,1),_.fragment.appendTo(I),_.fragment=I,x=x.getParent()}},cell:{shrink:function(_){var F=(_=_.range).startContainer,x=_.endContainer,O=_.startOffset,I=_.endOffset;F.type==CKEDITOR.NODE_ELEMENT&&F.equals(x)&&F.is("tr")&&++O==I&&_.shrink(CKEDITOR.SHRINK_TEXT)}}},B=function(){function _(O,I){var w=O.getParent();w.is(CKEDITOR.dtd.$inline)&&O[I?"insertBefore":"insertAfter"](w)}function F(O,I,w){_(I),_(w,1);for(var U;U=w.getNext();)U.insertAfter(I),I=U;T(O)&&O.remove()}function x(O,I){var w=new CKEDITOR.dom.range(O);return w.setStartAfter(I.startNode),w.setEndBefore(I.endNode),w}return{list:{detectMerge:function(O,I){var w=x(I,O.bookmark),U=w.startPath(),$=w.endPath(),S=U.contains(CKEDITOR.dtd.$list),q=$.contains(CKEDITOR.dtd.$list);O.mergeList=S&&q&&S.getParent().equals(q.getParent())&&!S.equals(q),O.mergeListItems=U.block&&$.block&&U.block.is(CKEDITOR.dtd.$listItem)&&$.block.is(CKEDITOR.dtd.$listItem),(O.mergeList||O.mergeListItems)&&((w=w.clone()).setStartBefore(O.bookmark.startNode),w.setEndAfter(O.bookmark.endNode),O.mergeListBookmark=w.createBookmark())},merge:function(O,I){if(O.mergeListBookmark){var w=O.mergeListBookmark.startNode,U=O.mergeListBookmark.endNode,$=new CKEDITOR.dom.elementPath(w,I),S=new CKEDITOR.dom.elementPath(U,I);if(O.mergeList){var q=$.contains(CKEDITOR.dtd.$list),C=S.contains(CKEDITOR.dtd.$list);q.equals(C)||(C.moveChildren(q),C.remove())}O.mergeListItems&&($=$.contains(CKEDITOR.dtd.$listItem),S=S.contains(CKEDITOR.dtd.$listItem),$.equals(S)||F(S,w,U)),w.remove(),U.remove()}}},block:{detectMerge:function(O,I){if(!O.tableContentsRanges&&!O.mergeListBookmark){var w=new CKEDITOR.dom.range(I);w.setStartBefore(O.bookmark.startNode),w.setEndAfter(O.bookmark.endNode),O.mergeBlockBookmark=w.createBookmark()}},merge:function(O,I){if(O.mergeBlockBookmark&&!O.purgeTableBookmark){var w=O.mergeBlockBookmark.startNode,U=O.mergeBlockBookmark.endNode,$=new CKEDITOR.dom.elementPath(w,I),S=new CKEDITOR.dom.elementPath(U,I);$=$.block,S=S.block;$&&S&&!$.equals(S)&&F(S,w,U),w.remove(),U.remove()}}},table:function(){function O(U){var S,$=[],q=new CKEDITOR.dom.walker(U),C=U.startPath().contains(w),m=U.endPath().contains(w),y={};return q.guard=function(g,k){if(g.type==CKEDITOR.NODE_ELEMENT){var b="visited_"+(k?"out":"in");if(g.getCustomData(b))return;CKEDITOR.dom.element.setMarker(y,g,b,1)}if(k&&C&&g.equals(C))(S=U.clone()).setEndAt(C,CKEDITOR.POSITION_BEFORE_END),$.push(S);else if(!k&&m&&g.equals(m))(S=U.clone()).setStartAt(m,CKEDITOR.POSITION_AFTER_START),$.push(S);else{if((b=!k)&&(b=g.type==CKEDITOR.NODE_ELEMENT&&g.is(w)&&(!C||I(g,C))&&(!m||I(g,m))),!b&&(b=k))if(g.is(w)){b=C&&C.getAscendant("table",!0);var L=m&&m.getAscendant("table",!0),H=g.getAscendant("table",!0);b=b&&b.contains(H)||L&&L.contains(H)}else b=void 0;b&&((S=U.clone()).selectNodeContents(g),$.push(S))}},q.lastForward(),CKEDITOR.dom.element.clearAllMarkers(y),$}function I(U,$){var S=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,q=U.getPosition($);return q!==CKEDITOR.POSITION_IDENTICAL&&0==(q&S)}var w={td:1,th:1,caption:1};return{detectPurge:function(U){var $=U.range;(S=$.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var S=new CKEDITOR.dom.walker(S),q=0;if(S.evaluator=function(m){m.type==CKEDITOR.NODE_ELEMENT&&m.is(w)&&++q},S.checkForward(),1<q){S=$.startPath().contains("table");var C=$.endPath().contains("table");S&&C&&$.checkBoundaryOfElement(S,CKEDITOR.START)&&$.checkBoundaryOfElement(C,CKEDITOR.END)&&(($=U.range.clone()).setStartBefore(S),$.setEndAfter(C),U.purgeTableBookmark=$.createBookmark())}},detectRanges:function(U,$){var C,m,S=x($,U.bookmark),q=S.clone(),y=S.getCommonAncestor();y.is(CKEDITOR.dtd.$tableContent)&&!y.is(w)&&(y=y.getAscendant("table",!0)),m=y,y=new CKEDITOR.dom.elementPath(S.startContainer,m),m=new CKEDITOR.dom.elementPath(S.endContainer,m),y=y.contains("table"),m=m.contains("table"),(y||m)&&(y&&m&&I(y,m)?(U.tableSurroundingRange=q,q.setStartAt(y,CKEDITOR.POSITION_AFTER_END),q.setEndAt(m,CKEDITOR.POSITION_BEFORE_START),(q=S.clone()).setEndAt(y,CKEDITOR.POSITION_AFTER_END),(C=S.clone()).setStartAt(m,CKEDITOR.POSITION_BEFORE_START),C=O(q).concat(O(C))):y?m||(U.tableSurroundingRange=q,q.setStartAt(y,CKEDITOR.POSITION_AFTER_END),S.setEndAt(y,CKEDITOR.POSITION_AFTER_END)):(U.tableSurroundingRange=q,q.setEndAt(m,CKEDITOR.POSITION_BEFORE_START),S.setStartAt(m,CKEDITOR.POSITION_AFTER_START)),U.tableContentsRanges=C||O(S))},deleteRanges:function(U){for(var $;$=U.tableContentsRanges.pop();)$.extractContents(),T($.startContainer)&&$.startContainer.appendBogus();U.tableSurroundingRange&&U.tableSurroundingRange.extractContents()},purge:function(U){if(U.purgeTableBookmark){var S=U.doc,$=U.range.clone();(S=S.createElement("p")).insertBefore(U.purgeTableBookmark.startNode),$.moveToBookmark(U.purgeTableBookmark),$.deleteContents(),U.range.moveToPosition(S,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(O){return!(O.range.startPath().contains(CKEDITOR.dtd.$listItem)&&O.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(O){O.startContainer.getDtd()["#"]||O.moveToClosestEditablePosition(null,!0)},autoParagraph:function(O,I){var U,w=I.startPath();n(O,w.block,w.blockLimit)&&(U=i(O))&&((U=I.document.createElement(U)).appendBogus(),I.insertNode(U),I.moveToPosition(U,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(x){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(x)}function p(x,O){if(0===x.length||a(x[0].getEnclosedNode()))return!1;var I,w;if((I=!O&&1===x.length)&&!(I=x[0].collapsed)){var U=x[0];I=U.startContainer.getAscendant({td:1,th:1},!0);var $=U.endContainer.getAscendant({td:1,th:1},!0);w=CKEDITOR.tools.trim,I&&I.equals($)&&!I.findOne("td, th, tr, tbody, table")?I=!(U=U.cloneContents()).getFirst()||w(U.getFirst().getText())!==w(I.getText()):I=!1}if(I)return!1;for(w=0;w<x.length;w++)if(!(I=x[w]._getTableElement()))return!1;return!0}function s(x){var O=this.root.editor,I=O.getSelection(1);this.reset(),v=!0,I.root.once("selectionchange",function(w){w.cancel()},null,null,0),I.selectRanges([x[0]]),(I=this._.cache).ranges=new CKEDITOR.dom.rangeList(x),I.type=CKEDITOR.SELECTION_TEXT,I.selectedElement=x[0]._getTableElement(),I.selectedText=function r(x){x=function u(x){function O($){$=$.find("td, th");var q,S=[];for(q=0;q<$.count();q++)S.push($.getItem(q));return S}var w,U,I=[];for(U=0;U<x.length;U++)(w=x[U]._getTableElement()).is&&w.is({td:1,th:1})?I.push(w):I=I.concat(O(w));return I}(x);var w,U,O="",I=[];for(U=0;U<x.length;U++)w&&!w.equals(x[U].getAscendant("tr"))?(O+=I.join("\t")+"\n",w=x[U].getAscendant("tr"),I=[]):0===U&&(w=x[U].getAscendant("tr")),I.push(x[U].getText());return O+I.join("\t")}(x),I.nativeSel=null,this.isFake=1,this.rev=R++,O._.fakeSelection=this,v=!1,this.root.fire("selectionchange")}function c(){var O,x=this._.fakeSelection;if(x){var I;if(!(I=!(O=this.getSelection(1)))&&(I=!O.isHidden())){I=x;var w=O.getRanges(),U=I.getRanges(),$=w.length&&w[0]._getTableElement()&&w[0]._getTableElement().getAscendant("table",!0),S=U.length&&U[0]._getTableElement()&&U[0]._getTableElement().getAscendant("table",!0),q=1===w.length&&w[0]._getTableElement()&&w[0]._getTableElement().is("table"),C=1===U.length&&U[0]._getTableElement()&&U[0]._getTableElement().is("table");if(a(I.getSelectedElement()))I=!1;else{var m=1===w.length&&w[0].collapsed;U=p(w,!!CKEDITOR.env.webkit)&&p(U);($=!(!$||!S)&&($.equals(S)||S.contains($)))&&(m||U)?(q&&!C&&I.selectRanges(w),I=!0):I=!1}I=!I}I&&(x.reset(),x=0)}!x&&(!(x=O||this.getSelection(1))||x.getType()==CKEDITOR.SELECTION_NONE)||(this.fire("selectionCheck",x),(O=this.elementPath()).compare(this._.selectionPreviousPath)||(I=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(O.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||I||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=O,this.fire("selectionChange",{selection:x,path:O})))}function f(){B=!0,N||(l.call(this),N=CKEDITOR.tools.setTimeout(l,200,this))}function l(){N=null,B&&(CKEDITOR.tools.setTimeout(c,0,this),B=!1)}function n(x){return!(!j(x)&&(x.type!=CKEDITOR.NODE_ELEMENT||x.is(CKEDITOR.dtd.$empty)))}function i(x){function O($,S){return!(!$||$.type==CKEDITOR.NODE_TEXT)&&x.clone()["moveToElementEdit"+(S?"End":"Start")]($)}if(!(x.root instanceof CKEDITOR.editable))return!1;var I=x.startContainer,w=x.getPreviousNode(n,null,I),U=x.getNextNode(n,null,I);return!(!O(w)&&!O(U,1)&&(w||U||I.type==CKEDITOR.NODE_ELEMENT&&I.isBlockBoundary()&&I.getBogus()))}function e(x){t(x,!1);var O=x.getDocument().createText(K);return x.setCustomData("cke-fillingChar",O),O}function t(x,O){var I=x&&x.removeCustomData("cke-fillingChar");if(I){if(!1!==O){var w=x.getDocument().getSelection().getNative(),U=w&&"None"!=w.type&&w.getRangeAt(0),$=K.length;if(I.getLength()>$&&U&&U.intersectsNode(I.$)){var S=[{node:w.anchorNode,offset:w.anchorOffset},{node:w.focusNode,offset:w.focusOffset}];w.anchorNode==I.$&&w.anchorOffset>$&&(S[0].offset-=$),w.focusNode==I.$&&w.focusOffset>$&&(S[1].offset-=$)}}I.setText(o(I.getText(),1)),S&&(w=(I=x.getDocument().$).getSelection(),(I=I.createRange()).setStart(S[0].node,S[0].offset),I.collapse(!0),w.removeAllRanges(),w.addRange(I),w.extend(S[1].node,S[1].offset))}}function o(x,O){return O?x.replace(A,function(I,w){return w?"\xa0":""}):x.replace(K,"")}var v,N,B,h="function"!=typeof window.getSelection,R=1,K=CKEDITOR.tools.repeat("\u200b",7),A=new RegExp(K+"( )?","g"),j=CKEDITOR.dom.walker.invisible(1),_=function(){function x(U){return function($){var S=$.editor.createRange();return S.moveToClosestEditablePosition($.selected,U)&&$.editor.getSelection().selectRanges([S]),!1}}function O(U){return function($){var C,S=$.editor,q=S.createRange();if(!S.readOnly)return(C=q.moveToClosestEditablePosition($.selected,U))||(C=q.moveToClosestEditablePosition($.selected,!U)),C&&S.getSelection().selectRanges([q]),S.fire("saveSnapshot"),$.selected.remove(),C||(q.moveToElementEditablePosition(S.editable()),S.getSelection().selectRanges([q])),S.fire("saveSnapshot"),!1}}var I=x(),w=x(1);return{37:I,38:I,39:w,40:w,8:O(),46:O(1)}}();CKEDITOR.on("instanceCreated",function(x){function O(){var w=I.getSelection();w&&w.removeAllRanges()}var I=x.editor;I.on("contentDom",function(){function w(){(L=new CKEDITOR.dom.selection(I.getSelection())).lock()}function U(){C.removeListener("mouseup",U),g.removeListener("mouseup",U);var Z=CKEDITOR.document.$.selection,Y=Z.createRange();"None"!=Z.type&&Y.parentElement()&&Y.parentElement().ownerDocument==q.$&&Y.select()}var b,L,H,X,q=I.document,C=CKEDITOR.document,m=I.editable(),y=q.getBody(),g=q.getDocumentElement(),k=m.isInline();if((CKEDITOR.env.gecko&&m.attachListener(m,"focus",function(Z){Z.removeListener(),0!==b&&(Z=I.getSelection().getNative())&&Z.isCollapsed&&Z.anchorNode==m.$&&((Z=I.createRange()).moveToElementEditStart(m),Z.select())},null,null,-2),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){if(b&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){b=I._.previousActive&&I._.previousActive.equals(q.getActive());var Z=null!=I._.previousScrollTop&&I._.previousScrollTop!=m.$.scrollTop;CKEDITOR.env.webkit&&b&&Z&&(m.$.scrollTop=I._.previousScrollTop)}I.unlockSelection(b),b=0},null,null,-1),m.attachListener(m,"mousedown",function(){b=0}),(CKEDITOR.env.ie||CKEDITOR.env.gecko||k)&&(h?m.attachListener(m,"beforedeactivate",w,null,null,-1):m.attachListener(I,"selectionCheck",w,null,null,-1),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){var Z=L&&(L.isFake||2>L.getRanges().length);CKEDITOR.env.gecko&&!k&&Z||(I.lockSelection(L),b=1)},null,null,-1),m.attachListener(m,"mousedown",function(){b=0})),CKEDITOR.env.ie&&!k)&&(m.attachListener(m,"mousedown",function(Z){2==Z.data.$.button&&((Z=I.document.getSelection())&&Z.getType()!=CKEDITOR.SELECTION_NONE||(H=I.window.getScrollPosition()))}),m.attachListener(m,"mouseup",function(Z){2==Z.data.$.button&&H&&(I.document.$.documentElement.scrollLeft=H.x,I.document.$.documentElement.scrollTop=H.y),H=null}),"BackCompat"!=q.$.compatMode)){var G,z;if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)g.on("mousedown",function(Z){function Y(te){if(te=te.data.$,G){var oe=y.$.createTextRange();try{oe.moveToPoint(te.clientX,te.clientY)}catch{}G.setEndPoint(0>z.compareEndPoints("StartToStart",oe)?"EndToEnd":"StartToStart",oe),G.select()}}function Q(){g.removeListener("mousemove",Y),C.removeListener("mouseup",Q),g.removeListener("mouseup",Q),G.select()}if((Z=Z.data).getTarget().is("html")&&Z.$.y<g.$.clientHeight&&Z.$.x<g.$.clientWidth){G=y.$.createTextRange();try{G.moveToPoint(Z.$.clientX,Z.$.clientY)}catch{}z=G.duplicate(),g.on("mousemove",Y),C.on("mouseup",Q),g.on("mouseup",Q)}});7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&g.on("mousedown",function(Z){Z.data.getTarget().is("html")&&(C.on("mouseup",U),g.on("mouseup",U))})}(m.attachListener(m,"selectionchange",c,I),m.attachListener(m,"keyup",f,I),m.attachListener(m,"touchstart",f,I),m.attachListener(m,"touchend",f,I),CKEDITOR.env.ie&&m.attachListener(m,"keydown",function $(Z){var Y,Q;(Y=!!(Y=this.document.getActive())&&("input"===Y.getName()||"textarea"===Y.getName()))||(Q=function S(Z){return(Z=Z.getRanges()[0])&&(Z=Z.startContainer.getAscendant(function(Y){return Y.type==CKEDITOR.NODE_ELEMENT&&Y.hasAttribute("contenteditable")},!0))&&"false"===Z.getAttribute("contenteditable")?Z:null}(Y=this.getSelection(1)))&&!Q.equals(m)&&(Y.selectElement(Q),Z.data.preventDefault())},I),m.attachListener(m,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){I.forceNextSelectionCheck(),I.selectionChange(1)}),k&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko))?(m.attachListener(m,"mousedown",function(){X=1}),m.attachListener(q.getDocumentElement(),"mouseup",function(){X&&f.call(I),X=0})):m.attachListener(CKEDITOR.env.ie?m:q.getDocumentElement(),"mouseup",f,I);CKEDITOR.env.webkit&&m.attachListener(q,"keydown",function(Z){switch(Z.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:m.hasFocus&&t(m)}},null,null,-1),m.attachListener(m,"keydown",function E(x){var O={37:1,39:1,8:1,46:1};return function(I){var w=I.data.getKeystroke();if(O[w]){var U=x.getSelection(),$=U.getRanges()[0];U.isCollapsed()&&($=$[38>w?"getPreviousEditableNode":"getNextEditableNode"]())&&$.type==CKEDITOR.NODE_ELEMENT&&"false"==$.getAttribute("contenteditable")&&(!(U=U.getStartElement()).isBlockBoundary()||""!==(void 0===U.$.textContent?U.$.innerText:U.$.textContent)||a(U.getFirst())||8!==w&&46!==w||(U.remove(),x.fire("saveSnapshot")),x.getSelection().fake($),I.data.preventDefault(),I.cancel())}}}(I),null,null,-1)}),I.on("setData",function(){I.unlockSelection(),CKEDITOR.env.webkit&&O()}),I.on("contentDomUnload",function(){I.unlockSelection()}),CKEDITOR.env.ie9Compat&&I.on("beforeDestroy",O,null,null,9),I.on("dataReady",function(){delete I._.fakeSelection,delete I._.hiddenSelectionContainer,I.selectionChange(1)}),I.on("loadSnapshot",function(){var w=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),U=I.editable().getLast(w);U&&U.hasAttribute("data-cke-hidden-sel")&&(U.remove(),CKEDITOR.env.gecko&&(w=I.editable().getFirst(w))&&w.is("br")&&w.getAttribute("_moz_editor_bogus_node")&&w.remove())},null,null,100),I.on("key",function(w){if("wysiwyg"==I.mode){var U=I.getSelection();if(U.isFake){var $=_[w.data.keyCode];if($)return $({editor:I,selected:U.getSelectedElement(),selection:U,keyEvent:w})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(x){var O=x.editor;O.on("selectionChange",function(){var I=O.editable(),w=I.getCustomData("cke-fillingChar");w&&(w.getCustomData("ready")?(t(I),I.editor.fire("selectionCheck")):w.setCustomData("ready",1))},null,null,-1),O.on("beforeSetMode",function(){t(O.editable())},null,null,-1),O.on("getSnapshot",function(I){I.data&&(I.data=o(I.data))},O,null,20),O.on("toDataFormat",function(I){I.data.dataValue=o(I.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(x){(x?c:f).call(this)},CKEDITOR.editor.prototype.getSelection=function(x){return!this._.savedSelection&&!this._.fakeSelection||x?(x=this.editable())&&"wysiwyg"==this.mode&&"recreating"!==this.status?new CKEDITOR.dom.selection(x):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.getSelectedRanges=function(x){var O=this.getSelection();return O&&O.getRanges(x)||[]},CKEDITOR.editor.prototype.lockSelection=function(x){return(x=x||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!x.isLocked&&x.lock(),this._.savedSelection=x,!0)},CKEDITOR.editor.prototype.unlockSelection=function(x){var O=this._.savedSelection;return!!O&&(O.unlock(x),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var x=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return x.selectRanges([this]),x},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(x){if(x instanceof CKEDITOR.dom.selection){var O=x;x=x.root}var w,U,I=x instanceof CKEDITOR.dom.element;if(this.rev=O?O.rev:R++,this.document=x instanceof CKEDITOR.dom.document?x:x.getDocument(),this.root=I?x:this.document.getBody(),this.isLocked=0,this._={cache:{}},O)return CKEDITOR.tools.extend(this._.cache,O._.cache),this.isFake=O.isFake,this.isLocked=O.isLocked,this;if(x=this.getNative())if(x.getRangeAt)w=(U=x.rangeCount&&x.getRangeAt(0))&&new CKEDITOR.dom.node(U.commonAncestorContainer);else{try{U=x.createRange()}catch{}w=U&&CKEDITOR.dom.element.get(U.item&&U.item(0)||U.parentElement())}return(!w||w.type!=CKEDITOR.NODE_ELEMENT&&w.type!=CKEDITOR.NODE_TEXT||!this.root.equals(w)&&!this.root.contains(w))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var x,F={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:o,_createFillingCharSequenceNode:e,FILLING_CHAR_SEQUENCE:K}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=h?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:h?function(){var x=this._.cache;if(x.type)return x.type;var O=CKEDITOR.SELECTION_NONE;try{var I=this.getNative(),w=I.type;"Text"==w&&(O=CKEDITOR.SELECTION_TEXT),"Control"==w&&(O=CKEDITOR.SELECTION_ELEMENT),I.createRange().parentElement()&&(O=CKEDITOR.SELECTION_TEXT)}catch{}return x.type=O}:function(){var x=this._.cache;if(x.type)return x.type;var O=CKEDITOR.SELECTION_TEXT;if((I=this.getNative())&&I.rangeCount){if(1==I.rangeCount){var I,w=(I=I.getRangeAt(0)).startContainer;w==I.endContainer&&1==w.nodeType&&I.endOffset-I.startOffset==1&&F[w.childNodes[I.startOffset].nodeName.toLowerCase()]&&(O=CKEDITOR.SELECTION_ELEMENT)}}else O=CKEDITOR.SELECTION_NONE;return x.type=O},getRanges:(x=h?function(){function O(w){return new CKEDITOR.dom.node(w).getIndex()}var I=function(w,U){(w=w.duplicate()).collapse(U);var $=w.parentElement();if(!$.hasChildNodes())return{container:$,offset:0};for(var q,C,b,L,S=$.children,m=w.duplicate(),y=0,g=S.length-1,k=-1;y<=g;)if(q=S[k=Math.floor((y+g)/2)],m.moveToElementText(q),0<(b=m.compareEndPoints("StartToStart",w)))g=k-1;else{if(!(0>b))return{container:$,offset:O(q)};y=k+1}if(-1==k||k==S.length-1&&0>b){if(m.moveToElementText($),m.setEndPoint("StartToStart",w),m=m.text.replace(/(\r\n|\r)/g,"\n").length,S=$.childNodes,!m)return(q=S[S.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:$,offset:S.length}:{container:q,offset:q.nodeValue.length};for($=S.length;0<m&&0<$;)(C=S[--$]).nodeType==CKEDITOR.NODE_TEXT&&(L=C,m-=C.nodeValue.length);return{container:L,offset:-m}}if(m.collapse(0<b),m.setEndPoint(0<b?"StartToStart":"EndToStart",w),!(m=m.text.replace(/(\r\n|\r)/g,"\n").length))return{container:$,offset:O(q)+(0<b?0:1)};for(;0<m;)try{(C=q[0<b?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(m-=C.nodeValue.length,L=C),q=C}catch{return{container:$,offset:O(q)}}return{container:L,offset:0<b?-m:L.nodeValue.length+m}};return function(){var U=(w=this.getNative())&&w.createRange(),$=this.getType();if(!w)return[];if($==CKEDITOR.SELECTION_TEXT)return w=new CKEDITOR.dom.range(this.root),$=I(U,!0),w.setStart(new CKEDITOR.dom.node($.container),$.offset),$=I(U),w.setEnd(new CKEDITOR.dom.node($.container),$.offset),w.endContainer.getPosition(w.startContainer)&CKEDITOR.POSITION_PRECEDING&&w.endOffset<=w.startContainer.getIndex()&&w.collapse(),[w];if($==CKEDITOR.SELECTION_ELEMENT){$=[];for(var S=0;S<U.length;S++){for(var q=U.item(S),C=q.parentNode,m=0,w=new CKEDITOR.dom.range(this.root);m<C.childNodes.length&&C.childNodes[m]!=q;m++);w.setStart(new CKEDITOR.dom.node(C),m),w.setEnd(new CKEDITOR.dom.node(C),m+1),$.push(w)}return $}return[]}}():function(){var I,O=[],w=this.getNative();if(!w)return O;for(var U=0;U<w.rangeCount;U++){var $=w.getRangeAt(U);(I=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node($.startContainer),$.startOffset),I.setEnd(new CKEDITOR.dom.node($.endContainer),$.endOffset),O.push(I)}return O},function(O){var I=this._.cache,w=I.ranges;return w||(I.ranges=w=new CKEDITOR.dom.rangeList(x.call(this))),O?function T(x){for(var O=0;O<x.length;O++){var I=x[O];if(I.getCommonAncestor().isReadOnly()&&x.splice(O,1),!I.collapsed){if(I.startContainer.isReadOnly())for(var U,w=I.startContainer;w&&!((U=w.type==CKEDITOR.NODE_ELEMENT)&&w.is("body")||!w.isReadOnly());)U&&"false"==w.getAttribute("contentEditable")&&I.setStartAfter(w),w=w.getParent();w=I.startContainer,U=I.endContainer;var $=I.startOffset,S=I.endOffset,q=I.clone();w&&w.type==CKEDITOR.NODE_TEXT&&($>=w.getLength()?q.setStartAfter(w):q.setStartBefore(w)),U&&U.type==CKEDITOR.NODE_TEXT&&(S?q.setEndAfter(U):q.setEndBefore(U)),(w=new CKEDITOR.dom.walker(q)).evaluator=function(C){if(C.type==CKEDITOR.NODE_ELEMENT&&C.isReadOnly()){var m=I.clone();return I.setEndBefore(C),I.collapsed&&x.splice(O--,1),C.getPosition(q.endContainer)&CKEDITOR.POSITION_CONTAINS||(m.setStartAfter(C),m.collapsed||x.splice(O+1,0,m)),!0}return!1},w.next()}}return x}(new CKEDITOR.dom.rangeList(w.slice())):w}),getStartElement:function(){var O,x=this._.cache;if(void 0!==x.startElement)return x.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var I=this.getRanges()[0];if(I){if(I.collapsed)(O=I.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(O=O.getParent());else{for(I.optimize();O=I.startContainer,I.startOffset==(O.getChildCount?O.getChildCount():O.getLength())&&!O.isBlockBoundary();)I.setStartAfter(O);if((O=I.startContainer).type!=CKEDITOR.NODE_ELEMENT)return O.getParent();if((O=O.getChild(I.startOffset))&&O.type==CKEDITOR.NODE_ELEMENT)for(I=O.getFirst();I&&I.type==CKEDITOR.NODE_ELEMENT;)O=I,I=I.getFirst();else O=I.startContainer}O=O.$}}return x.startElement=O?new CKEDITOR.dom.element(O):null},getSelectedElement:function(){var x=this._.cache;if(void 0!==x.selectedElement)return x.selectedElement;var O=this,I=CKEDITOR.tools.tryThese(function(){return O.getNative().createRange().item(0)},function(){for(var U,$,w=O.getRanges()[0].clone(),S=2;S&&!((U=w.getEnclosedNode())&&U.type==CKEDITOR.NODE_ELEMENT&&F[U.getName()]&&($=U));S--)w.shrink(CKEDITOR.SHRINK_ELEMENT);return $&&$.$});return x.selectedElement=I?new CKEDITOR.dom.element(I):null},getSelectedText:function(){var x=this._.cache;if(void 0!==x.selectedText)return x.selectedText;var O=this.getNative();O=h?"Control"==O.type?"":O.createRange().text:O.toString();return x.selectedText=O},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(x){if(this.isLocked){if(x)var O=this.getSelectedElement(),I=this.getRanges(),w=this.isFake;this.isLocked=0,this.reset(),x&&(x=O||I[0]&&I[0].getCommonAncestor())&&x.getAscendant("body",1)&&((x=this.root.editor)&&x.plugins.tableselection&&x.plugins.tableselection.isSupportedEnvironment(x)&&p(I)?s.call(this,I):w?this.fake(O):O&&2>I.length?this.selectElement(O):this.selectRanges(I))}},reset:function(){this._.cache={},this.isFake=0;var x=this.root.editor;if(x&&x._.fakeSelection)if(this.rev==x._.fakeSelection.rev){delete x._.fakeSelection;var O=x._.hiddenSelectionContainer;if(O){var I=x.checkDirty();x.fire("lockSnapshot"),O.remove(),x.fire("unlockSnapshot"),!I&&x.resetDirty()}delete x._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=R++},selectElement:function(x){var O=new CKEDITOR.dom.range(this.root);O.setStartBefore(x),O.setEndAfter(x),this.selectRanges([O])},selectRanges:function(x){var O=this.root.editor,I=O&&O._.hiddenSelectionContainer;if(this.reset(),I){I=this.root;for(var w,U=0;U<x.length;++U)(w=x[U]).endContainer.equals(I)&&(w.endOffset=Math.min(w.endOffset,I.getChildCount()))}if(x.length)if(this.isLocked){var $=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(x),this.lock(),$&&!$.equals(this.root)&&$.focus()}else{var S,q,C;if(1==x.length&&!(C=x[0]).collapsed&&(S=C.getEnclosedNode())&&S.type==CKEDITOR.NODE_ELEMENT&&((C=C.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(q=C.getEnclosedNode())&&q.type==CKEDITOR.NODE_ELEMENT&&(S=q),"false"==S.getAttribute("contenteditable"))||(S=void 0),S)this.fake(S);else if(O&&O.plugins.tableselection&&O.plugins.tableselection.isSupportedEnvironment(O)&&p(x)&&!v&&!x[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))s.call(this,x);else{if(h){var m,y,g;if(q=CKEDITOR.dom.walker.whitespaces(!0),S=/\ufeff|\u00a0/,C={table:1,tbody:1,tr:1},1<x.length&&(O=x[x.length-1],x[0].setEnd(O.endContainer,O.endOffset)),x=(O=x[0]).collapsed,(I=O.getEnclosedNode())&&I.type==CKEDITOR.NODE_ELEMENT&&I.getName()in F&&(!I.is("a")||!I.getText()))try{return(g=I.$.createControlRange()).addElement(I.$),void g.select()}catch{}(O.startContainer.type==CKEDITOR.NODE_ELEMENT&&O.startContainer.getName()in C||O.endContainer.type==CKEDITOR.NODE_ELEMENT&&O.endContainer.getName()in C)&&(O.shrink(CKEDITOR.NODE_ELEMENT,!0),x=O.collapsed),C=(g=O.createBookmark()).startNode,x||($=g.endNode),(g=O.document.$.body.createTextRange()).moveToElementText(C.$),g.moveStart("character",1),$?((S=O.document.$.body.createTextRange()).moveToElementText($.$),g.setEndPoint("EndToEnd",S),g.moveEnd("character",-1)):(m=C.getNext(q),y=C.hasAscendant("pre"),m=!(m&&m.getText&&m.getText().match(S))&&(y||!C.hasPrevious()||C.getPrevious().is&&C.getPrevious().is("br")),(y=O.document.createElement("span")).setHtml("&#65279;"),y.insertBefore(C),m&&O.document.createText("\ufeff").insertBefore(C)),O.setStartBefore(C),C.remove(),x?(m?(g.moveStart("character",-1),g.select(),O.document.$.selection.clear()):g.select(),O.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START),y.remove()):(O.setEndBefore($),$.remove(),g.select())}else{if(!($=this.getNative()))return;for(this.removeAllRanges(),g=0;g<x.length;g++)if(g<x.length-1&&(m=x[g],y=x[g+1],(S=m.clone()).setStart(m.endContainer,m.endOffset),S.setEnd(y.startContainer,y.startOffset),!S.collapsed&&(S.shrink(CKEDITOR.NODE_ELEMENT,!0),O=S.getCommonAncestor(),S=S.getEnclosedNode(),O.isReadOnly()||S&&S.isReadOnly())))y.setStart(m.startContainer,m.startOffset),x.splice(g--,1);else{O=x[g],y=this.document.$.createRange(),O.collapsed&&CKEDITOR.env.webkit&&i(O)&&(S=e(this.root),O.insertNode(S),(m=S.getNext())&&!S.getPrevious()&&m.type==CKEDITOR.NODE_ELEMENT&&"br"==m.getName()?(t(this.root),O.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)):O.moveToPosition(S,CKEDITOR.POSITION_AFTER_END)),y.setStart(O.startContainer.$,O.startOffset);try{y.setEnd(O.endContainer.$,O.endOffset)}catch(k){if(!(0<=k.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw k;O.collapse(1),y.setEnd(O.endContainer.$,O.endOffset)}$.addRange(y)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(x,O){var I=this.root.editor;void 0===O&&x.hasAttribute("aria-label")&&(O=x.getAttribute("aria-label")),this.reset(),function d(x,O){var I=O&&CKEDITOR.tools.htmlEncode(O)||"&nbsp;";I=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+I+"</div>",x.document),x.fire("lockSnapshot"),x.editable().append(I);var w=x.getSelection(1),U=x.createRange(),$=w.root.on("selectionchange",function(S){S.cancel()},null,null,0);U.setStartAt(I,CKEDITOR.POSITION_AFTER_START),U.setEndAt(I,CKEDITOR.POSITION_BEFORE_END),w.selectRanges([U]),$.removeListener(),x.fire("unlockSnapshot"),x._.hiddenSelectionContainer=I}(I,O);var w=this._.cache,U=new CKEDITOR.dom.range(this.root);U.setStartBefore(x),U.setEndAfter(x),w.ranges=new CKEDITOR.dom.rangeList(U),w.selectedElement=w.startElement=x,w.type=CKEDITOR.SELECTION_ELEMENT,w.selectedText=w.nativeSel=null,this.isFake=1,this.rev=R++,I._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var x=this.getCommonAncestor();return x&&x.type==CKEDITOR.NODE_TEXT&&(x=x.getParent()),!(!x||!x.data("cke-hidden-sel"))},isInTable:function(x){return p(this.getRanges(),x)},isCollapsed:function(){var x=this.getRanges();return 1===x.length&&x[0].collapsed},createBookmarks:function(x){return x=this.getRanges().createBookmarks(x),this.isFake&&(x.isFake=1),x},createBookmarks2:function(x){return x=this.getRanges().createBookmarks2(x),this.isFake&&(x.isFake=1),x},selectBookmarks:function(x){for(var I,O=[],w=0;w<x.length;w++){var U=new CKEDITOR.dom.range(this.root);U.moveToBookmark(x[w]),O.push(U)}return x.isFake&&((I=p(O)?O[0]._getTableElement():O[0].getEnclosedNode())&&I.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),x.isFake=0)),x.isFake&&!p(O)?this.fake(I):this.selectRanges(O),this},getCommonAncestor:function(){var x=this.getRanges();return x.length?x[0].startContainer.getCommonAncestor(x[x.length-1].endContainer):null},scrollIntoView:function(){this.getType()!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var x=this.getNative();try{x&&x[h?"empty":"removeAllRanges"]()}catch{}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(S,q){for(var C,m;(S=S.getParent())&&!S.equals(q);)if(S.getAttribute("data-nostyle"))C=S;else if(!m){var y=S.getAttribute("contentEditable");"false"==y?C=S:"true"==y&&(m=1)}return C}function p(S,q,C,m){return(S.getPosition(q)|m)==m&&(!C.childRule||C.childRule(S))}function u(S){var q=S.document;if(S.collapsed)q=R(this,q),S.insertNode(q),S.moveToPosition(q,CKEDITOR.POSITION_BEFORE_END);else{var y,C=this.element,m=this._.definition,k=(g=m.ignoreReadonly)||m.includeReadonly;null==k&&(k=S.root.getCustomData("cke_includeReadonly"));var b=CKEDITOR.dtd[C];b||(y=!0,b=CKEDITOR.dtd.span),S.enlarge(CKEDITOR.ENLARGE_INLINE,1),S.trim();var X,L=S.createBookmark(),H=L.startNode,G=L.endNode,z=H;if(!g){var g=a(H,Z=S.getCommonAncestor()),Z=a(G,Z);g&&(z=g.getNextSourceNode(!0)),Z&&(G=Z)}for(z.getPosition(G)==CKEDITOR.POSITION_FOLLOWING&&(z=0);z;){if(g=!1,z.equals(G))z=null,g=!0;else{Z=(Y=z.type==CKEDITOR.NODE_ELEMENT?z.getName():null)&&"false"==z.getAttribute("contentEditable");var Q=Y&&-1!==CKEDITOR.tools.array.indexOf(CKEDITOR.style.unstylableElements,Y);Q=Y&&(z.getAttribute("data-nostyle")||Q);if(Y&&z.data("cke-bookmark")||z.type===CKEDITOR.NODE_COMMENT){z=z.getNextSourceNode(!0);continue}if(Z&&k&&CKEDITOR.dtd.$block[Y])for(var oe=void 0,ee=0,D=(se=(te=s(D=z)).length)&&new CKEDITOR.dom.range(D.getDocument());ee<se;++ee){oe=te[ee];var P=CKEDITOR.filter.instances[oe.data("cke-filter")];(!P||P.check(this))&&(D.selectNodeContents(oe),u.call(this,D))}if(te=Y?!b[Y]||Q||Z&&!k?0:p(z,G,m,U):1){if(te=m,se=C,ee=y,!(oe=z.getParent())||!(oe.getDtd()||CKEDITOR.dtd.span)[se]&&!ee||te.parentRule&&!te.parentRule(oe))g=!0;else if(X||Y&&CKEDITOR.dtd.$removeEmpty[Y]&&(z.getPosition(G)|U)!=U||(X=S.clone()).setStartBefore(z),(Y=z.type)==CKEDITOR.NODE_TEXT||Z||Y==CKEDITOR.NODE_ELEMENT&&!z.getChildCount()){for(var M,Y=z;(g=!Y.getNext(I))&&b[(M=Y.getParent()).getName()]&&p(M,H,m,$);)Y=M;X.setEndAfter(Y)}}else g=!0;z=z.getNextSourceNode(Q||Z)}if(g&&X&&!X.collapsed){Z=(g=R(this,q)).hasAttributes(),Q=X.getCommonAncestor(),Y={};for(var W,V,J,te={},se=(oe={},{});g&&Q;){if(Q.getName()==C){for(W in m.attributes)!se[W]&&(J=Q.getAttribute(V))&&(g.getAttribute(W)==J?te[W]=1:se[W]=1);for(V in m.styles)!oe[V]&&(J=Q.getStyle(V))&&(g.getStyle(V)==J?Y[V]=1:oe[V]=1)}Q=Q.getParent()}for(W in te)g.removeAttribute(W);for(V in Y)g.removeStyle(V);Z&&!g.hasAttributes()&&(g=null),g?(X.extractContents().appendTo(g),X.insertNode(g),E.call(this,g),g.mergeSiblings(),CKEDITOR.env.ie||g.$.normalize()):(g=new CKEDITOR.dom.element("span"),X.extractContents().appendTo(g),X.insertNode(g),E.call(this,g),g.remove(!0)),X=null}}S.moveToBookmark(L),S.shrink(CKEDITOR.SHRINK_TEXT),S.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function r(S){function q(){for(var X=new CKEDITOR.dom.elementPath(m.getParent()),Z=new CKEDITOR.dom.elementPath(G.getParent()),Y=null,Q=null,te=0;te<X.elements.length;te++){var oe=X.elements[te];if(oe==X.block||oe==X.blockLimit)break;z.checkElementRemovable(oe,!0)&&(Y=oe)}for(te=0;te<Z.elements.length&&((oe=Z.elements[te])!=Z.block&&oe!=Z.blockLimit);te++)z.checkElementRemovable(oe,!0)&&(Q=oe);Q&&G.breakParent(Q),Y&&m.breakParent(Y)}S.enlarge(CKEDITOR.ENLARGE_INLINE,1);var C=S.createBookmark(),m=C.startNode,y=this._.definition.alwaysRemoveElement;if(S.collapsed){for(var k,L,g=new CKEDITOR.dom.elementPath(m.getParent(),S.root),b=0;b<g.elements.length&&(L=g.elements[b])&&L!=g.block&&L!=g.blockLimit;b++)if(this.checkElementRemovable(L)){var H;!y&&S.collapsed&&(S.checkBoundaryOfElement(L,CKEDITOR.END)||(H=S.checkBoundaryOfElement(L,CKEDITOR.START)))?(k=L).match=H?"start":"end":(L.mergeSiblings(),L.is(this.element)?d.call(this,L):T(L,v(this)[L.getName()]))}if(k){for(y=m,b=0;!(L=g.elements[b]).equals(k);b++)L.match||((L=L.clone()).append(y),y=L);y["start"==k.match?"insertBefore":"insertAfter"](k)}}else{var G=C.endNode,z=this;for(q(),g=m;!g.equals(G);)k=g.getNextSourceNode(),g.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(g)&&(g.getName()==this.element?d.call(this,g):T(g,v(this)[g.getName()]),k.type==CKEDITOR.NODE_ELEMENT&&k.contains(m)&&(q(),k=m.getNext())),g=k}S.moveToBookmark(C),S.shrink(CKEDITOR.NODE_ELEMENT,!0)}function s(S){var q=[];return S.forEach(function(C){if("true"==C.getAttribute("contenteditable"))return q.push(C),!1},CKEDITOR.NODE_ELEMENT,!0),q}function c(S){var q=S.getEnclosedNode()||S.getCommonAncestor(!1,!0);(S=new CKEDITOR.dom.elementPath(q,S.root).contains(this.element,1))&&!S.isReadOnly()&&K(S,this)}function f(S){var q=S.getCommonAncestor(!0,!0);if(S=new CKEDITOR.dom.elementPath(q,S.root).contains(this.element,1)){var C=(q=this._.definition).attributes;if(C)for(var m in C)S.removeAttribute(m,C[m]);if(q.styles)for(var y in q.styles)q.styles.hasOwnProperty(y)&&S.removeStyle(y)}}function l(S){var q=S.createBookmark(!0),C=S.createIterator();C.enforceRealBlocks=!0,this._.enterMode&&(C.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var m,y=S.document;m=C.getNextParagraph();)!m.isReadOnly()&&(!C.activeFilter||C.activeFilter.check(this))&&i(m,R(this,y,m));S.moveToBookmark(q)}function n(S){var m,y,q=S.createBookmark(1),C=S.createIterator();for(C.enforceRealBlocks=!0,C.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;m=C.getNextParagraph();)this.checkElementRemovable(m)&&(m.is("pre")?((y=this._.enterMode==CKEDITOR.ENTER_BR?null:S.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&m.copyAttributes(y),i(m,y)):d.call(this,m));S.moveToBookmark(q)}function i(S,q){(C=!q)&&(q=S.getDocument().createElement("div"),S.copyAttributes(q));var C,b,m=q&&q.is("pre"),y=S.is("pre"),g=!m&&y;if(m&&!y){if(y=q,(g=S.getBogus())&&g.remove(),g=(g=(g=(g=t(g=S.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var k=S.getDocument().createElement("div");k.append(y),y.$.outerHTML="<pre>"+g+"</pre>",y.copyAttributes(k.getFirst()),y=k.getFirst().remove()}else y.setHtml(g);q=y}else g?q=function o(S,q){var C;1<S.length&&(C=new CKEDITOR.dom.documentFragment(q.getDocument()));for(var m=0;m<S.length;m++){var y=t(y=(y=S[m]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");y=t(y,/\n$/,""),y=t(y,/^[ \t]+|[ \t]+$/g,function(k,b){return 1==k.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",k.length-1):CKEDITOR.tools.repeat("&nbsp;",k.length-1)+" "}),y=(y=y.replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(k){return CKEDITOR.tools.repeat("&nbsp;",k.length-1)+" "});if(C){var g=q.clone();g.setHtml(y),C.append(g)}else q.setHtml(y)}return C||q}(C?[S.getHtml()]:function e(S){var q=[];return t(S.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(C,m,y){return m+"</pre>"+y+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(C,m){q.push(m)}),q}(S),q):S.moveChildren(q);(q.replace(S),m)?(b=(C=q).getPrevious(w))&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("pre")&&(m=t(b.getHtml(),/\n$/,"")+"\n\n"+t(C.getHtml(),/^\n/,""),CKEDITOR.env.ie?C.$.outerHTML="<pre>"+m+"</pre>":C.setHtml(m),b.remove()):C&&h(q)}function t(S,q,C){var m="",y="";return S=S.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(g,k,b){return k&&(m=k),b&&(y=b),""}),m+S.replace(q,C)+y}function d(S,q){var k,C=(m=this._.definition).attributes,m=m.styles,y=v(this)[S.getName()],g=CKEDITOR.tools.isEmpty(C)&&CKEDITOR.tools.isEmpty(m);for(k in C)("class"!=k&&!this._.definition.fullMatch||S.getAttribute(k)==N(k,C[k]))&&(q&&"data-"==k.slice(0,5)||(g=S.hasAttribute(k),S.removeAttribute(k)));for(var b in m)this._.definition.fullMatch&&S.getStyle(b)!=N(b,m[b],!0)||(g=g||!!S.getStyle(b),S.removeStyle(b));T(S,y,_[S.getName()]),g&&(this._.definition.alwaysRemoveElement?h(S,1):!CKEDITOR.dtd.$block[S.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!S.hasAttributes()?h(S):S.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function E(S){for(var m,q=v(this),C=S.getElementsByTag(this.element),y=C.count();0<=--y;)(m=C.getItem(y)).isReadOnly()||d.call(this,m,!0);for(var g in q)if(g!=this.element)for(y=(C=S.getElementsByTag(g)).count()-1;0<=y;y--)(m=C.getItem(y)).isReadOnly()||T(m,q[g])}function T(S,q,C){if(q=q&&q.attributes)for(var m=0;m<q.length;m++){var g,y=q[m][0];if(g=S.getAttribute(y)){var k=q[m][1];(null===k||k.test&&k.test(g)||"string"==typeof k&&g==k)&&S.removeAttribute(y)}}C||h(S)}function h(S,q){if(!S.hasAttributes()||q)if(CKEDITOR.dtd.$block[S.getName()]){var C=S.getPrevious(w),m=S.getNext(w);!C||C.type!=CKEDITOR.NODE_TEXT&&C.isBlockBoundary({br:1})||S.append("br",1),!m||m.type!=CKEDITOR.NODE_TEXT&&m.isBlockBoundary({br:1})||S.append("br"),S.remove(!0)}else C=S.getFirst(),m=S.getLast(),S.remove(!0),C&&(C.type==CKEDITOR.NODE_ELEMENT&&C.mergeSiblings(),m&&!C.equals(m)&&m.type==CKEDITOR.NODE_ELEMENT&&m.mergeSiblings())}function R(S,q,C){var m;return"*"==(m=S.element)&&(m="span"),m=new CKEDITOR.dom.element(m,q),C&&C.copyAttributes(m),m=K(m,S),q.getCustomData("doc_processing_style")&&m.hasAttribute("id")?m.removeAttribute("id"):q.setCustomData("doc_processing_style",1),m}function K(S,q){var C=(m=q._.definition).attributes,m=CKEDITOR.style.getStyleText(m);if(C)for(var y in C)S.setAttribute(y,C[y]);return m&&S.setAttribute("style",m),S.getDocument().removeCustomData("doc_processing_style"),S}function A(S,q){for(var C in S)S[C]=S[C].replace(O,function(m,y){return q[y]})}function v(S){if(S._.overrides)return S._.overrides;var q=S._.overrides={},C=S._.definition.overrides;if(C){CKEDITOR.tools.isArray(C)||(C=[C]);for(var m=0;m<C.length;m++){var g,k;if("string"==typeof(y=C[m])?g=y.toLowerCase():(g=y.element?y.element.toLowerCase():S.element,k=y.attributes),y=q[g]||(q[g]={}),k){var b,y=y.attributes=y.attributes||[];for(b in k)y.push([b.toLowerCase(),k[b]])}}}return q}function N(S,q,C){var m=new CKEDITOR.dom.element("span");return m[C?"setStyle":"setAttribute"](S,q),m[C?"getStyle":"getAttribute"](S)}function B(S,q){function C(y,g){return"font-family"==g.toLowerCase()?y.replace(/["']/g,""):y}for(var m in"string"==typeof S&&(S=CKEDITOR.tools.parseCssText(S)),"string"==typeof q&&(q=CKEDITOR.tools.parseCssText(q,!0)),S)if(!(m in q)||C(q[m],m)!=C(S[m],m)&&"inherit"!=S[m]&&"inherit"!=q[m])return!1;return!0}function j(S,q,C){var m=S.getRanges();q=q?this.removeFromRange:this.applyToRange;for(var y,g=m.createIterator();y=g.getNextRange();)q.call(this,y,C);S.selectRanges(m)}var _={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},F={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},x=/\s*(?:;\s*|$)/,O=/#\((.+?)\)/g,I=CKEDITOR.dom.walker.bookmark(0,1),w=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(S,q){if("string"==typeof S.type)return new CKEDITOR.style.customHandlers[S.type](S);var C=S.attributes;C&&C.style&&(S.styles=CKEDITOR.tools.extend({},S.styles,CKEDITOR.tools.parseCssText(C.style)),delete C.style),q&&(A((S=CKEDITOR.tools.clone(S)).attributes,q),A(S.styles,q)),C=this.element=S.element?"string"==typeof S.element?S.element.toLowerCase():S.element:"*",this.type=S.type||(_[C]?CKEDITOR.STYLE_BLOCK:F[C]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:S}},CKEDITOR.style.prototype={apply:function(S){if(S instanceof CKEDITOR.dom.document)return j.call(this,S.getSelection());if(this.checkApplicable(S.elementPath(),S)){var q=this._.enterMode;q||(this._.enterMode=S.activeEnterMode),j.call(this,S.getSelection(),0,S),this._.enterMode=q}},remove:function(S){if(S instanceof CKEDITOR.dom.document)return j.call(this,S.getSelection(),1);if(this.checkApplicable(S.elementPath(),S)){var q=this._.enterMode;q||(this._.enterMode=S.activeEnterMode),j.call(this,S.getSelection(),1,S),this._.enterMode=q}},applyToRange:function(S){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?u:this.type==CKEDITOR.STYLE_BLOCK?l:this.type==CKEDITOR.STYLE_OBJECT?c:null,this.applyToRange(S)},removeFromRange:function(S){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?r:this.type==CKEDITOR.STYLE_BLOCK?n:this.type==CKEDITOR.STYLE_OBJECT?f:null,this.removeFromRange(S)},applyToObject:function(S){K(S,this)},checkActive:function(S,q){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(S.block||S.blockLimit,!0,q);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var y,C=S.elements,m=0;m<C.length;m++)if(y=C[m],this.type!=CKEDITOR.STYLE_INLINE||y!=S.block&&y!=S.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var g=y.getName();if(!("string"==typeof this.element?g==this.element:g in this.element))continue}if(this.checkElementRemovable(y,!0,q))return!0}}return!1},checkApplicable:function(S,q,C){if(q&&q instanceof CKEDITOR.filter&&(C=q),C&&!C.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!S.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!S.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(S,q){var C=this._.definition;if(!S||!C.ignoreReadonly&&S.isReadOnly())return!1;var m=S.getName();if("string"==typeof this.element?m==this.element:m in this.element){if(!q&&!S.hasAttributes())return!0;if(m=C._AC)C=m;else{m={};var y=0,g=C.attributes;if(g)for(var k in g)y++,m[k]=g[k];(k=CKEDITOR.style.getStyleText(C))&&(m.style||y++,m.style=k),m._length=y,C=C._AC=m}if(!C._length)return!0;for(var b in C)if("_length"!=b)if(m=S.getAttribute(b)||"","style"==b?B(C[b],m):C[b]==m){if(!q)return!0}else if(q)return!1;if(q)return!0}return!1},checkElementRemovable:function(S,q,C){if(this.checkElementMatch(S,q,C))return!0;if(q=v(this)[S.getName()]){var m;if(!(q=q.attributes))return!0;for(C=0;C<q.length;C++)if(m=q[C][0],m=S.getAttribute(m)){var y=q[C][1];if(null===y)return!0;if("string"==typeof y){if(m==y)return!0}else if(y.test(m))return!0}}return!1},buildPreview:function(S){var q=this._.definition,m=[],C=q.element;"bdo"==C&&(C="span");m=["<",C];var y=q.attributes;if(y)for(var g in y)m.push(" ",g,'="',y[g],'"');return(y=CKEDITOR.style.getStyleText(q))&&m.push(' style="',y,'"'),m.push(">",S||q.name,"</",C,">"),m.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(S){if(q=S._ST)return q;var q=S.styles,C=S.attributes&&S.attributes.style||"",m="";for(var y in C.length&&(C=C.replace(x,";")),q){var g=q[y],k=(y+":"+g).replace(x,";");"inherit"==g?m+=k:C+=k}return C.length&&(C=CKEDITOR.tools.normalizeCssText(C,!0)),S._ST=C+m},CKEDITOR.style.customHandlers={},CKEDITOR.style.unstylableElements=[],CKEDITOR.style.addCustomHandler=function(S){var q=function(C){this._={definition:C},this.setup&&this.setup(C)};return q.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},S,!0),this.customHandlers[S.type]=q};var U=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,$=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,p){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,p,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,p,u){CKEDITOR.stylesSet.addExternal(a,p,""),CKEDITOR.stylesSet.load(a,u)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,p){var u=this._.styleStateChangeCallbacks;u||(u=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(r){for(var s=0;s<u.length;s++){var c=u[s],f=c.style.checkActive(r.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;c.fn.call(this,f)}})),u.push({style:a,fn:p})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var p=this;if(!1===(u=p.config.stylesCombo_stylesSet||p.config.stylesSet))a(null);else if(u instanceof Array)p._.stylesDefinitions=u,a(u);else{u||(u="default");var u,r=(u=u.split(":"))[0];CKEDITOR.stylesSet.addExternal(r,u[1]?u.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(r,function(c){p._.stylesDefinitions=c[r],a(p._.stylesDefinitions)})}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var a=CKEDITOR.getUrl("vendor/promise.js");if("function"==typeof window.define&&window.define.amd&&"function"==typeof window.require)return window.require([a],function(p){CKEDITOR.tools.promise=p});CKEDITOR.scriptLoader.load(a,function(p){return p?typeof window.ES6Promise<"u"?CKEDITOR.tools.promise=ES6Promise:void 0:CKEDITOR.error("no-vendor-lib",{path:a})})}}(),function(){var p=!0,u=!1;CKEDITOR.dom.selection.setupEditorOptimization=function(r){r.on("selectionCheck",function(s){s.data&&!u&&s.data.optimizeInElementEnds(),u=!1}),r.on("contentDom",function(){var s=r.editable();s&&(s.attachListener(s,"keydown",function(c){this._.shiftPressed=c.data.$.shiftKey},this),s.attachListener(s,"keyup",function(c){this._.shiftPressed=c.data.$.shiftKey},this))})},CKEDITOR.dom.selection.prototype.optimizeInElementEnds=function(){var c,r=this.getRanges()[0],s=this.root.editor;if(this.root.editor._.shiftPressed||this.isFake||r.isCollapsed||r.startContainer.equals(r.endContainer)||(r.endContainer.is?r.endContainer.is("li"):r.endContainer.getParent().is&&r.endContainer.getParent().is("li")))c=!1;else if(0===r.endOffset)c=!0;else{c=r.startContainer.type===CKEDITOR.NODE_TEXT;var f=r.endContainer.type===CKEDITOR.NODE_TEXT,l=c?r.startContainer.getLength():r.startContainer.getChildCount();c=r.startOffset===l||c^f}c&&(c=r.clone(),r.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!CKEDITOR.env.webkit}),p=!1,function a(r,s,c){r.once("selectionCheck",function(f){if(!p){var l=f.data.getRanges()[0];c.equals(l)?f.cancel():s.equals(l)&&(u=!0)}},null,null,-1)}(s,r,c),r.select(),p=!0)}}(),function(){function a(c,f){return u(c)?c=Math.round(f*(parseFloat(c)/100)):("string"==typeof c&&c.match(/^\d+$/gm)||"string"==typeof c&&c.match(/^\d+(?:deg)?$/gm))&&(c=parseInt(c,10)),c}function p(c,f){return u(c)?c=f*(parseFloat(c)/100):"string"==typeof c&&c.match(/^\d?\.\d+/gm)&&(c=parseFloat(c)),c}function u(c){return"string"==typeof c&&c.match(/^((\d*\.\d+)|(\d+))%{1}$/gm)}function r(c,f,l){return!isNaN(c)&&c>=f&&c<=l}function s(c){return 1==(c=c.toString(16)).length?"0"+c:c}CKEDITOR.tools.color=CKEDITOR.tools.createClass({$:function(c,f){this._.initialColorCode=c,this._.defaultValue=f,this._.parseInput(c)},proto:{getHex:function(){if(!this._.isValidColor)return this._.defaultValue;var c=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha);return this._.formatHexString(c[0],c[1],c[2])},getHexWithAlpha:function(){if(!this._.isValidColor)return this._.defaultValue;var c=Math.round(this._.alpha*CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE);return this._.formatHexString(this._.red,this._.green,this._.blue,c)},getRgb:function(){if(!this._.isValidColor)return this._.defaultValue;var c=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha);return this._.formatRgbString("rgb",c[0],c[1],c[2])},getRgba:function(){return this._.isValidColor?this._.formatRgbString("rgba",this._.red,this._.green,this._.blue,this._.alpha):this._.defaultValue},getHsl:function(){var c=0===this._.alpha||1===this._.alpha;return this._.isValidColor?(this._.type===CKEDITOR.tools.color.TYPE_HSL&&c?c=[this._.hue,this._.saturation,this._.lightness]:(c=this._.blendAlphaColor(this._.red,this._.green,this._.blue,this._.alpha),c=this._.rgbToHsl(c[0],c[1],c[2])),this._.formatHslString("hsl",c[0],c[1],c[2])):this._.defaultValue},getHsla:function(){var c;return this._.isValidColor?(c=this._.type===CKEDITOR.tools.color.TYPE_HSL?[this._.hue,this._.saturation,this._.lightness]:this._.rgbToHsl(this._.red,this._.green,this._.blue),this._.formatHslString("hsla",c[0],c[1],c[2],this._.alpha)):this._.defaultValue},getInitialValue:function(){return this._.initialColorCode}},_:{initialColorCode:"",isValidColor:!0,type:0,hue:0,saturation:0,lightness:0,red:0,green:0,blue:0,alpha:1,blendAlphaColor:function(c,f,l,n){return CKEDITOR.tools.array.map([c,f,l],function(i){return Math.round(CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE-n*(CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE-i))})},formatHexString:function(c,f,l,n){return c="#"+s(c)+s(f)+s(l),void 0!==n&&(c+=s(n)),c.toUpperCase()},formatRgbString:function(c,f,l,n,i){return f=[f,l,n],void 0!==i&&f.push(i),c+"("+f.join(",")+")"},formatHslString:function(c,f,l,n,i){return c+"("+f+","+l+"%,"+n+"%"+(void 0!==i?","+i:"")+")"},parseInput:function(c){if("string"!=typeof c)this._.isValidColor=!1;else{c=CKEDITOR.tools.trim(c),(f=this._.matchStringToNamedColor(c))&&(c=f);var f=this._.extractColorChannelsFromHex(c),l=this._.extractColorChannelsFromRgba(c);c=this._.extractColorChannelsFromHsla(c),(c=f||l||c)?(this._.type=c.type,this._.red=c.red,this._.green=c.green,this._.blue=c.blue,this._.alpha=c.alpha,c.type===CKEDITOR.tools.color.TYPE_HSL&&(this._.hue=c.hue,this._.saturation=c.saturation,this._.lightness=c.lightness)):this._.isValidColor=!1}},matchStringToNamedColor:function(c){return CKEDITOR.tools.color.namedColors[c.toLowerCase()]||null},extractColorChannelsFromHex:function(c){if(-1===c.indexOf("#")&&(c="#"+c),c.match(CKEDITOR.tools.color.hex3CharsRegExp)&&(c=this._.hex3ToHex6(c)),c.match(CKEDITOR.tools.color.hex4CharsRegExp)&&(c=this._.hex4ToHex8(c)),!c.match(CKEDITOR.tools.color.hex6CharsRegExp)&&!c.match(CKEDITOR.tools.color.hex8CharsRegExp))return null;var f=1;return(c=c.split(""))[7]&&c[8]&&(f=parseInt(c[7]+c[8],16),f/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,f=Number(f.toFixed(1))),{type:CKEDITOR.tools.color.TYPE_RGB,red:parseInt(c[1]+c[2],16),green:parseInt(c[3]+c[4],16),blue:parseInt(c[5]+c[6],16),alpha:f}},extractColorChannelsFromRgba:function(c){var f=this._.extractColorChannelsByPattern(c,CKEDITOR.tools.color.rgbRegExp);if(!f||3>f.length||4<f.length)return null;var l=4===f.length;c=a(f[0],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE);var n=a(f[1],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE),i=a(f[2],CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE),e=1;return l&&(e=p(f[3],CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)),f={type:CKEDITOR.tools.color.TYPE_RGB,red:c,green:n,blue:i,alpha:e},this._.areColorChannelsValid(c,n,i,e)?f:null},extractColorChannelsFromHsla:function(c){var f=this._.extractColorChannelsByPattern(c,CKEDITOR.tools.color.hslRegExp);if(!f||3>f.length||4<f.length)return null;var l=4===f.length,n=a(f[0],CKEDITOR.tools.color.MAX_HUE_CHANNEL_VALUE),i=p(f[1],CKEDITOR.tools.color.MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE),e=p(f[2],CKEDITOR.tools.color.MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE),t=1;return c=this._.hslToRgb(n,i,e),l&&(t=p(f[3],CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)),c.push(t),f={type:CKEDITOR.tools.color.TYPE_HSL,red:c[0],green:c[1],blue:c[2],alpha:c[3],hue:n,saturation:Math.round(100*i),lightness:Math.round(100*e)},this._.areColorChannelsValid(c[0],c[1],c[2],c[3])?f:null},hex3ToHex6:function(c){return"#"+(c=c.split(""))[1]+c[1]+c[2]+c[2]+c[3]+c[3]},hex4ToHex8:function(c){return this._.hex3ToHex6(c.substr(0,4))+CKEDITOR.tools.repeat(c[4],2)},extractColorChannelsByPattern:function(c,f){var l=c.match(f);if(!l)return null;var n=-1===l[1].indexOf(",")?/\s/:",";n=l[1].split(n),n=CKEDITOR.tools.array.reduce(n,function(i,e){var t=CKEDITOR.tools.trim(e);return 0===t.length?i:i.concat([t])},[]);return l[2]&&(l=CKEDITOR.tools.trim(l[2].replace(/[\/,]/,"")),n.push(l)),n},areColorChannelsValid:function(c,f,l,n){return r(c,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&r(f,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&r(l,0,CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)&&r(n,0,CKEDITOR.tools.color.MAX_ALPHA_CHANNEL_VALUE)},hslToRgb:function(c,f,l){var n=function(i){var e=(i+c/30)%12;return i=f*Math.min(l,1-l),e=Math.min(e-3,9-e,1),e=Math.max(-1,e),Math.round((l-i*e)*CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE)};return[n(0),n(8),n(4)]},rgbToHsl:function(c,f,l){c/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,f/=CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE;var n=l/CKEDITOR.tools.color.MAX_RGB_CHANNEL_VALUE,i=Math.max(c,f,n),e=Math.min(c,f,n);l=i-e;var t=0;switch(i){case c:t=(f-n)/l%6;break;case f:t=(n-c)/l+2;break;case n:t=(c-f)/l+4}return c=0===l?0:60*t,f=(i+e)/2,i=0,1!==f&&0!==f&&(i=l/(1-Math.abs(2*f-1))),[c=Math.round(c),i=Math.round(100*i),f=Math.round(100*f)]}},statics:{TYPE_RGB:1,TYPE_HSL:2,MAX_RGB_CHANNEL_VALUE:255,MAX_ALPHA_CHANNEL_VALUE:1,MAX_HUE_CHANNEL_VALUE:360,MAX_SATURATION_LIGHTNESS_CHANNEL_VALUE:1,hex3CharsRegExp:/#([0-9a-f]{3}$)/gim,hex4CharsRegExp:/#([0-9a-f]{4}$)/gim,hex6CharsRegExp:/#([0-9a-f]{6}$)/gim,hex8CharsRegExp:/#([0-9a-f]{8}$)/gim,rgbRegExp:/rgba?\(([.,\d\s%]*)(\s*\/\s*[\d.%]+)?\s*\)/i,hslRegExp:/hsla?\((\s*(?:[.\d]+(?:deg)?)(?:\s*,?\s*[.\d]+%){2})((?:(?:\s*\/\s*)|(?:\s*,\s*))[\d.]+%?)?\s*\)/i,namedColors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}}}),CKEDITOR.tools.style.parse._colors=CKEDITOR.tools.color.namedColors}(),CKEDITOR.dom.comment=function(a,p){"string"==typeof a&&(a=(p?p.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var u,a={},p={};for(u in CKEDITOR.dtd.$blockLimit)u in CKEDITOR.dtd.$list||(a[u]=1);for(u in CKEDITOR.dtd.$block)u in CKEDITOR.dtd.$blockLimit||u in CKEDITOR.dtd.$empty||(p[u]=1);CKEDITOR.dom.elementPath=function(r,s){var i,c=null,f=null,l=[],n=r;s=s||r.getDocument().getBody(),n||(n=s);do{if(n.type==CKEDITOR.NODE_ELEMENT){if(l.push(n),!this.lastElement&&(this.lastElement=n,n.is(CKEDITOR.dtd.$object)||"false"==n.getAttribute("contenteditable")))continue;if(n.equals(s))break;if(!f&&(i=n.getName(),"true"==n.getAttribute("contenteditable")?f=n:!c&&p[i]&&(c=n),a[i])){if(i=!c&&"div"==i){e:{for(var e=0,t=(i=n.getChildren()).count();e<t;e++){var o=i.getItem(e);if(o.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[o.getName()]){i=!0;break e}}i=!1}i=!i}i?c=n:f=n}}}while(n=n.getParent());f||(f=s),this.block=c,this.blockLimit=f,this.root=s,this.elements=l}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var p=this.elements;if(!(a=a&&a.elements)||p.length!=a.length)return!1;for(var u=0;u<p.length;u++)if(!p[u].equals(a[u]))return!1;return!0},contains:function(a,p,u){var s,r=0;"string"==typeof a&&(s=function(l){return l.getName()==a}),a instanceof CKEDITOR.dom.element?s=function(l){return l.equals(a)}:CKEDITOR.tools.isArray(a)?s=function(l){return-1<CKEDITOR.tools.indexOf(a,l.getName())}:"function"==typeof a?s=a:"object"==typeof a&&(s=function(l){return l.getName()in a});var c=this.elements,f=c.length;for(p&&(u?r+=1:--f),u&&(c=Array.prototype.slice.call(c,0)).reverse();r<f;r++)if(s(c[r]))return c[r];return null},isContextFor:function(a){return!(a in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[a]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,p){"string"==typeof a&&(a=(p?p.$:document).createTextNode(a)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},isEmpty:function(a){var p=this.getText();return a&&(p=CKEDITOR.tools.trim(p)),!p||p===CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE},split:function(a){var p=this.$.parentNode,u=p.childNodes.length,r=this.getLength(),s=this.getDocument(),c=new CKEDITOR.dom.text(this.$.splitText(a),s);return p.childNodes.length==u&&(a>=r?(c=s.createText("")).insertAfter(this):((a=s.createText("")).insertAfter(c),a.remove())),c},substring:function(a,p){return"number"!=typeof p?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,p)}}),function(){function a(u,r,s){var c=u.serializable,f=r[s?"endContainer":"startContainer"],l=s?"endOffset":"startOffset",n=c?r.document.getById(u.startNode):u.startNode;return u=c?r.document.getById(u.endNode):u.endNode,f.equals(n.getPrevious())?(r.startOffset=r.startOffset-f.getLength()-u.getPrevious().getLength(),f=u.getNext()):f.equals(u.getPrevious())&&(r.startOffset-=f.getLength(),f=u.getNext()),f.equals(n.getParent())&&r[l]++,f.equals(u.getParent())&&r[l]++,r[s?"endContainer":"startContainer"]=f,r}CKEDITOR.dom.rangeList=function(u){return u instanceof CKEDITOR.dom.rangeList?u:(u?u instanceof CKEDITOR.dom.range&&(u=[u]):u=[],CKEDITOR.tools.extend(u,p))};var p={createIterator:function(){var c,u=this,r=CKEDITOR.dom.walker.bookmark(),s=[];return{getNextRange:function(f){var l=u[c=void 0===c?0:c+1];if(l&&1<u.length){if(!c)for(var n=u.length-1;0<=n;n--)s.unshift(u[n].createBookmark(!0));if(f)for(var i=0;u[c+i+1];){var e=l.document;for(f=0,n=e.getById(s[i].endNode),e=e.getById(s[i+1].startNode);;){if(n=n.getNextSourceNode(!1),e.equals(n))f=1;else if(r(n)||n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary())continue;break}if(!f)break;i++}for(l.moveToBookmark(s.shift());i--;)(n=u[++c]).moveToBookmark(s.shift()),l.setEnd(n.endContainer,n.endOffset)}return l}}},createBookmarks:function(u){for(var s,r=[],c=0;c<this.length;c++){r.push(s=this[c].createBookmark(u,!0));for(var f=c+1;f<this.length;f++)this[f]=a(s,this[f]),this[f]=a(s,this[f],!0)}return r},createBookmarks2:function(u){for(var r=[],s=0;s<this.length;s++)r.push(this[s].createBookmark2(u));return r},moveToBookmarks:function(u){for(var r=0;r<this.length;r++)this[r].moveToBookmark(u[r])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function p(i){var e=CKEDITOR.skin["ua_"+i],t=CKEDITOR.env;if(e){e=e.split(",").sort(function(T,h){return T>h?-1:1});for(var d,o=0;o<e.length;o++)if(d=e[o],t.ie&&(d.replace(/^ie/,"")==t.version||t.quirks&&"iequirks"==d)&&(d="ie"),t[d]){i+="_"+e[o];break}}return CKEDITOR.getUrl(a()+i+".css")}function u(i,e){c[i]||(CKEDITOR.document.appendStyleSheet(p(i)),c[i]=1),e&&e()}function r(i){var e=i.getById(f);return e||((e=i.getHead().append("style")).setAttribute("id",f),e.setAttribute("type","text/css")),e}function s(i,e,t){var o,d,E;if(CKEDITOR.env.webkit)for(e=e.split("}").slice(0,-1),d=0;d<e.length;d++)e[d]=e[d].split("{");for(var T=0;T<i.length;T++)if(CKEDITOR.env.webkit)for(d=0;d<e.length;d++){for(E=e[d][1],o=0;o<t.length;o++)E=E.replace(t[o][0],t[o][1]);i[T].$.sheet.addRule(e[d][0],E)}else{for(E=e,o=0;o<t.length;o++)E=E.replace(t[o][0],t[o][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?i[T].$.styleSheet.cssText+=E:i[T].$.innerHTML+=E}}var c={};CKEDITOR.skin={path:a,loadPart:function(i,e){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){u(i,e)}):u(i,e)},getPath:function(i){return CKEDITOR.getUrl(p(i))},icons:{},addIcon:function(i,e,t,o){i=i.toLowerCase(),this.icons[i]||(this.icons[i]={path:e,offset:t||0,bgsize:o||"16px"})},getIconStyle:function(i,e,t,o,d){var E;return i&&(i=i.toLowerCase(),e&&(E=this.icons[i+"-rtl"]),E||(E=this.icons[i])),i=t||E&&E.path||"",o=o||E&&E.offset,d=d||E&&E.bgsize||"16px",i&&(i=i.replace(/'/g,"\\'")),i&&"background-image:url('"+CKEDITOR.getUrl(i)+"');background-position:0 "+o+"px;background-size:"+d+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(i){var e=r(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var o=CKEDITOR.skin.chameleon,d="",E="";"function"==typeof o&&(d=o(this,"editor"),E=o(this,"panel")),s([e],d,t=[[n,t]]),s(l,E,t)}).call(this,i)}});var f="cke_ui_color",l=[],n=/\$color/g;CKEDITOR.on("instanceLoaded",function(i){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var e=i.editor;i=function(t){if(!(t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var o=r(t);l.push(o),e.on("destroy",function(){l=CKEDITOR.tools.array.filter(l,function(d){return o!==d})}),(t=e.getUiColor())&&s([o],CKEDITOR.skin.chameleon(e,"panel"),[[n,t]])}},e.on("panelShow",i),e.on("menuShow",i),e.config.uiColor&&e.setUiColor(e.config.uiColor)}})}(),function(){var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var p=a.getComputedStyle("border-top-color"),u=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!p||p!=u)}catch{CKEDITOR.env.hc=!1}if(a.remove(),CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,p=0;p<a.length;p++)CKEDITOR.editor.prototype.constructor.apply(a[p][0],a[p][1]),CKEDITOR.add(a[p][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var a=function(u,r){for(var s=u.match(/[^#]./g),c=0;3>c;c++){var l,f=c;l=parseInt(s[c],16),l=("0"+(0>r?0|l*(1+r):0|l+(255-l)*r).toString(16)).slice(-2),s[f]=l}return"#"+s.join("")},p={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(u,r){var s=a(u.uiColor,.4);s={id:"."+u.id,defaultBorder:a(s,-.2),toolbarElementsBorder:a(s,-.25),defaultBackground:s,lightBackground:a(s,.8),darkBackground:a(s,-.15),ckeButtonOn:a(s,.4),ckeResizer:a(s,-.4),ckeColorauto:a(s,.8),dialogBody:a(s,.7),dialogTab:a(s,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:a(s,-.6),menubuttonHover:a(s,.1),menubuttonIcon:a(s,.5),menubuttonIconHover:a(s,.3)};return p[r].output(s).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var n,i,e,a=function(n){this._||(this._={}),this._.default=this._.initValue=n.default||"",this._.required=n.required||!1;for(var i=[this._],e=1;e<arguments.length;e++)i.push(arguments[e]);return i.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,i),this._},p={build:function(n,i,e){return new CKEDITOR.ui.dialog.textInput(n,i,e)}},u={build:function(n,i,e){return new CKEDITOR.ui.dialog[i.type](n,i,e)}},r={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(n){this.setValue(this.getInitValue(),n)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},s=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(n,i){this._.domOnChangeRegistered||(n.on("load",function(){this.getInputElement().on("change",function(){n.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",i)}},!0),c=/^on([A-Z]\w+)/,f=function(n){for(var i in n)(c.test(i)||"title"==i||"type"==i)&&delete n[i];return n},l=function(n){(n=n.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):n==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(n,i,e,t){if(!(4>arguments.length)){var o=a.call(this,i);o.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var d={role:i.role||"presentation"};i.includeLabel&&(d["aria-labelledby"]=o.labelId),CKEDITOR.ui.dialog.uiElement.call(this,n,i,e,"div",null,d,function(){var E=[],T=i.required?" cke_required":"";return"horizontal"!=i.labelLayout?E.push('<label class="cke_dialog_ui_labeled_label'+T+'" ',' id="'+o.labelId+'"',o.inputId?' for="'+o.inputId+'"':"",(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",i.required?i.label+'<span class="cke_dialog_ui_labeled_required" aria-hidden="true">*</span>':i.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',i.controlStyle?' style="'+i.controlStyle+'"':"",' role="presentation">',t.call(this,n,i),"</div>"):(T={type:"hbox",widths:i.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+T+'" id="'+o.labelId+'" for="'+o.inputId+'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(i.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(i.controlStyle?' style="'+i.controlStyle+'"':"")+">"+t.call(this,n,i)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(n,T,E)),E.join("")})}},textInput:function(n,i,e){if(!(3>arguments.length)){a.call(this,i);var t=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",o={class:"cke_dialog_ui_input_"+i.type,id:t,type:i.type};i.validate&&(this.validate=i.validate),i.maxLength&&(o.maxlength=i.maxLength),i.size&&(o.size=i.size),i.inputStyle&&(o.style=i.inputStyle);var d=this,E=!1;n.on("load",function(){d.getInputElement().on("keydown",function(T){13==T.data.getKeystroke()&&(E=!0)}),d.getInputElement().on("keyup",function(T){13==T.data.getKeystroke()&&E&&(n.getButton("ok")&&setTimeout(function(){n.getButton("ok").click()},0),E=!1),d.bidi&&l.call(d,T)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,n,i,e,function(){var T=['<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'];for(var h in i.width&&T.push('style="width:'+i.width+'" '),T.push("><input "),o["aria-labelledby"]=this._.labelId,this._.required&&(o["aria-required"]=this._.required),o)T.push(h+'="'+o[h]+'" ');return T.push(" /></div>"),T.join("")})}},textarea:function(n,i,e){if(!(3>arguments.length)){a.call(this,i);var t=this,o=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",d={};i.validate&&(this.validate=i.validate),d.rows=i.rows||5,d.cols=i.cols||20,d.class="cke_dialog_ui_input_textarea "+(i.class||""),typeof i.inputStyle<"u"&&(d.style=i.inputStyle),i.dir&&(d.dir=i.dir),t.bidi&&n.on("load",function(){t.getInputElement().on("keyup",l)},t),CKEDITOR.ui.dialog.labeledElement.call(this,n,i,e,function(){d["aria-labelledby"]=this._.labelId,this._.required&&(d["aria-required"]=this._.required);var T,E=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',o,'" '];for(T in d)E.push(T+'="'+CKEDITOR.tools.htmlEncode(d[T])+'" ');return E.push(">",CKEDITOR.tools.htmlEncode(t._.default),"</textarea></div>"),E.join("")})}},checkbox:function(n,i,e){if(!(3>arguments.length)){var t=a.call(this,i,{default:!!i.default});i.validate&&(this.validate=i.validate),CKEDITOR.ui.dialog.uiElement.call(this,n,i,e,"span",null,null,function(){var o=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],E=CKEDITOR.tools.getNextId()+"_label",T={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":E};return f(o),i.default&&(T.checked="checked"),typeof o.inputStyle<"u"&&(o.style=o.inputStyle),t.checkbox=new CKEDITOR.ui.dialog.uiElement(n,o,d,"input",null,T),d.push(' <label id="',E,'" for="',T.id,'"'+(i.labelStyle?' style="'+i.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(i.label),"</label>"),d.join("")})}},radio:function(n,i,e){if(!(3>arguments.length)){a.call(this,i),this._.default||(this._.default=this._.initValue=i.items[0][1]),i.validate&&(this.validate=i.validate);var t=[],o=this;i.role="radiogroup",i.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,n,i,e,function(){for(var d=[],E=[],T=(i.id?i.id:CKEDITOR.tools.getNextId())+"_radio",h=0;h<i.items.length;h++){var R=i.items[h],N=void 0!==R[2]?R[2]:R[0],K=void 0!==R[1]?R[1]:R[0],A=(v=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",v=CKEDITOR.tools.extend({},i,{id:v,title:null,type:null},!0),B=(N=CKEDITOR.tools.extend({},v,{title:N},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:T,value:K,"aria-labelledby":A}),j=[];o._.default==K&&(B.checked="checked"),f(v),f(N),typeof v.inputStyle<"u"&&(v.style=v.inputStyle),(K=new CKEDITOR.ui.dialog.uiElement(n,v,j,"input",null,B)).on("focus",function(){o.click()}),t.push(K),j.push(" "),new CKEDITOR.ui.dialog.uiElement(n,N,j,"label",null,{id:A,for:B.id},R[0]),d.push(j.join(""))}return new CKEDITOR.ui.dialog.hbox(n,t,d,E),E.join("")}),this._.children=t}},button:function(n,i,e){if(arguments.length){"function"==typeof i&&(i=i(n.getParentEditor())),a.call(this,i,{disabled:i.disabled||!1}),CKEDITOR.event.implementOn(this);var t=this;n.on("load",function(){var E=this.getElement();E.on("click",function(T){t.click(),T.data.preventDefault()}),E.on("keydown",function(T){T.data.getKeystroke()in{32:1}&&(t.click(),T.data.preventDefault())}),E.unselectable()},this);var o=CKEDITOR.tools.extend({},i);delete o.style;var d=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,n,o,e,"a",null,{style:i.style,href:"javascript:void(0)",title:i.label,hidefocus:"true",class:i.class,role:"button","aria-labelledby":d},'<span id="'+d+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(i.label)+"</span>")}},select:function(n,i,e){if(!(3>arguments.length)){var t=a.call(this,i);i.validate&&(this.validate=i.validate),t.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,n,i,e,function(){var o=CKEDITOR.tools.extend({},i,{id:i.id?i.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],E=[],T={id:t.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};d.push('<div class="cke_dialog_ui_input_',i.type,'" role="presentation"'),i.width&&d.push('style="width:'+i.width+'" '),d.push(">"),void 0!==i.size&&(T.size=i.size),void 0!==i.multiple&&(T.multiple=i.multiple),f(o);for(var R,h=0;h<i.items.length&&(R=i.items[h]);h++)E.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==R[1]?R[1]:R[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(R[0]));return typeof o.inputStyle<"u"&&(o.style=o.inputStyle),t.select=new CKEDITOR.ui.dialog.uiElement(n,o,d,"select",null,T,E.join("")),d.push("</div>"),d.join("")})}},file:function(n,i,e){if(!(3>arguments.length)){void 0===i.default&&(i.default="");var t=CKEDITOR.tools.extend(a.call(this,i),{definition:i,buttons:[]});i.validate&&(this.validate=i.validate),n.on("load",function(){CKEDITOR.document.getById(t.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,n,i,e,function(){t.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var o=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',t.frameId,'" title="',i.label,'" src="javascript:void('];return o.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),o.push(')"></iframe>'),o.join("")})}},fileButton:function(n,i,e){var t=this;if(!(3>arguments.length)){a.call(this,i),i.validate&&(this.validate=i.validate);var o=CKEDITOR.tools.extend({},i),d=o.onClick;o.className=(o.className?o.className+" ":"")+"cke_dialog_ui_button",o.onClick=function(E){var T=i.for;!1!==(E=!!d&&d.call(this,E))&&("xhr"!==E&&n.getContentElement(T[0],T[1]).submit(),this.disable())},n.on("load",function(){n.getContentElement(i.for[0],i.for[1])._.buttons.push(t)}),CKEDITOR.ui.dialog.button.call(this,n,o,e)}},html:(n=/^\s*<[\w:]+\s+([^>]*)?>/,i=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,e=/\/$/,function(t,o,d){if(!(3>arguments.length)){var E=[],T=o.html;"<"!=T.charAt(0)&&(T="<span>"+T+"</span>");var h=o.focus;if(h){var R=this.focus;this.focus=function(){("function"==typeof h?h:R).call(this),this.fire("focus")},o.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,t,o,E,"span",null,null,""),E=E.join("").match(n),T=T.match(i)||["","",""],e.test(T[1])&&(T[1]=T[1].slice(0,-1),T[2]="/"+T[2]),d.push([T[1]," ",E[1]||"",T[2]].join(""))}}),fieldset:function(n,i,e,t,o){var d=o.label;this._={children:i},CKEDITOR.ui.dialog.uiElement.call(this,n,o,t,"fieldset",null,null,function(){var E=[];d&&E.push("<legend"+(o.labelStyle?' style="'+o.labelStyle+'"':"")+">"+d+"</legend>");for(var T=0;T<e.length;T++)E.push(e[T]);return E.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(n){var i=CKEDITOR.document.getById(this._.labelId);return 1>i.getChildCount()?new CKEDITOR.dom.text(n,CKEDITOR.document).appendTo(i):i.getChild(0).$.nodeValue=n,this},getLabel:function(){var n=CKEDITOR.document.getById(this._.labelId);return!n||1>n.getChildCount()?"":n.getChild(0).getText()},eventProcessors:s},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var n=this.getElement();n&&n.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(n,i){this.on("click",function(){i.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var n=this.selectParentTab();setTimeout(function(){var i=n.getInputElement();i&&i.$.focus()},0)},select:function(){var n=this.selectParentTab();setTimeout(function(){var i=n.getInputElement();i&&(i.$.focus(),i.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(n){if(this.bidi){var i=n&&n.charAt(0);(i="\u202a"==i?"ltr":"\u202b"==i?"rtl":null)&&(n=n.slice(1)),this.setDirectionMarker(i)}return n||(n=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var n=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&n){var i=this.getDirectionMarker();i&&(n=("ltr"==i?"\u202a":"\u202b")+n)}return n},setDirectionMarker:function(n){var i=this.getInputElement();n?i.setAttributes({dir:n,"data-cke-dir-marker":n}):this.getDirectionMarker()&&i.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(n,i,e){var t=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),o=this.getInputElement().$;return t.$.text=n,t.$.value=i??n,null==e?CKEDITOR.env.ie?o.add(t.$):o.add(t.$,null):o.add(t.$,e),this},remove:function(n){return this.getInputElement().$.remove(n),this},clear:function(){for(var n=this.getInputElement().$;0<n.length;)n.remove(0);return this},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(n,i){return this.getInputElement().$.checked=n,!i&&this.fire("change",{value:n}),this},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(n,i){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?s.onChange.apply(this,arguments):(n.on("load",function(){var e=this._.checkbox.getElement();e.on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:e.$.checked})},this)},this),this.on("change",i),null)}},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{focus:function(){var n=this._.children,i=n[0],e=this._.dialog._,t=e.currentFocusIndex,o=t===e.focusList.length-1&&0===this.focusIndex;for(t>this.focusIndex&&!o&&(i=n[n.length-1]),e.currentFocusIndex=this.focusIndex,e=0;e<n.length;e++)if((t=n[e]).getInputElement().$.checked){i=t;break}i.focus()},setValue:function(n,i){for(var t,e=this._.children,o=0;o<e.length&&(t=e[o]);o++)t.getElement().$.checked=t.getValue()==n;return!i&&this.fire("change",{value:n}),this},getValue:function(){for(var n=this._.children,i=0;i<n.length;i++)if(n[i].getElement().$.checked)return n[i].getValue();return null},accessKeyUp:function(){var i,n=this._.children;for(i=0;i<n.length;i++)if(n[i].getElement().$.checked)return void n[i].getElement().focus();n[0].getElement().focus()},click:function(){this._.dialog._.currentFocusIndex=this.focusIndex},eventProcessors:{onChange:function(n,i){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?s.onChange.apply(this,arguments):(n.on("load",function(){for(var e=this._.children,t=this,o=0;o<e.length;o++)e[o].getElement().on("propertychange",function(d){"checked"==(d=d.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",i),null)}},keyboardFocusable:!0},r,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,r,{getInputElement:function(){var n=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<n.$.forms.length?new CKEDITOR.dom.element(n.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(n){var e,o,i=/^on([A-Z]\w+)/,t=function(d,E,T,h){d.on("formLoaded",function(){d.getInputElement().on(T,h,d)})};for(o in n)(e=o.match(i))&&(this.eventProcessors[o]?this.eventProcessors[o].call(this,this._.dialog,n[o]):t(this,this._.dialog,e[1].toLowerCase(),n[o]));return this},reset:function(){function n(){e.$.open();var R="";t.size&&(R=t.size-(CKEDITOR.env.ie?7:0));var K=i.frameId+"_input";for(e.$.write(['<html dir="'+T+'" lang="'+h+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+T+'" lang="'+h+'" action="',CKEDITOR.tools.htmlEncode(t.action),'"><label id="',i.labelId,'" for="',K,'" style="display:none">',CKEDITOR.tools.htmlEncode(t.label),'</label><input style="width:100%" id="',K,'" aria-labelledby="',i.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(t.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<R?R:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+d+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+E+")}","<\/script>"].join("")),e.$.close(),R=0;R<o.length;R++)o[R].enable()}var i=this._,e=CKEDITOR.document.getById(i.frameId).getFrameDocument(),t=i.definition,o=i.buttons,d=this.formLoadedNumber,E=this.formUnloadNumber,T=i.dialog._.editor.lang.dir,h=i.dialog._.editor.langCode;d||(d=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),E=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(d),CKEDITOR.tools.removeFunction(E)})),CKEDITOR.env.gecko?setTimeout(n,500):n()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(n,i){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",i)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",p),CKEDITOR.dialog.addUIElement("password",p),CKEDITOR.dialog.addUIElement("tel",p),CKEDITOR.dialog.addUIElement("textarea",u),CKEDITOR.dialog.addUIElement("checkbox",u),CKEDITOR.dialog.addUIElement("radio",u),CKEDITOR.dialog.addUIElement("button",u),CKEDITOR.dialog.addUIElement("select",u),CKEDITOR.dialog.addUIElement("file",u),CKEDITOR.dialog.addUIElement("fileButton",u),CKEDITOR.dialog.addUIElement("html",u),CKEDITOR.dialog.addUIElement("fieldset",{build:function(n,i,e){for(var o,t=i.children,d=[],E=[],T=0;T<t.length&&(o=t[T]);T++){var h=[];d.push(h),E.push(CKEDITOR.dialog._.uiElementBuilders[o.type].build(n,o,h))}return new CKEDITOR.ui.dialog[i.type](n,E,d,e,i)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(C){C._.tabBarMode=!0,C._.tabs[C._.currentTabId][0].focus(),C._.currentFocusIndex=-1}function p(){for(var C=this._.tabIdList.length,m=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+C,y=m-1;y>m-C;y--)if(this._.tabs[this._.tabIdList[y%C]][0].$.offsetHeight)return this._.tabIdList[y%C];return null}function u(){for(var C=this._.tabIdList.length,m=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),y=m+1;y<m+C;y++)if(this._.tabs[this._.tabIdList[y%C]][0].$.offsetHeight)return this._.tabIdList[y%C];return null}function r(C,m){for(var y=C.$.getElementsByTagName("input"),g=0,k=y.length;g<k;g++){var b=new CKEDITOR.dom.element(y[g]);"text"==b.getAttribute("type").toLowerCase()&&(m?(b.setAttribute("value",b.getCustomData("fake_value")||""),b.removeCustomData("fake_value")):(b.setCustomData("fake_value",b.getAttribute("value")),b.setAttribute("value","")))}}function s(C,m){var y=this.getInputElement();y&&(C?y.removeAttribute("aria-invalid"):y.setAttribute("aria-invalid",!0)),C||(this.select?this.select():this.focus()),m&&alert(m),this.fire("validated",{valid:C,msg:m})}function c(){var C=this.getInputElement();C&&C.removeAttribute("aria-invalid")}function l(C,m,y){this.element=m,this.focusIndex=y,this.tabIndex=0,this.isFocusable=function(){return!m.getAttribute("disabled")&&m.isVisible()},this.focus=function(){C._.currentFocusIndex=this.focusIndex,this.element.focus()},m.on("keydown",function(g){g.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),m.on("focus",function(){this.fire("mouseover")}),m.on("blur",function(){this.fire("mouseout")})}function i(C,m){this.dialog=C;for(var k,y=m.contents,g=0;k=y[g];g++)y[g]=k&&new e(C,k);CKEDITOR.tools.extend(this,m)}function e(C,m){this._={dialog:C},CKEDITOR.tools.extend(this,m)}function d(C,m,y){var L=C.parts.dialog.getParent().getClientSize(),g=C.getSize(),k=C._.viewportRatio,b=Math.max(L.width-g.width,0);L=Math.max(L.height-g.height,0);k.width=b?m/b:k.width,k.height=L?y/L:k.height,C._.viewportRatio=k}function E(C){C.data.preventDefault(1)}function T(C){var k=C.config,y=CKEDITOR.skinName||C.config.skin,m=k.dialog_backgroundCoverColor||("moono-lisa"==y?"black":"white"),g=(y=k.dialog_backgroundCoverOpacity,k.baseFloatZIndex),b=(k=CKEDITOR.tools.genKey(m,y,g),S[k]);CKEDITOR.document.getBody().addClass("cke_dialog_open"),b?b.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ","; width: 100%; height: 100%;",CKEDITOR.env.ie6Compat?"":"background-color: "+m,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(m="<html><body style=\\'background-color:"+m+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+m+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),(b=CKEDITOR.dom.element.createFromHtml(g.join(""))).setOpacity(void 0!==y?y:.5),b.on("keydown",E),b.on("keypress",E),b.on("keyup",E),b.appendTo(CKEDITOR.document.getBody()),S[k]=b),C.focusManager.add(b),F=b,CKEDITOR.env.mac&&CKEDITOR.env.webkit||b.focus()}function h(C){CKEDITOR.document.getBody().removeClass("cke_dialog_open"),F&&(C.focusManager.remove(F),F.hide())}function R(C){var m=C.data.$.ctrlKey||C.data.$.metaKey,y=C.data.$.altKey,g=C.data.$.shiftKey,k=String.fromCharCode(C.data.$.keyCode);(m=q[(m?"CTRL+":"")+(y?"ALT+":"")+(g?"SHIFT+":"")+k])&&m.length&&((m=m[m.length-1]).keydown&&m.keydown.call(m.uiElement,m.dialog,m.key),C.data.preventDefault())}function K(C){var m=C.data.$.ctrlKey||C.data.$.metaKey,y=C.data.$.altKey,g=C.data.$.shiftKey,k=String.fromCharCode(C.data.$.keyCode);(m=q[(m?"CTRL+":"")+(y?"ALT+":"")+(g?"SHIFT+":"")+k])&&m.length&&((m=m[m.length-1]).keyup&&(m.keyup.call(m.uiElement,m.dialog,m.key),C.data.preventDefault()))}function A(C,m,y,g,k){(q[y]||(q[y]=[])).push({uiElement:C,dialog:m,key:y,keyup:k||C.accessKeyUp,keydown:g||C.accessKeyDown})}function N(C,m){C._.accessKeyMap[m]&&C.selectPage(C._.accessKeyMap[m])}function B(){}var _,F,C,j=CKEDITOR.tools.cssLength,x=!1,O=!CKEDITOR.env.ie||CKEDITOR.env.edge,I='<div class="cke_reset_all cke_dialog_container {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" style="'+(O?"display:flex":"")+'" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="'+(O?"margin:auto":"position:absolute")+'" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(C,m){function g(ee){var D=te._.focusList;if(ee=ee||0,!(1>D.length)){var P=te._.currentFocusIndex;te._.tabBarMode&&0>ee&&(P=0);try{D[P].getInputElement().$.blur()}catch{}var M=P,W=1<te._.pageCount;do{if(M+=ee,W&&!te._.tabBarMode&&(M==D.length||-1==M))return te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),void(te._.currentFocusIndex=-1);if((M=(M+D.length)%D.length)==P)break}while(ee&&!D[M].isFocusable());D[M].focus(),"text"==D[M].type&&D[M].select()}}function k(ee){if(te==CKEDITOR.dialog._.currentTop){var D=ee.data.getKeystroke(),P="rtl"==C.lang.dir;if(Z=Y=0,9==D||D==CKEDITOR.SHIFT+9)g(D==CKEDITOR.SHIFT+9?-1:1),Z=1;else if(D==CKEDITOR.ALT+121&&!te._.tabBarMode&&1<te.getPageCount())a(te),Z=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],D)&&te._.tabBarMode)D=-1!=CKEDITOR.tools.indexOf([P?39:37,38],D)?p.call(te):u.call(te),te.selectPage(D),te._.tabs[D][0].focus(),Z=1;else if(13!=D&&32!=D||!te._.tabBarMode)if(13==D)(D=ee.data.getTarget()).is("a","button","select","textarea")||D.is("input")&&"button"==D.$.type||((D=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(D.click,0,D),Z=1),Y=1;else{if(27!=D)return;(D=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(D.click,0,D):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),Y=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,g(1),Z=1;b(ee)}}function b(ee){Z?ee.data.preventDefault(1):Y&&ee.data.stopPropagation()}var Z,Y,L=CKEDITOR.dialog._.dialogDefinitions[m],H=CKEDITOR.tools.clone(_),G=C.config.dialog_buttonsOrder||"OS",z=C.lang.dir,X={};if(("OS"==G&&CKEDITOR.env.mac||"rtl"==G&&"ltr"==z||"ltr"==G&&"rtl"==z)&&H.buttons.reverse(),L=CKEDITOR.tools.extend(L(C),H),L=new i(this,L=CKEDITOR.tools.clone(L)),H=function f(C){var m=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",I).output({id:CKEDITOR.tools.getNextNumber(),editorId:C.id,langDir:C.lang.dir,langCode:C.langCode,editorDialogClass:"cke_editor_"+C.name.replace(/\./g,"\\.")+"_dialog",closeTitle:C.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),y=m.getChild([0,0,0,0,0]),g=y.getChild(0),k=y.getChild(1);return C.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(y),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(C="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+C+'" tabIndex="-1"></iframe>').appendTo(y.getParent())),g.unselectable(),k.unselectable(),{element:m,parts:{dialog:m.getChild(0),title:g,close:k,tabs:y.getChild(2),contents:y.getChild([3,0,0,0]),footer:y.getChild([3,0,1,0])}}}(C),this._={editor:C,element:H.element,name:m,model:null,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},viewportRatio:{width:.5,height:.5},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=H.parts,CKEDITOR.tools.setTimeout(function(){C.fire("ariaWidget",this.parts.contents)},0,this),H={top:0,visibility:"hidden"},CKEDITOR.env.ie6Compat&&(H.position="absolute"),H["rtl"==z?"right":"left"]=0,this.parts.dialog.setStyles(H),CKEDITOR.event.call(this),this.definition=L=CKEDITOR.fire("dialogDefinition",{name:m,definition:L,dialog:this},C).definition,!("removeDialogTabs"in C._)&&C.config.removeDialogTabs){for(H=C.config.removeDialogTabs.split(";"),z=0;z<H.length;z++)if(2==(G=H[z].split(":")).length){var Q=G[0];X[Q]||(X[Q]=[]),X[Q].push(G[1])}C._.removeDialogTabs=X}if(C._.removeDialogTabs&&(X=C._.removeDialogTabs[m]))for(z=0;z<X.length;z++)L.removeContents(X[z]);L.onLoad&&this.on("load",L.onLoad),L.onShow&&this.on("show",L.onShow),L.onHide&&this.on("hide",L.onHide),L.onOk&&this.on("ok",function(ee){C.fire("saveSnapshot"),setTimeout(function(){C.fire("saveSnapshot")},0),!1===L.onOk.call(this,ee)&&(ee.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,L.onCancel&&this.on("cancel",function(ee){!1===L.onCancel.call(this,ee)&&(ee.data.hide=!1)});var te=this,oe=function(ee){var M,D=te._.contents;for(M in D)for(var W in D[M])if(ee.call(this,D[M][W]))return};this.on("ok",function(ee){oe(function(D){if(D.validate){var P=D.validate(this),M="string"==typeof P||!1===P;return M&&(ee.data.hide=!1,ee.stop()),s.call(D,!M,"string"==typeof P?P:void 0),M}})},this,null,0),this.on("cancel",function(ee){oe(function(D){if(D.isChanged())return C.config.dialog_noConfirmCancel||confirm(C.lang.common.confirmCancel)||(ee.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(ee){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),ee.data.preventDefault()},this),this.changeFocus=g;var se=this._.element;for(C.focusManager.add(se,1),this.on("show",function(){se.on("keydown",k,this),CKEDITOR.env.gecko&&se.on("keypress",b,this)}),this.on("hide",function(){se.removeListener("keydown",k),CKEDITOR.env.gecko&&se.removeListener("keypress",b),oe(function(ee){c.apply(ee)})}),this.on("iframeAdded",function(ee){new CKEDITOR.dom.document(ee.data.iframe.$.contentWindow.document).on("keydown",k,this,null,0)}),this.on("show",function(){!function y(){var ee=te._.focusList;ee.sort(function(M,W){return M.tabIndex!=W.tabIndex?W.tabIndex-M.tabIndex:M.focusIndex-W.focusIndex});for(var D=ee.length,P=0;P<D;P++)ee[P].focusIndex=P}();var ee=1<te._.pageCount;C.config.dialog_startupFocusTab&&ee?(te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),te._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=ee?-1:this._.focusList.length-1,L.onFocus?(ee=L.onFocus.call(this))&&ee.focus():g(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var ee=this.getElement(),D=ee.getFirst();D.remove(),D.appendTo(ee)},this),function t(C){function m(G){var z=C.getSize(),X=C.parts.dialog.getParent().getClientSize(),Z=G.data.$.screenX,Y=G.data.$.screenY,Q=Z-g.x,te=Y-g.y;g={x:Z,y:Y},k.x+=Q,k.y+=te,Z=k.x+H[3]<L?-H[3]:k.x-H[1]>X.width-z.width-L?X.width-z.width+("rtl"==b.lang.dir?0:H[1]):k.x,z=k.y+H[0]<L?-H[0]:k.y-H[2]>X.height-z.height-L?X.height-z.height+H[2]:k.y,Z=Math.floor(Z),z=Math.floor(z),C.move(Z,z,1),G.data.preventDefault()}function y(){if(CKEDITOR.document.removeListener("mousemove",m),CKEDITOR.document.removeListener("mouseup",y),CKEDITOR.env.ie6Compat){var G=F.getChild(0).getFrameDocument();G.removeListener("mousemove",m),G.removeListener("mouseup",y)}}var g=null,k=null,b=C.getParentEditor(),L=b.config.dialog_magnetDistance,H=CKEDITOR.skin.margins||[0,0,0,0];typeof L>"u"&&(L=20),C.parts.title.on("mousedown",function(G){if(!C._.moved){var z=C._.element;z.getFirst().setStyle("position","absolute"),z.removeStyle("display"),C._.moved=!0,C.layout()}g={x:G.data.$.screenX,y:G.data.$.screenY},CKEDITOR.document.on("mousemove",m),CKEDITOR.document.on("mouseup",y),k=C.getPosition(),CKEDITOR.env.ie6Compat&&((z=F.getChild(0).getFrameDocument()).on("mousemove",m),z.on("mouseup",y)),G.data.preventDefault()},C)}(this),function o(C){function m(Q){var te="rtl"==b.lang.dir,oe=X.width,se=X.height,ee=oe+(Q.data.$.screenX-z.x)*(te?-1:1)*(C._.moved?1:2),D=se+(Q.data.$.screenY-z.y)*(C._.moved?1:2),P=C._.element.getFirst(),M=(P=te&&parseInt(P.getComputedStyle("right"),10),C.getPosition());M.x=M.x||0,M.y=M.y||0,M.y+D>G.height&&(D=G.height-M.y),(te?P:M.x)+ee>G.width&&(ee=G.width-(te?P:M.x)),D=Math.floor(D),ee=Math.floor(ee),(k==CKEDITOR.DIALOG_RESIZE_WIDTH||k==CKEDITOR.DIALOG_RESIZE_BOTH)&&(oe=Math.max(g.minWidth||0,ee-L)),(k==CKEDITOR.DIALOG_RESIZE_HEIGHT||k==CKEDITOR.DIALOG_RESIZE_BOTH)&&(se=Math.max(g.minHeight||0,D-H)),C.resize(oe,se),C._.moved&&d(C,C._.position.x,C._.position.y),C._.moved||C.layout(),Q.data.preventDefault()}function y(){if(CKEDITOR.document.removeListener("mouseup",y),CKEDITOR.document.removeListener("mousemove",m),Z&&(Z.remove(),Z=null),CKEDITOR.env.ie6Compat){var Q=F.getChild(0).getFrameDocument();Q.removeListener("mouseup",y),Q.removeListener("mousemove",m)}}var g=C.definition,k=g.resizable;if(k!=CKEDITOR.DIALOG_RESIZE_NONE){var L,H,G,z,X,Z,b=C.getParentEditor(),Y=CKEDITOR.tools.addFunction(function(Q){function te(D){return D.isVisible()}X=C.getSize();var oe=C.parts.contents,se=oe.$.getElementsByTagName("iframe").length,ee=!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks);se&&(Z=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%; left:0; top:0;"></div>'),oe.append(Z)),H=X.height-C.parts.contents.getFirst(te).getSize("height",ee),L=X.width-C.parts.contents.getFirst(te).getSize("width",1),z={x:Q.screenX,y:Q.screenY},G=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",m),CKEDITOR.document.on("mouseup",y),CKEDITOR.env.ie6Compat&&((oe=F.getChild(0).getFrameDocument()).on("mousemove",m),oe.on("mouseup",y)),Q.preventDefault&&Q.preventDefault()});C.on("load",function(){var Q="";k==CKEDITOR.DIALOG_RESIZE_WIDTH?Q=" cke_resizer_horizontal":k==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(Q=" cke_resizer_vertical"),Q=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+Q+" cke_resizer_"+b.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(b.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+Y+', event )">'+("ltr"==b.lang.dir?"\u25e2":"\u25e3")+"</div>"),C.parts.footer.append(Q,1)}),b.on("destroy",function(){CKEDITOR.tools.removeFunction(Y)})}}(this),new CKEDITOR.dom.text(L.title,CKEDITOR.document).appendTo(this.parts.title),z=0;z<L.contents.length;z++)(X=L.contents[z])&&this.addPage(X);for(this.parts.tabs.on("click",function(ee){var D=ee.data.getTarget();D.hasClass("cke_dialog_tab")&&(D=D.$.id,this.selectPage(D.substring(4,D.lastIndexOf("_"))),a(this),ee.data.preventDefault())},this),z=[],X=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:L.buttons},z).getChild(),this.parts.footer.setHtml(z.join("")),z=0;z<X.length;z++)this._.buttons[X[z].id]=X[z]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(C,m){if(!this._.contentSize||this._.contentSize.width!=C||this._.contentSize.height!=m){if(CKEDITOR.dialog.fire("resize",{dialog:this,width:C,height:m},this._.editor),this.fire("resize",{width:C,height:m},this._.editor),this.parts.contents.setStyles({width:C+"px",height:m+"px"}),"rtl"==this._.editor.lang.dir&&this._.position){var y=this.parts.dialog.getParent().getClientSize().width;this._.position.x=y-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:C,height:m}}},getSize:function(){var C=this._.element.getFirst();return{width:C.$.offsetWidth||0,height:C.$.offsetHeight||0}},move:function(C,m,y){var g=this._.element.getFirst(),k="rtl"==this._.editor.lang.dir;CKEDITOR.env.ie&&g.setStyle("zoom","100%");var G=this.parts.dialog.getParent().getClientSize(),b=this.getSize(),L=this._.viewportRatio,H=Math.max(G.width-b.width,0);G=Math.max(G.height-b.height,0);this._.position&&this._.position.x==C&&this._.position.y==m?(C=Math.floor(H*L.width),m=Math.floor(G*L.height)):d(this,C,m),this._.position={x:C,y:m},k&&(C=H-C),(m={top:(0<m?m:0)+"px"})[k?"right":"left"]=(0<C?C:0)+"px",g.setStyles(m),y&&(this._.moved=1)},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var C=this._.element,m=this.definition,y=CKEDITOR.document.getBody(),g=this._.editor.config.baseFloatZIndex;for(var k in C.getParent()&&C.getParent().equals(y)?C.setStyle("display",O?"flex":"block"):C.appendTo(y),this.resize(this._.contentSize&&this._.contentSize.width||m.width||m.minWidth,this._.contentSize&&this._.contentSize.height||m.height||m.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=g),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),this.getElement().setStyle("z-index",CKEDITOR.dialog._.currentZIndex),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,T(this._.editor)):CKEDITOR.dialog._.currentTop!==this&&(this._.parentDialog=CKEDITOR.dialog._.currentTop,(y=this._.parentDialog.getElement().getFirst()).$.style.zIndex-=Math.floor(g/2),this._.parentDialog.getElement().setStyle("z-index",y.$.style.zIndex),CKEDITOR.dialog._.currentTop=this),C.on("keydown",R),C.on("keyup",K),this._.hasFocus=!1,m.contents)if(m.contents[k]){C=m.contents[k],g=this._.tabs[C.id],y=C.requiredContent;var b=0;if(g){for(var L in this._.contents[C.id]){var H=this._.contents[C.id][L];"hbox"!=H.type&&"vbox"!=H.type&&H.getInputElement()&&(H.requiredContent&&!this._.editor.activeFilter.check(H.requiredContent)?H.disable():(H.enable(),b++))}!b||y&&!this._.editor.activeFilter.check(y)?g[0].addClass("cke_dialog_tab_disabled"):g[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function n(C){function m(){C.layout()}var y=CKEDITOR.document.getWindow();y.on("resize",m),C.on("hide",function(){y.removeListener("resize",m)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(G){G.setInitValue&&G.setInitValue()})},100,this)},layout:function(){var C=this.parts.dialog;if(this._.moved||!O){var g,m=this.getSize(),y=CKEDITOR.document.getWindow().getViewPaneSize();this._.moved&&this._.position?(g=this._.position.x,m=this._.position.y):(g=(y.width-m.width)/2,m=(y.height-m.height)/2),CKEDITOR.env.ie6Compat||(C.setStyle("position","absolute"),C.removeStyle("margin")),g=Math.floor(g),m=Math.floor(m),this.move(g,m)}},foreach:function(C){for(var m in this._.contents)for(var y in this._.contents[m])C.call(this,this._.contents[m][y]);return this},reset:(C=function(m){m.reset&&m.reset(1)},function(){return this.foreach(C),this}),setupContent:function(){var C=arguments;this.foreach(function(m){m.setup&&m.setup.apply(m,C)})},commitContent:function(){var C=arguments;this.foreach(function(m){CKEDITOR.env.ie&&this._.currentFocusIndex==m.focusIndex&&m.getInputElement().$.blur(),m.commit&&m.commit.apply(m,C)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var C=this._.element;for(C.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),function v(C){for(var m in q){for(var y=q[m],g=y.length-1;0<=g;g--)y[g].dialog!=C&&y[g].uiElement!=C||y.splice(g,1);0===y.length&&delete q[m]}}(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var m=this._.parentDialog.getElement().getFirst(),y=parseInt(m.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2);this._.parentDialog.getElement().setStyle("z-index",y),m.setStyle("z-index",y)}else h(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,C.removeListener("keydown",R),C.removeListener("keyup",K);var g=this._.editor;g.focus(),setTimeout(function(){g.focusManager.unlock(),CKEDITOR.env.iOS&&g.window.focus()},0)}delete this._.parentDialog,this.foreach(function(k){k.resetInitValue&&k.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(C){if(!C.requiredContent||this._.editor.filter.check(C.requiredContent)){for(var m=[],y=C.label?' title="'+CKEDITOR.tools.htmlEncode(C.label)+'"':"",g=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:C.elements,expand:!!C.expand,padding:C.padding,style:C.style||"width: 100%;"},m),k=this._.contents[C.id]={},b=g.getChild(),L=0;g=b.shift();)g.notAllowed||"hbox"==g.type||"vbox"==g.type||L++,k[g.id]=g,"function"==typeof g.getChild&&b.push.apply(b,g.getChild());L||(C.hidden=!0),(m=CKEDITOR.dom.element.createFromHtml(m.join(""))).setAttribute("role","tabpanel"),m.setStyle("min-height","100%"),g=CKEDITOR.env,k="cke_"+C.id+"_"+CKEDITOR.tools.getNextNumber(),y=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",y,C.hidden?' style="display:none"':"",' id="',k,'"',g.gecko&&!g.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',C.label,"</a>"].join("")),m.setAttribute("aria-labelledby",k),this._.tabs[C.id]=[y,m],this._.tabIdList.push(C.id),!C.hidden&&this._.pageCount++,this._.lastTab=y,this.updateStyle(),m.setAttribute("name",C.id),m.appendTo(this.parts.contents),y.unselectable(),this.parts.tabs.append(y),C.accessKey&&(A(this,this,"CTRL+"+C.accessKey,B,N),this._.accessKeyMap["CTRL+"+C.accessKey]=C.id)}},selectPage:function(C){if(this._.currentTabId!=C&&!this._.tabs[C][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:C,currentPage:this._.currentTabId})){for(var m in this._.tabs){var y=this._.tabs[m][0],g=this._.tabs[m][1];m!=C&&(y.removeClass("cke_dialog_tab_selected"),y.removeAttribute("aria-selected"),g.hide()),g.setAttribute("aria-hidden",m!=C)}var k=this._.tabs[C];k[0].addClass("cke_dialog_tab_selected"),k[0].setAttribute("aria-selected",!0),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(r(k[1]),k[1].show(),setTimeout(function(){r(k[1],1)},0)):k[1].show(),this._.currentTabId=C,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,C)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(C){var m=this._.tabs[C]&&this._.tabs[C][0];m&&1!=this._.pageCount&&m.isVisible()&&(C==this._.currentTabId&&this.selectPage(p.call(this)),m.hide(),this._.pageCount--,this.updateStyle())},showPage:function(C){(C=this._.tabs[C]&&this._.tabs[C][0])&&(C.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(C,m){var y=this._.contents[C];return y&&y[m]},getValueOf:function(C,m){return this.getContentElement(C,m).getValue()},setValueOf:function(C,m,y){return this.getContentElement(C,m).setValue(y)},getButton:function(C){return this._.buttons[C]},click:function(C){return this._.buttons[C].click()},disableButton:function(C){return this._.buttons[C].disable()},enableButton:function(C){return this._.buttons[C].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(C,m){if(typeof m>"u")m=this._.focusList.length,this._.focusList.push(new l(this,C,m));else{this._.focusList.splice(m,0,new l(this,C,m));for(var y=m+1;y<this._.focusList.length;y++)this._.focusList[y].focusIndex++}},setState:function(C){if(this.state!=C){if(this.state=C,C==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var m=this.getParentEditor().lang.dir,y={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==m?"right":"left"}};y.styles["margin-"+("rtl"==m?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",y),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok")&&this.getButton("ok").disable()}else C==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok")&&this.getButton("ok").enable());this.fire("state",C)}},getModel:function(C){return this._.model?this._.model:this.definition.getModel?this.definition.getModel(C):null},setModel:function(C){this._.model=C},getMode:function(C){return this.definition.getMode?this.definition.getMode(C):!(C=this.getModel(C))||C instanceof CKEDITOR.dom.element&&!C.getParent()?CKEDITOR.dialog.CREATION_MODE:CKEDITOR.dialog.EDITING_MODE}},CKEDITOR.tools.extend(CKEDITOR.dialog,{CREATION_MODE:0,EDITING_MODE:1,add:function(C,m){this._.dialogDefinitions[C]&&"function"!=typeof m||(this._.dialogDefinitions[C]=m)},exists:function(C){return!!this._.dialogDefinitions[C]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(C,m,y){return!((C=C.config.removeDialogTabs)&&C.match(new RegExp("(?:^|;)"+m+":"+y+"(?:$|;)","i")))},okButton:function(){var C=function(m,y){return y=y||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:m.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(g){!1!==(g=g.data.dialog).fire("ok",{hide:!0}).hide&&g.hide()}},y,!0)};return C.type="button",C.override=function(m){return CKEDITOR.tools.extend(function(y){return C(y,m)},{type:"button"},!0)},C}(),cancelButton:function(){var C=function(m,y){return y=y||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:m.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(g){!1!==(g=g.data.dialog).fire("cancel",{hide:!0}).hide&&g.hide()}},y,!0)};return C.type="button",C.override=function(m){return CKEDITOR.tools.extend(function(y){return C(y,m)},{type:"button"},!0)},C}(),addUIElement:function(C,m){this._.uiElementBuilders[C]=m}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype),_={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var w=function(C,m,y){for(var k,g=0;k=C[g];g++)if(k.id==m||y&&k[y]&&(k=w(k[y],m,y)))return k;return null},U=function(C,m,y,g,k){if(y){for(var L,b=0;L=C[b];b++){if(L.id==y)return C.splice(b,0,m),m;if(g&&L[g]&&(L=U(L[g],m,y,g,!0)))return L}if(k)return null}return C.push(m),m},$=function(C,m,y){for(var k,g=0;k=C[g];g++){if(k.id==m)return C.splice(g,1);if(y&&k[y]&&(k=$(k[y],m,y)))return k}return null};i.prototype={getContents:function(C){return w(this.contents,C)},getButton:function(C){return w(this.buttons,C)},addContents:function(C,m){return U(this.contents,C,m)},addButton:function(C,m){return U(this.buttons,C,m)},removeContents:function(C){$(this.contents,C)},removeButton:function(C){$(this.buttons,C)}},e.prototype={get:function(C){return w(this.elements,C,"children")},add:function(C,m){return U(this.elements,C,m,"children")},remove:function(C){$(this.elements,C,"children")}};var S={},q={};CKEDITOR.ui.dialog={uiElement:function(C,m,y,g,k,b,L){if(!(4>arguments.length)){var H=(g.call?g(m):g)||"div",G=["<",H," "],z=(k&&k.call?k(m):k)||{},X=(b&&b.call?b(m):b)||{},Z=(L&&L.call?L.call(this,C,m):L)||"",Y=this.domId=X.id||CKEDITOR.tools.getNextId()+"_uiElement";m.requiredContent&&!C.getParentEditor().filter.check(m.requiredContent)&&(z.display="none",this.notAllowed=!0),X.id=Y;var Q={};m.type&&(Q["cke_dialog_ui_"+m.type]=1),m.className&&(Q[m.className]=1),m.disabled&&(Q.cke_disabled=1);var te=X.class&&X.class.split?X.class.split(" "):[];for(Y=0;Y<te.length;Y++)te[Y]&&(Q[te[Y]]=1);for(Y in te=[],Q)te.push(Y);for(Y in X.class=te.join(" "),m.title&&(X.title=m.title),Q=(m.style||"").split(";"),m.align&&(te=m.align,z["margin-left"]="left"==te?0:"auto",z["margin-right"]="right"==te?0:"auto"),z)Q.push(Y+":"+z[Y]);for(m.hidden&&Q.push("display:none"),Y=Q.length-1;0<=Y;Y--)""===Q[Y]&&Q.splice(Y,1);for(Y in 0<Q.length&&(X.style=(X.style?X.style+"; ":"")+Q.join("; ")),X)G.push(Y+'="'+CKEDITOR.tools.htmlEncode(X[Y])+'" ');G.push(">",Z,"</",H,">"),y.push(G.join("")),(this._||(this._={})).dialog=C,"boolean"==typeof m.isChanged&&(this.isChanged=function(){return m.isChanged}),"function"==typeof m.isChanged&&(this.isChanged=m.isChanged),"function"==typeof m.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(se){return function(ee){se.call(this,m.setValue.call(this,ee))}})),"function"==typeof m.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(se){return function(){return m.getValue.call(this,se.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(m),this.accessKeyUp&&this.accessKeyDown&&m.accessKey&&A(this,C,"CTRL+"+m.accessKey);var oe=this;C.on("load",function(){var se=oe.getInputElement();if(se){var ee=oe.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";se.on("focus",function(){C._.tabBarMode=!1,C._.hasFocus=!0,oe.fire("focus"),ee&&this.addClass(ee)}),se.on("blur",function(){oe.fire("blur"),ee&&this.removeClass(ee)})}}),CKEDITOR.tools.extend(this,m),this.keyboardFocusable&&(this.tabIndex=m.tabIndex||0,this.focusIndex=C._.focusList.push(this)-1,this.on("focus",function(){C._.currentFocusIndex=oe.focusIndex}))}},hbox:function(C,m,y,g,k){if(!(4>arguments.length)){this._||(this._={});var G,b=this._.children=m,L=k&&k.widths||null,H=k&&k.height||null,z={role:"presentation"};k&&k.align&&(z.align=k.align),CKEDITOR.ui.dialog.uiElement.call(this,C,k||{type:"hbox"},g,"table",{},z,function(){var X=['<tbody><tr class="cke_dialog_ui_hbox">'];for(G=0;G<y.length;G++){var Z="cke_dialog_ui_hbox_child",Y=[];0===G&&(Z="cke_dialog_ui_hbox_first"),G==y.length-1&&(Z="cke_dialog_ui_hbox_last"),X.push('<td class="',Z,'" role="presentation" '),L?L[G]&&Y.push("width:"+j(L[G])):Y.push("width:"+Math.floor(100/y.length)+"%"),H&&Y.push("height:"+j(H)),k&&void 0!==k.padding&&Y.push("padding:"+j(k.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&b[G].align&&Y.push("text-align:"+b[G].align),0<Y.length&&X.push('style="'+Y.join("; ")+'" '),X.push(">",y[G],"</td>")}return X.push("</tr></tbody>"),X.join("")})}},vbox:function(C,m,y,g,k){if(!(3>arguments.length)){this._||(this._={});var b=this._.children=m,L=k&&k.width||null,H=k&&k.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,C,k||{type:"vbox"},g,"div",null,{role:"presentation"},function(){var G=['<table role="presentation" cellspacing="0" border="0" '];G.push('style="'),k&&k.expand&&G.push("height:100%;"),G.push("width:"+j(L||"100%"),";"),CKEDITOR.env.webkit&&G.push("float:none;"),G.push('"'),G.push('align="',CKEDITOR.tools.htmlEncode(k&&k.align||("ltr"==C.getParentEditor().lang.dir?"left":"right")),'" '),G.push("><tbody>");for(var z=0;z<y.length;z++){var X=[];G.push('<tr><td role="presentation" '),L&&X.push("width:"+j(L||"100%")),H?X.push("height:"+j(H[z])):k&&k.expand&&X.push("height:"+Math.floor(100/y.length)+"%"),k&&void 0!==k.padding&&X.push("padding:"+j(k.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&b[z].align&&X.push("text-align:"+b[z].align),0<X.length&&G.push('style="',X.join("; "),'" '),G.push(' class="cke_dialog_ui_vbox_child">',y[z],"</td></tr>")}return G.push("</tbody></table>"),G.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(C,m){return this.getInputElement().setValue(C),!m&&this.fire("change",{value:C}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var C=this.getInputElement();(C=C.getParent())&&-1==C.$.className.search("cke_dialog_page_contents"););return C?(C=C.getAttribute("name"),this._.dialog._.currentTabId!=C&&this._.dialog.selectPage(C),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(C){var y,k,m=/^on([A-Z]\w+)/,g=function(b,L,H,G){L.on("load",function(){b.getInputElement().on(H,G,b)})};for(k in C)(y=k.match(m))&&(this.eventProcessors[k]?this.eventProcessors[k].call(this,this._.dialog,C[k]):g(this,this._.dialog,y[1].toLowerCase(),C[k]));return this},eventProcessors:{onLoad:function(C,m){C.on("load",m,this)},onShow:function(C,m){C.on("show",m,this)},onHide:function(C,m){C.on("hide",m,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var C=this.getElement();this.getInputElement().setAttribute("disabled","true"),C.addClass("cke_disabled")},enable:function(){var C=this.getElement();this.getInputElement().removeAttribute("disabled"),C.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(C){return 1>arguments.length?this._.children.concat():(C.splice||(C=[C]),2>C.length?this._.children[C[0]]:this._.children[C[0]]&&this._.children[C[0]].getChild?this._.children[C[0]].getChild(C.slice(1,C.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var C={build:function(m,y,g){for(var b,k=y.children,L=[],H=[],G=0;G<k.length&&(b=k[G]);G++){var z=[];L.push(z),H.push(CKEDITOR.dialog._.uiElementBuilders[b.type].build(m,b,z))}return new CKEDITOR.ui.dialog[y.type](m,H,L,g,y)}};CKEDITOR.dialog.addUIElement("hbox",C),CKEDITOR.dialog.addUIElement("vbox",C)}(),CKEDITOR.dialogCommand=function(C,m){this.dialogName=C,CKEDITOR.tools.extend(this,m,!0)},CKEDITOR.dialogCommand.prototype={exec:function(C){var m=this.tabId;C.openDialog(this.dialogName,function(y){m&&y.selectPage(m)})},canUndo:!1,editorFocus:1},function(){var C=/^\d*$/,m=/^\d*(?:\.\d+)?$/,y=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,g=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,k=/^(--|-?([a-zA-Z_]|\\))(\\|[a-zA-Z0-9-_])*\s*?:\s*?[^:;]+$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var b=arguments;return function(L){this&&this.getValue&&(L=this.getValue());var H,X,G=CKEDITOR.VALIDATE_AND,z=[];for(X=0;X<b.length&&"function"==typeof b[X];X++)z.push(b[X]);X<b.length&&"string"==typeof b[X]&&(H=b[X],X++),X<b.length&&"number"==typeof b[X]&&(G=b[X]),X=G==CKEDITOR.VALIDATE_AND;for(var Z=0;Z<z.length;Z++){var Y=!0===z[Z](L);X=G==CKEDITOR.VALIDATE_AND?X&&Y:X||Y}return!!X||H}},regex:function(b,L){return this.functions(function(H){return b.test(H)},L)},notEmpty:function(b){return this.functions(function(L){return 0<L.replace(RegExp("^[\\u0020\\u00a0\\u1680\\u202f\\u205f\\u3000\\u2000-\\u200a\\s]+|[\\u0020\\u00a0\\u1680\\u202f\\u205f\\u3000\\u2000-\\u200a\\s]+$","g"),"").length},b)},integer:function(b){return this.regex(C,b)},number:function(b){return this.regex(m,b)},cssLength:function(b){return this.functions(function(L){return g.test(CKEDITOR.tools.trim(L))},b)},htmlLength:function(b){return this.functions(function(L){return y.test(CKEDITOR.tools.trim(L))},b)},inlineStyle:function(b){return this.functions(function(L){return""===(L=CKEDITOR.tools.trim(L).split(";"))[L.length-1]&&L.pop(),CKEDITOR.tools.array.every(L,function(H){return k.test(CKEDITOR.tools.trim(H))})},b)},equals:function(b,L){return this.functions(function(H){return H==b},L)},notEqual:function(b,L){return this.functions(function(H){return H!=b},L)}},CKEDITOR.on("instanceDestroyed",function(b){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var L;L=CKEDITOR.dialog._.currentTop;)L.hide();for(var H in S)S[H].remove();S={}}for(var G in b=b.editor._.storedDialogs)b[G].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(C,m,y){var g=null,k=CKEDITOR.dialog._.dialogDefinitions[C];if(null===CKEDITOR.dialog._.currentTop&&T(this),"function"==typeof k)k=this._.storedDialogs||(this._.storedDialogs={}),(g=k[C]||(k[C]=new CKEDITOR.dialog(this,C))).setModel(y),m&&m.call(g,g),g.show();else{if("failed"==k)throw h(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+C+'" failed when loading definition.');"string"==typeof k&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(k),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[C]&&(CKEDITOR.dialog._.dialogDefinitions[C]="failed"),this.openDialog(C,m,y)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),g&&g.once("hide",function(){g.setModel(null)},null,null,999),g}}),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(C){x||(CKEDITOR.document.appendStyleSheet(this.path+"styles/dialog.css"),x=!0),C.on("doubleclick",function(m){m.data.dialog&&C.openDialog(m.data.dialog)},null,null,999)}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var p=a.addCommand("about",new CKEDITOR.dialogCommand("about"));p.modes={wysiwyg:1,source:1},p.canUndo=!1,p.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var p=0,u=function(f,l,n,i){if(i){i=new CKEDITOR.style(i);var e=r[n];e.unshift(i),a.attachStyleStateChange(i,function(t){!a.readOnly&&a.getCommand(n).setState(t)}),a.addCommand(n,new CKEDITOR.styleCommand(i,{contentForms:e})),a.ui.addButton&&a.ui.addButton(f,{isToggle:!0,label:l,command:n,toolbar:"basicstyles,"+(p+=10)})}},r={bold:["strong","b",["span",function(f){return"bold"==(f=f.styles["font-weight"])||700<=+f}]],italic:["em","i",["span",function(f){return"italic"==f.styles["font-style"]}]],underline:["u",["span",function(f){return"underline"==f.styles["text-decoration"]}]],strike:["s","strike",["span",function(f){return"line-through"==f.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},s=a.config,c=a.lang.basicstyles;u("Bold",c.bold,"bold",s.coreStyles_bold),u("Italic",c.italic,"italic",s.coreStyles_italic),u("Underline",c.underline,"underline",s.coreStyles_underline),u("Strike",c.strike,"strike",s.coreStyles_strike),u("Subscript",c.subscript,"subscript",s.coreStyles_subscript),u("Superscript",c.superscript,"superscript",s.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])},afterInit:function(a){if(a.config.coreStyles_toggleSubSup){var p=a.getCommand("subscript"),u=a.getCommand("superscript");p&&u&&a.on("afterCommandExec",function(r){if("subscript"===(r=r.data.name)||"superscript"===r){var s="subscript"===r?u:p;("subscript"===r?p:u).state===CKEDITOR.TRISTATE_ON&&s.state===CKEDITOR.TRISTATE_ON&&(s.exec(a),a.fire("updateSnapshot"))}})}}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},CKEDITOR.config.coreStyles_toggleSubSup=!1,function(){function a(u,r){CKEDITOR.tools.extend(this,r,{editor:u,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:u._.notificationArea}),r.type||(this.type="info"),this.element=this._createElement(),u.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function p(u){var r=this;this.editor=u,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),u.on("destroy",function(){r._removeListeners(),r.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(u){u._.notificationArea=new p(u),u.showNotification=function(s,c,f){var l,n;return"progress"==c?l=f:n=f,(s=new CKEDITOR.plugins.notification(u,{message:s,type:c,progress:l,duration:n})).show(),s},u.on("key",function(s){if(27==s.data.keyCode){var c=u._.notificationArea.notifications;c.length&&(function r(s){var c=new CKEDITOR.dom.element("div");c.setStyles({position:"fixed","margin-left":"-9999px"}),c.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),c.setText(s),CKEDITOR.document.getBody().append(c),setTimeout(function(){c.remove()},100)}(u.lang.notification.closed),c[c.length-1].hide(),s.cancel())}})}}),a.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(u){var r=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:u})&&(r=!1);var s=this.element,c=s.findOne(".cke_notification_message"),f=s.findOne(".cke_notification_progress"),l=u.type;s.removeAttribute("role"),u.progress&&"progress"!=this.type&&(l="progress"),l&&(s.removeClass(this._getClass()),s.removeAttribute("aria-label"),this.type=l,s.addClass(this._getClass()),s.setAttribute("aria-label",this.type),"progress"!=this.type||f?"progress"!=this.type&&f&&f.remove():(f=this._createProgressElement()).insertBefore(c)),void 0!==u.message&&(this.message=u.message,c.setHtml(this.message)),void 0!==u.progress&&(this.progress=u.progress,f&&f.setStyle("width",this._getPercentageProgress())),r&&u.important&&(s.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=u.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var r,s,u=this,c=this.editor.lang.common.close;return(r=new CKEDITOR.dom.element("div")).addClass("cke_notification"),r.addClass(this._getClass()),r.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&r.append(this._createProgressElement()),(s=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),s.setHtml(this.message),r.append(s),s=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+c+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),r.append(s),s.on("click",function(){u.editor.focus(),u.hide()}),r},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var u=new CKEDITOR.dom.element("span");return u.addClass("cke_notification_progress"),u.setStyle("width",this._getPercentageProgress()),u},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var r,u=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?r=this.duration:("info"==this.type||"success"==this.type)&&(r="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),r&&(u._hideTimeoutId=setTimeout(function(){u.hide()},r))}},p.prototype={add:function(u){this.notifications.push(u),this.element.append(u.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(u){var r=CKEDITOR.tools.indexOf(this.notifications,u);0>r||(this.notifications.splice(r,1),u.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var u=this.editor,r=u.config,s=new CKEDITOR.dom.element("div");return s.addClass("cke_notifications_area"),s.setAttribute("id","cke_notifications_area_"+u.name),s.setStyle("z-index",r.baseFloatZIndex-2),s},_attachListeners:function(){var u=CKEDITOR.document.getWindow(),r=this.editor;u.on("scroll",this._uiBuffer.input),u.on("resize",this._uiBuffer.input),r.on("change",this._changeBuffer.input),r.on("floatingSpaceLayout",this._layout,this,null,20),r.on("blur",this._layout,this,null,20)},_removeListeners:function(){var u=CKEDITOR.document.getWindow(),r=this.editor;u.removeListener("scroll",this._uiBuffer.input),u.removeListener("resize",this._uiBuffer.input),r.removeListener("change",this._changeBuffer.input),r.removeListener("floatingSpaceLayout",this._layout),r.removeListener("blur",this._layout)},_layout:function(){function u(){r.setStyle("left",R(K+c.width-t-o))}var l,n,e,r=this.element,s=this.editor,c=s.ui.contentsElement.getClientRect(),f=s.ui.contentsElement.getDocumentPosition(),i=r.getClientRect(),t=this._notificationWidth,o=this._notificationMargin,d=(e=CKEDITOR.document.getWindow()).getScrollPosition(),E=e.getViewPaneSize(),T=CKEDITOR.document.getBody(),h=T.getDocumentPosition(),R=CKEDITOR.tools.cssLength;t&&o||(e=this.element.getChild(0),t=this._notificationWidth=e.getClientRect().width,o=this._notificationMargin=parseInt(e.getComputedStyle("margin-left"),10)+parseInt(e.getComputedStyle("margin-right"),10)),s.toolbar&&(n=(l=s.ui.space(s.config.toolbarLocation)).getClientRect()),l&&l.isVisible()&&n.bottom>c.top&&n.bottom<c.bottom-i.height?r.setStyles({position:"fixed",top:R(n.bottom)}):0<c.top?r.setStyles({position:"absolute",top:R(f.y)}):f.y+c.height-i.height>d.y?r.setStyles({position:"fixed",top:0}):r.setStyles({position:"absolute",top:R(f.y+c.height-i.height)});var K="fixed"==r.getStyle("position")?c.left:"static"!=T.getComputedStyle("position")?f.x-h.x:f.x;c.width<t+o?f.x+t+o>d.x+E.width?u():r.setStyle("left",R(K)):f.x+t+o>d.x+E.width?r.setStyle("left",R(K)):f.x+c.width/2+t/2+o>d.x+E.width?r.setStyle("left",R(K-f.x+d.x+E.width-t-o)):0>c.left+c.width-t-o?u():0>c.left+c.width/2-t/2?r.setStyle("left",R(K-f.x+d.x)):r.setStyle("left",R(K+c.width/2-t/2-o/2))}},CKEDITOR.plugins.notification=a}(),function(){var p='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"{hasArrowAriaHtml}{toggleAriaHtml}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(p+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(p+=' onblur="this.style.cssText = this.style.cssText;"');var a="";CKEDITOR.env.ie&&(a='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');p=p+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+a+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcutSpace}{ariaShortcut}</span>{arrowHtml}</a>';var u=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),r=CKEDITOR.addTemplate("button",p);CKEDITOR.plugins.add("button",{beforeInit:function(s){s.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(s){CKEDITOR.tools.extend(this,s,{isToggle:s.isToggle||!1,title:s.label,click:s.click||function(c){c.execCommand(s.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(s){return new CKEDITOR.ui.button(s)}},CKEDITOR.ui.button.prototype={render:function(s,c){function f(){var B=s.mode;B&&(B=this.modes[B]?void 0!==l[B]?l[B]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,B=s.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:B,this.setState(B),this.refresh&&this.refresh())}var o,d,E,l=null,n=CKEDITOR.env,i=this._.id=CKEDITOR.tools.getNextId(),e="",t=this.command;this._.editor=s;var A,T={id:i,button:this,editor:s,focus:function(){CKEDITOR.document.getById(i).focus()},execute:function(){this.button.click(s)},attach:function(B){this.button.attach(B)}},h=CKEDITOR.tools.addFunction(function(B){if(T.onkey)return B=new CKEDITOR.dom.event(B),!1!==T.onkey(T,B.getKeystroke())}),R=CKEDITOR.tools.addFunction(function(B){var j;return T.onfocus&&(j=!1!==T.onfocus(T,new CKEDITOR.dom.event(B))),j}),K=0;T.clickFn=o=CKEDITOR.tools.addFunction(function(){K&&(s.unlockSelection(1),K=0),T.execute(),n.iOS&&s.focus()}),this.modes?(l={},s.on("beforeModeUnload",function(){s.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(l[s.mode]=this._.state)},this),s.on("activeFilterChange",f,this),s.on("mode",f,this),!this.readOnly&&s.on("readOnly",f,this)):t&&(t=s.getCommand(t))&&(t.on("state",function(){this.setState(t.state)},this),e+=t.state==CKEDITOR.TRISTATE_ON?"on":t.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&s.on("contentDirChanged",function(B){var j=CKEDITOR.document.getById(this._.id),_=j.getFirst();(B=B.data)!=s.lang.dir?j.addClass("cke_"+B):j.removeClass("cke_ltr").removeClass("cke_rtl"),_.setAttribute("style",CKEDITOR.skin.getIconStyle(A,"rtl"==B,this.icon,this.iconOffset))},this),t?(d=s.getCommandKeystroke(t))&&(E=CKEDITOR.tools.keystrokeToString(s.lang.common.keyboard,d)):e+="off",d=this.name||this.command;var v=null,N=this.icon;return A=d,this.icon&&!/\./.test(this.icon)?(A=this.icon,N=null):(this.icon&&(v=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(v=this.iconHiDpi)),v?(CKEDITOR.skin.addIcon(v,v),N=null):v=A,e={id:i,name:d,iconName:A,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:e,ariaDisabled:"disabled"==e?"true":"false",title:this.title+(E?" ("+E.display+")":""),ariaShortcutSpace:E?"&nbsp;":"",ariaShortcut:E?s.lang.common.keyboardShortcut+" "+E.aria:"",titleJs:n.gecko&&!n.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:h,focusFn:R,clickFn:o,style:CKEDITOR.skin.getIconStyle(v,"rtl"==s.lang.dir,N,this.iconOffset),arrowHtml:this.hasArrow?u.output():"",hasArrowAriaHtml:this.hasArrow?' aria-expanded="false"':"",toggleAriaHtml:this.isToggle?'aria-pressed="false"':""},r.output(e,c),this.onRender&&this.onRender(),T},setState:function(s){if(this._.state==s)return!1;this._.state=s;var c=CKEDITOR.document.getById(this._.id);return!!c&&(c.setState(s,"cke_button"),c.setAttribute("aria-disabled",s==CKEDITOR.TRISTATE_DISABLED),this.isToggle&&!this.hasArrow&&c.setAttribute("aria-pressed",s===CKEDITOR.TRISTATE_ON),!0)},getState:function(){return this._.state},toFeature:function(s){if(this._.feature)return this._.feature;var c=this;return this.allowedContent||this.requiredContent||!this.command||(c=s.getCommand(this.command)||c),this._.feature=c}},CKEDITOR.ui.prototype.addButton=function(s,c){this.add(s,CKEDITOR.UI_BUTTON,c)}}(),function(){function a(s){function l(t,o){if(o.length){t.items?t.items.push(s.ui.create("-")):t.items=[];for(var d;d=o.shift();)d="string"==typeof d?d:d.name,i&&-1!=CKEDITOR.tools.indexOf(i,d)||(d=s.ui.create(d))&&s.addFeature(d)&&t.items.push(d)}}var t,i=(t=s.config.removeButtons)&&"string"==typeof t?t.split(","):t,e=s.config.toolbar;return"string"==typeof e&&(e=s.config["toolbar_"+e]),s.toolbar=e?function n(t){var d,E,T,o=[];for(d=0;d<t.length;++d)T={},"/"==(E=t[d])?o.push(E):CKEDITOR.tools.isArray(E)?(l(T,CKEDITOR.tools.clone(E)),o.push(T)):E.items&&(l(T,CKEDITOR.tools.clone(E.items)),T.name=E.name,o.push(T));return o}(e):function c(){for(var t=function f(){var o,d,E,t={};for(o in s.ui.items)d=s.ui.items[o],E=(E=d.toolbar||"others").split(","),d=E[0],E=parseInt(E[1]||-1,10),t[d]||(t[d]=[]),t[d].push({name:o,order:E});for(d in t)t[d]=t[d].sort(function(T,h){return T.order==h.order?0:0>h.order?-1:0>T.order?1:T.order<h.order?-1:1});return t}(),o=CKEDITOR.tools.clone(s.config.toolbarGroups)||p(s),d=0;d<o.length;d++){var E=o[d];if("/"!=E){"string"==typeof E&&(E=o[d]={name:E});var T,h=E.groups;if(h)for(var R=0;R<h.length;R++)(T=t[T=h[R]])&&l(E,T);(T=t[E.name])&&l(E,T)}}return o}()}function p(s){return s._.toolbarGroups||(s._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var u=function(){this.toolbars=[]};u.prototype.focus=function(){for(var c,s=0;c=this.toolbars[s++];)for(var l,f=0;l=c.items[f++];)if(l.focus)return void l.focus()};var r={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(s){s.toolbox&&(CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){s.toolbox.focus()},100):s.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(s){var c,f=function(l,n){var i,e=(t="rtl"==s.lang.dir)?37:39,t=t?39:37,o=void 0===(o=s.config.toolbarGroupCycling)||o;switch(n){case 9:case CKEDITOR.SHIFT+9:for(;!i||!i.items.length;)if((i=9==n?(i?i.next:l.toolbar.next)||s.toolbox.toolbars[0]:(i?i.previous:l.toolbar.previous)||s.toolbox.toolbars[s.toolbox.toolbars.length-1]).items.length)for(l=i.items[c?i.items.length-1:0];l&&!l.focus;)(l=c?l.previous:l.next)||(i=0);return l&&l.focus(),!1;case e:i=l;do{!(i=i.next)&&o&&(i=l.toolbar.items[0])}while(i&&!i.focus);return i?i.focus():f(l,9),!1;case 40:return l.button&&l.button.hasArrow?l.execute():f(l,40==n?e:t),!1;case t:case 38:i=l;do{!(i=i.previous)&&o&&(i=l.toolbar.items[l.toolbar.items.length-1])}while(i&&!i.focus);return i?i.focus():(c=1,f(l,CKEDITOR.SHIFT+9),c=0),!1;case 27:return s.focus(),!1;case 13:case 32:return l.execute(),!1;case CKEDITOR.ALT+122:return s.execCommand("elementsPathFocus"),!1}return!0};s.on("uiSpace",function(l){if(l.data.space==s.config.toolbarLocation){l.removeListener(),s.toolbox=new u;var e,t,n=['<span id="',i=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',s.lang.toolbar.toolbars,"</span>",'<span id="'+s.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',i,'" onmousedown="return false;">'],i=!1!==s.config.toolbarStartupExpanded;s.config.toolbarCanCollapse&&s.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&n.push('<span class="cke_toolbox_main"'+(i?">":' style="display:none">'));for(var o=s.toolbox.toolbars,d=a(s),E=d.length,T=0;T<E;T++){var h,K,N,R=0,A=d[T],v="/"!==A&&("/"===d[T+1]||T==E-1);if(A)if(e&&(n.push("</span>"),t=e=0),"/"===A)n.push('<span class="cke_toolbar_break"></span>');else{N=A.items||A;for(var B=0;B<N.length;B++){var _,j=N[B];if(j){var F=function(I){I=I.render(s,n),0<(x=R.items.push(I)-1)&&(I.previous=R.items[x-1],I.previous.next=I),I.toolbar=R,I.onkey=f};if(j.type==CKEDITOR.UI_SEPARATOR)t=e&&j;else{if(_=!1!==j.canGroup,!R){h=CKEDITOR.tools.getNextId(),R={id:h,items:[]},K=A.name&&(s.lang.toolbar.toolbarGroups[A.name]||A.name),n.push('<span id="',h,'" class="cke_toolbar'+(v?' cke_toolbar_last"':'"'),K?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),K&&n.push('<span id="',h,'_label" class="cke_voice_label">',K,"</span>"),n.push('<span class="cke_toolbar_start"></span>');var x=o.push(R)-1;0<x&&(R.previous=o[x-1],R.previous.next=R)}_?e||(n.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(n.push("</span>"),e=0),t&&(F(t),t=0),F(j)}}}e&&(n.push("</span>"),t=e=0),R&&n.push('<span class="cke_toolbar_end"></span></span>')}}if(s.config.toolbarCanCollapse&&n.push("</span>"),s.config.toolbarCanCollapse&&s.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var O=CKEDITOR.tools.addFunction(function(){s.execCommand("toolbarCollapse")});s.on("destroy",function(){CKEDITOR.tools.removeFunction(O)}),s.addCommand("toolbarCollapse",{readOnly:1,exec:function(I){var w=I.ui.space("toolbar_collapser"),U=w.getPrevious(),$=I.ui.space("contents"),S=U.getParent(),q=parseInt($.$.style.height,10),C=S.$.offsetHeight,m=w.hasClass("cke_toolbox_collapser_min");m?(U.show(),w.removeClass("cke_toolbox_collapser_min"),w.setAttribute("title",I.lang.toolbar.toolbarCollapse)):(U.hide(),w.addClass("cke_toolbox_collapser_min"),w.setAttribute("title",I.lang.toolbar.toolbarExpand)),w.getFirst().setText(m?"\u25b2":"\u25c0"),$.setStyle("height",q-(S.$.offsetHeight-C)+"px"),I.fire("resize",{outerHeight:I.container.$.offsetHeight,contentsHeight:$.$.offsetHeight,outerWidth:I.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),s.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),n.push('<a title="'+(i?s.lang.toolbar.toolbarCollapse:s.lang.toolbar.toolbarExpand)+'" id="'+s.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),i||n.push(" cke_toolbox_collapser_min"),n.push('" onclick="CKEDITOR.tools.callFunction('+O+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}n.push("</span>"),l.data.html+=n.join("")}}),s.on("destroy",function(){if(this.toolbox){var l,i,e,t,n=0;for(l=this.toolbox.toolbars;n<l.length;n++)for(e=l[n].items,i=0;i<e.length;i++)(t=e[i]).clickFn&&CKEDITOR.tools.removeFunction(t.clickFn),t.keyDownFn&&CKEDITOR.tools.removeFunction(t.keyDownFn)}}),s.on("uiReady",function(){var l=s.ui.space("toolbox");l&&s.focusManager.add(l,1)}),s.addCommand("toolbarFocus",r),s.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),s.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),s.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(l,n){return n.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(s,c,f){var l=p(this.editor),n=0===c,i={name:s};if(f){if(f=CKEDITOR.tools.search(l,function(e){return e.name==f}))return!f.groups&&(f.groups=[]),c&&0<=(c=CKEDITOR.tools.indexOf(f.groups,c))?void f.groups.splice(c+1,0,s):void(n?f.groups.splice(0,0,s):f.groups.push(s));c=null}c&&(c=CKEDITOR.tools.indexOf(l,function(e){return e.name==c})),n?l.splice(0,0,s):"number"==typeof c?l.splice(c+1,0,i):l.push(s)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function a(e,t,o){return t.type||(t.type="auto"),!(o&&!1===e.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&e.toolbox&&e.once("afterPaste",function(){e.toolbox.focus(),e.focus()}),e.fire("paste",t))}function p(e){function t(){var w,O=e.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var I=function(U){e.getSelection().isCollapsed()||(e.readOnly&&"cut"==U.name||_.initPasteDataTransfer(U,e),U.data.preventDefault())};O.on("copy",I),O.on("cut",I),O.on("cut",function(){e.readOnly||e.extractSelectedHtml()},null,null,999)}O.on(_.mainPasteEvent,function(U){"beforepaste"==_.mainPasteEvent&&F||N(U)}),"beforepaste"==_.mainPasteEvent&&(O.on("paste",function(U){x||(E(),U.data.preventDefault(),N(U),h("paste"))}),O.on("contextmenu",T,null,null,0),O.on("beforepaste",function(U){!U.data||U.data.$.ctrlKey||U.data.$.shiftKey||T()},null,null,0)),O.on("beforecut",function(){!F&&R()}),O.attachListener(CKEDITOR.env.ie?O:e.document.getDocumentElement(),"mouseup",function(){w=setTimeout(B,0)}),e.on("destroy",function(){clearTimeout(w)}),O.on("keyup",B)}function o(O){return{type:O,canUndo:"cut"==O,startDisabled:!0,fakeKeystroke:"cut"==O?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&R();var I,w=this.type;if(CKEDITOR.env.ie)I=h(w);else try{I=e.document.$.execCommand(w,!1,null)}catch{I=!1}return I||e.showNotification(e.lang.clipboard[this.type+"Error"]),I}}}function E(){x=1,setTimeout(function(){x=0},100)}function T(){F=1,setTimeout(function(){F=0},10)}function h(O){var I=e.document,w=I.getBody(),U=!1,$=function(){U=!0};return w.on(O,$),7<CKEDITOR.env.version?I.$.execCommand(O):I.$.selection.createRange().execCommand(O),w.removeListener(O,$),U}function R(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var I,w,U,O=e.getSelection();O.getType()==CKEDITOR.SELECTION_ELEMENT&&(I=O.getSelectedElement())&&(w=O.getRanges()[0],(U=e.document.createText("")).insertBefore(I),w.setStartBefore(U),w.setEndAfter(I),O.selectRanges([w]),setTimeout(function(){I.getParent()&&(U.remove(),O.selectElement(I))},0))}}function v(O){if("wysiwyg"==e.mode)switch(O.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:O=e.editable(),E(),"paste"==_.mainPasteEvent&&O.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:e.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},50)}}function N(O){var I={type:"auto",method:"paste",dataTransfer:_.initPasteDataTransfer(O)};I.dataTransfer.cacheData();var w=!1!==e.fire("beforePaste",I);w&&_.canClipboardApiBeTrusted(I.dataTransfer,e)?(O.data.preventDefault(),setTimeout(function(){a(e,I)},0)):function K(O,I){var S,w=e.document,U=e.editable(),$=function(b){b.cancel()};if(!w.getById("cke_pastebin")){var q=e.getSelection(),C=q.createBookmarks();CKEDITOR.env.ie&&q.root.fire("selectionchange");var m=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!U.is("body")||CKEDITOR.env.ie?"div":"body",w);m.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var y=0;w=w.getWindow(),CKEDITOR.env.webkit?(U.append(m),m.addClass("cke_editable"),U.is("body")||(y=(y="static"!=U.getComputedStyle("position")?U:CKEDITOR.dom.element.get(U.$.offsetParent)).getDocumentPosition().y)):U.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(m),m.setStyles({position:"absolute",top:w.getScrollPosition().y-y+10+"px",width:"1px",height:Math.max(1,w.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&m.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(y=m.getParent().isReadOnly())?(m.setOpacity(0),m.setAttribute("contenteditable",!0)):m.setStyle("ltr"==e.config.contentsLangDirection?"left":"right","-10000px"),e.on("selectionChange",$,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(S=U.once("blur",$,null,null,-100)),y&&m.focus(),(y=new CKEDITOR.dom.range(m)).selectNodeContents(m);var g=y.select();CKEDITOR.env.ie&&(S=U.once("blur",function(){e.lockSelection(g)}));var k=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var L;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=k),S&&S.removeListener(),CKEDITOR.env.ie&&U.focus(),q.selectBookmarks(C),m.remove(),CKEDITOR.env.webkit&&(L=m.getFirst())&&L.is&&L.hasClass("Apple-style-span")&&(m=L),e.removeListener("selectionChange",$),I(m.getHtml())},0)}}(0,function(U){I.dataValue=U.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),w&&a(e,I)})}function B(){if("wysiwyg"==e.mode){var O=j("paste");e.getCommand("cut").setState(j("cut")),e.getCommand("copy").setState(j("copy")),e.getCommand("paste").setState(O),e.fire("pasteState",O)}}function j(O){var I=(I=e.getSelection())&&I.getRanges()[0];return(e.readOnly||I&&I.checkReadOnly())&&O in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==O?CKEDITOR.TRISTATE_OFF:(I=(O=e.getSelection()).getRanges(),O.getType()==CKEDITOR.SELECTION_NONE||1==I.length&&I[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var _=CKEDITOR.plugins.clipboard,F=0,x=0;(function(){if(e.on("key",v),e.on("contentDom",t),e.on("selectionChange",B),e.contextMenu){e.contextMenu.addListener(function(){return{cut:j("cut"),copy:j("copy"),paste:j("paste")}});var O=null;e.on("menuShow",function(){O&&(O.removeListener(),O=null);var I=e.contextMenu.findItemByCommandName("paste");I&&I.element&&(O=I.element.on("touchend",function(){e._.forcePasteDialog=!0}))})}e.ui.addButton&&e.once("instanceReady",function(){e._.pasteButtons&&CKEDITOR.tools.array.forEach(e._.pasteButtons,function(I){(I=e.ui.get(I))&&(I=CKEDITOR.document.getById(I._.id))&&I.on("touchend",function(){e._.forcePasteDialog=!0})})})})(),function(){function O(I,w,U,$,S){var q=e.lang.clipboard[w];e.addCommand(w,U),e.ui.addButton&&e.ui.addButton(I,{label:q,command:w,toolbar:"clipboard,"+$}),e.addMenuItems&&e.addMenuItem(w,{label:q,command:w,group:"clipboard",order:S})}O("Cut","cut",o("cut"),10,1),O("Copy","copy",o("copy"),20,4),O("Paste","paste",function d(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(O,I){function w(m,y){y=!(typeof y<"u")||y,m?(m.method="paste",m.dataTransfer||(m.dataTransfer=_.initPasteDataTransfer()),a(O,m,y)):$&&!O._.forcePasteDialog&&O.showNotification(q,"info",O.config.clipboard_notificationDuration),O._.forcePasteDialog=!1,O.fire("afterCommandExec",{name:"paste",command:U,returnValue:!!m})}var U=this,$=!(typeof(I=typeof I<"u"&&null!==I?I:{}).notification<"u")||I.notification,S=I.type,C=CKEDITOR.tools.keystrokeToString(O.lang.common.keyboard,O.getCommandKeystroke(this)),q="string"==typeof $?$:O.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+C.aria+'">'+C.display+"</kbd>");C="string"==typeof I?I:I.dataValue,S&&!0!==O.config.forcePasteAsPlainText&&"allow-word"!==O.config.forcePasteAsPlainText?O._.nextPasteType=S:delete O._.nextPasteType,"string"==typeof C?w({dataValue:C}):O.getClipboardData(w)}}}(),30,8),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push("Paste")}(),e.getClipboardData=function(O,I){function w(q){q.removeListener(),q.cancel(),I(q.data)}function U(q){q.removeListener(),q.cancel(),I({type:S,dataValue:q.data.dataValue,dataTransfer:q.data.dataTransfer,method:"paste"})}var $=!1,S="auto";I||(I=O,O=null),e.on("beforePaste",function(q){q.removeListener(),$=!0,S=q.data.type},null,null,1e3),e.on("paste",w,null,null,0),!1===function A(){if("paste"==_.mainPasteEvent)return e.fire("beforePaste",{type:"auto",method:"paste"}),!1;e.focus(),E();var O=e.focusManager;return O.lock(),e.editable().fire(_.mainPasteEvent)&&!h("paste")?(O.unlock(),!1):(O.unlock(),!0)}()&&(e.removeListener("paste",w),e._.forcePasteDialog&&$&&e.fire("pasteDialog")?(e.on("pasteDialogCommit",U),e.on("dialogHide",function(q){q.removeListener(),q.data.removeListener("pasteDialogCommit",U),q.data._.committed||I(null)})):I(null))}}function r(e,t){function o(d){return CKEDITOR.tools.repeat("</p><p>",~~(d/2))+(d%2==1?"<br>":"")}return(t=(t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(d){return d.toLowerCase()})).match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(d){return o(d.split("</div><div>").length+1)})+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&e.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,function(d){return o(d.length/4)})+"</p>")),function f(e,t){return e.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(o){return CKEDITOR.tools.repeat("<br>",o.length/7*2)}).replace(/<\/?p>/g,""):e.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}(e,t))}function c(e,t,o){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var d=new CKEDITOR.htmlParser.basicWriter;return o.applyTo(t,!0,!1,e.activeEnterMode),t.writeHtml(d),d.getHtml()}function l(e){e.data.preventDefault(),e.data.$.dataTransfer.dropEffect="none"}function n(e){var t=CKEDITOR.plugins.clipboard;e.on("contentDom",function(){function E(v,N,B){var j={$:v.data.$,target:v.data.getTarget()};N&&(j.dragRange=N),B&&(j.dropRange=B),!1===e.fire(v.name,j)&&v.data.preventDefault()}function T(v){return v.type!=CKEDITOR.NODE_ELEMENT&&(v=v.getParent()),v.getChildCount()}var h=e.editable(),R=CKEDITOR.plugins.clipboard.getDropTarget(e),K=e.ui.space("top"),A=e.ui.space("bottom");t.preventDefaultDropOnElement(K),t.preventDefaultDropOnElement(A),h.attachListener(R,"dragstart",E),h.attachListener(e,"dragstart",t.resetDragDataTransfer,t,null,1),h.attachListener(e,"dragstart",function(v){t.initDragDataTransfer(v,e)},null,null,2),h.attachListener(e,"dragstart",function(){var v=t.dragRange=e.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(t.dragStartContainerChildCount=v?T(v.startContainer):null,t.dragEndContainerChildCount=v?T(v.endContainer):null)},null,null,100),h.attachListener(R,"dragend",E),h.attachListener(e,"dragend",t.initDragDataTransfer,t,null,1),h.attachListener(e,"dragend",t.resetDragDataTransfer,t,null,100),h.attachListener(R,"dragover",function(v){if(CKEDITOR.env.edge)v.data.preventDefault();else{var N=v.data.getTarget();(N&&N.is&&N.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&v.data.$.dataTransfer.types.contains("Files"))&&v.data.preventDefault()}}),h.attachListener(R,"drop",function(v){if(!v.data.$.defaultPrevented&&(v.data.preventDefault(),!e.readOnly)&&(!(N=v.data.getTarget()).isReadOnly()||N.type==CKEDITOR.NODE_ELEMENT&&N.is("html"))){var N=t.getRangeAtDropPosition(v,e),B=t.dragRange;N&&E(v,B,N)}},null,null,9999),h.attachListener(e,"drop",t.initDragDataTransfer,t,null,1),h.attachListener(e,"drop",function(v){if(v=v.data){var N=v.dropRange,B=v.dragRange,j=v.dataTransfer;j.getTransferType(e)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){t.internalDrop(B,N,j,e)},0):j.getTransferType(e)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function o(v,N,B){N.select(),a(e,{dataTransfer:B,method:"drop"},1),B.sourceEditor.fire("saveSnapshot"),B.sourceEditor.editable().extractHtmlFromRange(v),B.sourceEditor.getSelection().selectRanges([v]),B.sourceEditor.fire("saveSnapshot")}(B,N,j):function d(v,N){v.select(),a(e,{dataTransfer:N,method:"drop"},1),t.resetDragDataTransfer()}(N,j)}},null,null,9999)})}var i;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",_supportedFileMatchers:[],init:function(e){function t(v){return!!e.config.clipboard_handleImages&&-1!==CKEDITOR.tools.indexOf(["image/png","image/jpeg","image/gif"],v.type)}function o(v){return CKEDITOR.tools.array.some(e.plugins.clipboard._supportedFileMatchers,function(N){return N(v)})}function d(v){v.length&&(v=CKEDITOR.tools.array.unique(v),v=function E(v){return v?e.lang.clipboard.fileFormatNotSupportedNotification.replace(/\${formats\}/g,"<em>"+v+"</em>"):e.lang.clipboard.fileWithoutFormatNotSupportedNotification}((v=CKEDITOR.tools.array.filter(v,function(N){return!!CKEDITOR.tools.trim(N)})).join(", ")),e.showNotification(v,"info",e.config.clipboard_notificationDuration))}var h,R=function s(e){function t(){var E,d={};for(E in CKEDITOR.dtd)"$"!=E.charAt(0)&&"div"!=E&&"span"!=E&&(d[E]=1);return d}var o={};return{get:function(d){return"plain-text"==d?o.plainText||(o.plainText=new CKEDITOR.filter(e,"br")):"semantic-content"==d?((d=o.semanticContent)||((d=new CKEDITOR.filter(e,{})).allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),d=o.semanticContent=d),d):d?new CKEDITOR.filter(e,d):null}}}(e);e.config.forcePasteAsPlainText?h="plain-text":e.config.pasteFilter?h=e.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in e.config||(h="semantic-content"),e.pasteFilter=R.get(h),p(e),n(e),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));var A,K=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||CKEDITOR.plugins.clipboard.isFileApiSupported;CKEDITOR.plugins.clipboard.addFileMatcher(e,t),e.on("paste",function(v){if(K&&(v=(N=v.data).dataTransfer,!N.dataValue)){for(var N=[],B=0;B<v.getFilesCount();B++){var j=v.getFile(B);o(j)||N.push(j.type)}d(N)}},null,null,1),e.on("paste",function(v){if(K&&e.config.clipboard_handleImages){var N=v.data,B=N.dataTransfer;if(!N.dataValue&&function T(v,N){return!(CKEDITOR.env.ie&&v.data.fileTransferCancel||!(CKEDITOR.env.ie||N&&A!==N.id))&&N.isFileTransfer()&&1===N.getFilesCount()}(v,B)&&t(B=B.getFile(0))){var j=new FileReader;j.addEventListener("load",function(){v.data.dataValue='<img src="'+j.result+'" />',e.fire("paste",v.data)},!1),j.addEventListener("abort",function(){CKEDITOR.env.ie&&(v.data.fileTransferCancel=!0),e.fire("paste",v.data)},!1),j.addEventListener("error",function(){CKEDITOR.env.ie&&(v.data.fileTransferCancel=!0),e.fire("paste",v.data)},!1),j.readAsDataURL(B),A=N.dataTransfer.id,v.stop()}}},null,null,1),e.on("paste",function(v){if(v.data.dataTransfer||(v.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!v.data.dataValue){var N=v.data.dataTransfer,B=N.getData("text/html");B?(v.data.dataValue=B,v.data.type="html"):(B=N.getData("text/plain"))&&(v.data.dataValue=e.editable().transformPlainTextToHtml(B),v.data.type="text")}},null,null,1),e.on("paste",function(v){var N=v.data.dataValue,B=CKEDITOR.dtd.$block;if(-1<N.indexOf("Apple-")&&(N=N.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=v.data.type&&(N=N.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(x,O){return O.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<N.indexOf('<br class="Apple-interchange-newline">')&&(v.data.startsWithEOL=1,v.data.preSniffing="html",N=N.replace(/<br class="Apple-interchange-newline">/,"")),N=N.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),N.match(/^<[^<]+cke_(editable|contents)/i)){var j,_,F=new CKEDITOR.dom.element("div");for(F.setHtml(N);1==F.getChildCount()&&(j=F.getFirst())&&j.type==CKEDITOR.NODE_ELEMENT&&(j.hasClass("cke_editable")||j.hasClass("cke_contents"));)F=_=j;_&&(N=_.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?N=N.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(x,O){return O.toLowerCase()in B?(v.data.preSniffing="html","<"+O):x}):CKEDITOR.env.webkit?N=N.replace(/<\/(\w+)><div><br><\/div>$/,function(x,O){return O in B?(v.data.endsWithEOL=1,"</"+O+">"):x}):CKEDITOR.env.gecko&&(N=N.replace(/(\s)<br>$/,"$1")),v.data.dataValue=N},null,null,3),e.on("paste",function(v){v=v.data;var j,N=e._.nextPasteType||v.type,B=v.dataValue,_=e.config.clipboard_defaultContentType||"html",F=v.dataTransfer.getTransferType(e)==CKEDITOR.DATA_TRANSFER_EXTERNAL,x=!0===e.config.forcePasteAsPlainText;j="html"==N||"html"==v.preSniffing?"html":function u(e){if(CKEDITOR.env.webkit){if(!e.match(/^[^<]*$/g)&&!e.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!e.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!e.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(B),delete e._.nextPasteType,"htmlifiedtext"==j&&(B=r(e.config,B)),"text"==N&&"html"==j?B=c(e,B,R.get("plain-text")):(F&&e.pasteFilter&&!v.dontFilter||x)&&(B=c(e,B,e.pasteFilter)),v.startsWithEOL&&(B='<br data-cke-eol="1">'+B),v.endsWithEOL&&(B+='<br data-cke-eol="1">'),"auto"==N&&(N="html"==j||"html"==_?"html":"text"),v.type=N,v.dataValue=B,delete v.preSniffing,delete v.startsWithEOL,delete v.endsWithEOL},null,null,6),e.on("paste",function(v){(v=v.data).dataValue&&(e.insertHtml(v.dataValue,v.type,v.range),setTimeout(function(){e.fire("afterPaste")},0))},null,null,1e3),e.on("pasteDialog",function(v){setTimeout(function(){e.openDialog("paste",v.data)},0)})}}),CKEDITOR.plugins.clipboard={addFileMatcher:function(e,t){e.plugins.clipboard._supportedFileMatchers.push(t)},isCustomCopyCutSupported:!(CKEDITOR.env.ie&&16>CKEDITOR.env.version||CKEDITOR.env.iOS&&605>CKEDITOR.env.version),isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(e,t,o){e.ui.addButton&&(e.ui.addButton(t,o),e._.pasteButtons||(e._.pasteButtons=[]),e._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(e,t){return!!(e.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!e.isEmpty()||CKEDITOR.env.gecko&&(e.getData("text/html")||e.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.iOS&&605<=CKEDITOR.env.version||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(e){var t=e.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:e.document},fixSplitNodesAfterDrop:function(e,t,o,d){function E(h,R,K){var A=h;if(A.type==CKEDITOR.NODE_TEXT&&(A=h.getParent()),A.equals(R)&&K!=R.getChildCount())return h=t.startContainer.getChild(t.startOffset-1),R=t.startContainer.getChild(t.startOffset),h&&h.type==CKEDITOR.NODE_TEXT&&R&&R.type==CKEDITOR.NODE_TEXT&&(K=h.getLength(),h.setText(h.getText()+R.getText()),R.remove(),t.setStart(h,K),t.collapse(!0)),!0}var T=t.startContainer;"number"==typeof d&&"number"==typeof o&&T.type==CKEDITOR.NODE_ELEMENT&&(E(e.startContainer,T,o)||E(e.endContainer,T,d))},isDropRangeAffectedByDragRange:function(e,t){var o=t.startContainer,d=t.endOffset;return!!(e.endContainer.equals(o)&&e.endOffset<=d||e.startContainer.getParent().equals(o)&&e.startContainer.getIndex()<d||e.endContainer.getParent().equals(o)&&e.endContainer.getIndex()<d)},internalDrop:function(e,t,o,d){var h,R,E=CKEDITOR.plugins.clipboard,T=d.editable();d.fire("saveSnapshot"),d.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(e,t,E.dragStartContainerChildCount,E.dragEndContainerChildCount),(R=this.isDropRangeAffectedByDragRange(e,t))||(h=e.createBookmark(!1)),E=t.clone().createBookmark(!1),R&&(h=e.createBookmark(!1)),e=h.startNode,t=h.endNode,R=E.startNode,t&&e.getPosition(R)&CKEDITOR.POSITION_PRECEDING&&t.getPosition(R)&CKEDITOR.POSITION_FOLLOWING&&R.insertBefore(e),(e=d.createRange()).moveToBookmark(h),T.extractHtmlFromRange(e,1),t=d.createRange(),E.startNode.getCommonAncestor(T)||(E=d.getSelection().createBookmarks()[0]),t.moveToBookmark(E),a(d,{dataTransfer:o,method:"drop",range:t},1),d.fire("unlockSnapshot")},getRangeAtDropPosition:function(e,t){var o=e.data.$,d=o.clientX,E=o.clientY,T=t.getSelection(!0).getRanges()[0],h=t.createRange();if(e.data.testRange)return e.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(d,E))o=t.document.$.caretRangeFromPoint(d,E),h.setStart(CKEDITOR.dom.node(o.startContainer),o.startOffset),h.collapse(!0);else if(o.rangeParent)h.setStart(CKEDITOR.dom.node(o.rangeParent),o.rangeOffset),h.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&T&&t.editable().hasFocus)return T;if(!document.body.createTextRange)return null;t.focus(),o=t.document.getBody().$.createTextRange();try{for(var R=!1,K=0;20>K&&!R;K++){if(!R)try{o.moveToPoint(d,E-K),R=!0}catch{}if(!R)try{o.moveToPoint(d,E+K),R=!0}catch{}}if(R){var A="cke-temp-"+(new Date).getTime();o.pasteHTML('<span id="'+A+'">\u200b</span>');var v=t.document.getById(A);h.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START),v.remove()}else{var N=t.document.$.elementFromPoint(d,E),B=new CKEDITOR.dom.element(N);if(B.equals(t.editable())||"html"==B.getName())return T&&T.startContainer&&!T.startContainer.equals(t.editable())?T:null;d<B.getClientRect().left?h.setStartAt(B,CKEDITOR.POSITION_AFTER_START):h.setStartAt(B,CKEDITOR.POSITION_BEFORE_END),h.collapse(!0)}}catch{return null}}return h},initDragDataTransfer:function(e,t){var o=e.data.$?e.data.$.dataTransfer:null,d=new this.dataTransfer(o,t);"dragstart"===e.name&&d.storeId(),o?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d,e.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(e,t){if(this.isCustomCopyCutSupported){if(e&&e.data&&e.data.$){var o=e.data.$.clipboardData,d=new this.dataTransfer(o,t);return"copy"!==e.name&&"cut"!==e.name||d.storeId(),this.copyCutData&&d.id==this.copyCutData.id?(d=this.copyCutData).$=o:this.copyCutData=d,d}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&e&&e.data.$&&e.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(e){e&&e.on("dragover",l)}},i=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(e,t){e&&(this.$=e),this._={metaRegExp:/^<meta.*?>/i,fragmentRegExp:/\s*\x3c!--StartFragment--\x3e|\x3c!--EndFragment--\x3e\s*/g,types:[],data:{},files:[],nativeHtmlCache:"",normalizeType:function(o){return"text"==(o=o.toLowerCase())||"text/plain"==o?"Text":"url"==o?"URL":"files"===o?"Files":o}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(i),this.id||(this.id="Text"==i?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==i||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(e,t){if(null==(d="text/html"==(e=this._.normalizeType(e))&&t?this._.nativeHtmlCache:this._.data[e])||""===d){if(this._.fallbackDataTransfer.isRequired())d=this._.fallbackDataTransfer.getData(e,t);else try{d=this.$.getData(e)||""}catch{d=""}"text/html"!=e||t||(d=this._stripHtml(d))}if("Text"==e&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==d.substring(0,7)&&(d=""),"string"==typeof d)var o=d.indexOf("</html>"),d=-1!==o?d.substring(0,o+7):d;return d},setData:function(e,t){if("text/html"==(e=this._.normalizeType(e))?(this._.data[e]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[e]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==e||"Text"==e)if("Text"==i&&"Text"==e&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(e,t);else try{this.$.setData(e,t)}catch{}},storeId:function(){"Text"!==i&&this.setData(i,this.id)},getTransferType:function(e){return this.sourceEditor?this.sourceEditor==e?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function e(T){T=t._.normalizeType(T);var h=t.getData(T);"text/html"==T&&(t._.nativeHtmlCache=t.getData(T,!0),h=t._stripHtml(h)),h&&(t._.data[T]=h),t._.types.push(T)}if(this.$){var o,d,E,t=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(o=0;o<this.$.types.length;o++)e(this.$.types[o])}else e("Text"),e("URL");if(d=this._getImageFromClipboard(),(E=this.$&&this.$.files||null)||d){if(this._.files=[],E&&E.length)for(o=0;o<E.length;o++)this._.files.push(E[o]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){if(this._.files.length)return this._.files.length;var e=this.$&&this.$.files||null;return e&&e.length?e.length:this._getImageFromClipboard()?1:0},getFile:function(e){if(this._.files.length)return this._.files[e];var t=this.$&&this.$.files||null;return t&&t.length?t[e]:0===e?this._getImageFromClipboard():void 0},isFileTransfer:function(){var e=this.getTypes();return 1===(e=CKEDITOR.tools.array.filter(e,function(t){return"application/x-moz-file"!==t})).length&&"files"===e[0].toLowerCase()},isEmpty:function(){var t,e={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),function(d){e[d]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var o=0;o<this.$.types.length;o++)e[this.$.types[o]]=1}else e.Text=1,e.URL=1;for(t in"Text"!=i&&(e[i]=0),e)if(e[t]&&""!==this.getData(t))return!1;return!0},getTypes:function(){return 0<this._.types.length?this._.types:this.$&&this.$.types?[].slice.call(this.$.types):[]},_getImageFromClipboard:function(){var e;try{if(this.$&&this.$.items&&this.$.items[0]&&(e=this.$.items[0].getAsFile())&&e.type)return e}catch{}},_stripHtml:function(e){return e&&e.length&&(e=(e=(e=function t(o){var E,T,d=new CKEDITOR.htmlParser;return d.onTagOpen=function(h){"body"===h&&(E=d._.htmlPartsRegex.lastIndex)},d.onTagClose=function(h){"body"===h&&(T=d._.htmlPartsRegex.lastIndex)},d.parse(o),"number"!=typeof E||"number"!=typeof T?o:o.substring(E,T).replace(/<\/body\s*>$/gi,"")}(e)).replace(this._.metaRegExp,"")).replace(this._.fragmentRegExp,"")),e}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(e){this._dataTransfer=e,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===e._isCustomMimeTypeSupported){if(!t)return!1;if(e._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),e._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch{}}return!e._isCustomMimeTypeSupported},getData:function(e,t){var o=this._getData(this._customDataFallbackType,!0);if(t)return o;o=this._extractDataComment(o);var d=null;return null!==(d=e===this._customDataFallbackType?o.content:o.data&&o.data[e]?o.data[e]:this._getData(e,!0))?d:""},setData:function(e,t){(o=e===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var d=t,E=this._dataTransfer.$;try{E.setData(e,d),o&&(this._dataTransfer._.nativeHtmlCache=d)}catch(h){if(this._isUnsupportedMimeTypeError(h)){o=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(o._customTypes,e)&&o._customTypes.push(e);var o=this._getFallbackTypeContent(),T=this._getFallbackTypeData();T[e]=d;try{d=this._applyDataComment(o,T),E.setData(this._customDataFallbackType,d),this._dataTransfer._.nativeHtmlCache=d}catch{d=""}}}return d},_getData:function(e,t){var o=this._dataTransfer._.data;if(!t&&o[e])return o[e];try{return this._dataTransfer.$.getData(e)}catch{return null}},_getFallbackTypeContent:function(){var e=this._dataTransfer._.data[this._customDataFallbackType];return e||(e=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),e},_getFallbackTypeData:function(){var e=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},o=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(e,function(d){void 0!==o[d]?t[d]=o[d]:void 0!==t[d]&&(t[d]=t[d])},this),t},_isUnsupportedMimeTypeError:function(e){return e.message&&-1!==e.message.search(/element not found/gi)},_extractDataComment:function(e){var o,t={data:null,content:e||""};e&&16<e.length&&((o=/\x3c!--cke-data:(.*?)--\x3e/g.exec(e))&&o[1]&&(t.data=JSON.parse(decodeURIComponent(o[1])),t.content=e.replace(o[0],"")));return t},_applyDataComment:function(e,t){var o="";return t&&CKEDITOR.tools.object.keys(t).length&&(o="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),o+(e&&e.length?e:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,CKEDITOR.config.clipboard_handleImages=!0,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function a(p){var u=this._;u.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(p),u.on?u.panel.hide():u.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(p){var u=p.panel||{};delete p.panel,this.base(p),this.document=u.parent&&u.parent.getDocument()||CKEDITOR.document,u.block={attributes:u.attributes},u.toolbarRelated=!0,this.hasArrow="listbox",this.click=a,this._={panelDefinition:u}},statics:{handler:{create:function(p){return new CKEDITOR.ui.panelButton(p)}}},proto:{createPanel:function(p){var u=this._;if(!u.panel){var l=this._.panelDefinition,r=this._.panelDefinition.block,s=l.parent||CKEDITOR.document.getBody(),c=CKEDITOR.document.getById(this._.id),f=this._.panel=new CKEDITOR.ui.floatPanel(p,s,l),n=(l=f.addBlock(u.id,r),this),i=p.getCommand(this.command);f.onShow=function(){n.className&&this.element.addClass(n.className+"_panel"),n.setState(CKEDITOR.TRISTATE_ON),c.setAttribute("aria-expanded","true"),u.on=1,n.editorFocus&&p.focus(),n.onOpen&&n.onOpen()},f.onHide=function(e){n.className&&this.element.getFirst().removeClass(n.className+"_panel"),!n.modes&&i?n.setStateFromCommand(i):n.setState(n.modes&&n.modes[p.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),u.on=0,c.setAttribute("aria-expanded","false"),!e&&n.onClose&&n.onClose()},f.onEscape=function(){f.hide(1),n.document.getById(u.id).focus()},this.onBlock&&this.onBlock(f,l),l.onHide=function(){u.on=0,!n.modes&&n.command?n.setStateFromCommand(i):n.setState(CKEDITOR.TRISTATE_OFF)}}},setStateFromCommand:function(p){this.setState(p.state)}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(r){r.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(r,s){s&&CKEDITOR.tools.extend(this,s),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=r,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(r){return new CKEDITOR.ui.panel(r)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),p=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),u=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(r,s){var c={editorId:r.id,id:this.id,langCode:r.langCode,dir:r.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":r.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(l=this._.holder)){if(this.isFramed){var n=(l=this.document.getById(this.id+"_frame")).getParent(),l=l.getFrameDocument();CKEDITOR.env.iOS&&n.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),n=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),l.write(u.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+n+");"},c))),l.getWindow().$.CKEDITOR=CKEDITOR,l.on("keydown",function(e){var t=e.data.getKeystroke(),o=this.document.getById(this.id).getAttribute("dir");("input"!==e.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===e.data.getTarget().getName()&&32===t||e.data.preventDefault():(27==t||t==("rtl"==o?39:37))&&this.onEscape&&!1===this.onEscape(t)&&e.data.preventDefault())},this),(l=l.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(n)}else l=this.document.getById(this.id);this._.holder=l}return l},this.isFramed){var f=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";c.frame=p.output({id:this.id+"_frame",src:f})}return f=a.output(c),s&&s.push(f),f},addBlock:function(r,s){return s=this._.blocks[r]=s instanceof CKEDITOR.ui.panel.block?s:new CKEDITOR.ui.panel.block(this.getHolderElement(),s),this._.currentBlock||this.showBlock(r),s},getBlock:function(r){return this._.blocks[r]},showBlock:function(r){r=this._.blocks[r];var s=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return s&&s.hide(),this._.currentBlock=r,CKEDITOR.fire("ariaWidget",c),r._.focusIndex=-1,this._.onKeyDown=r.onKeyDown&&CKEDITOR.tools.bind(r.onKeyDown,r),r.show(),r},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(r,s){this.element=r.append(r.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),s&&CKEDITOR.tools.extend(this,s),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(r){-1!=r&&(r=this._.getItems().getItem(this._.focusIndex=r),CKEDITOR.env.webkit&&r.getDocument().getWindow().focus(),r.focus(),this.onMark&&this.onMark(r))},markFirstDisplayed:function(r){for(var f,l,s=function(i){return i.type==CKEDITOR.NODE_ELEMENT&&"none"==i.getStyle("display")},c=this._.getItems(),n=c.count()-1;0<=n;n--)if((f=c.getItem(n)).getAscendant(s)||(l=f,this._.focusIndex=n),"true"==f.getAttribute("aria-selected")){l=f,this._.focusIndex=n;break}l&&(r&&r(),CKEDITOR.env.webkit&&l.getDocument().getWindow().focus(),l.focus(),this.onMark&&this.onMark(l))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(r,s){switch(c=this.keys[r]){case"next":for(var l,f=this._.focusIndex,c=this._.getItems();l=c.getItem(++f);)if(l.getAttribute("_cke_focus")&&l.$.offsetWidth){this._.focusIndex=f,l.focus(!0);break}return!l&&!s&&(this._.focusIndex=-1,this.onKeyDown(r,1));case"prev":for(f=this._.focusIndex,c=this._.getItems();0<f&&(l=c.getItem(--f));){if(l.getAttribute("_cke_focus")&&l.$.offsetWidth){this._.focusIndex=f,l.focus(!0);break}l=null}return!l&&!s&&(this._.focusIndex=c.count(),this.onKeyDown(r,1));case"click":case"mouseup":return(l=0<=(f=this._.focusIndex)&&this._.getItems().getItem(f))&&l.fireEventHandler(c,{button:CKEDITOR.tools.normalizeMouseButton(CKEDITOR.MOUSE_BUTTON_LEFT,!0)}),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){var p={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(u,r,s,c){function f(){e.hide()}s.forceIFrame=1,s.toolbarRelated&&u.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(r=CKEDITOR.document.getById("cke_"+u.name));var l=r.getDocument();c=function a(u,r,s,c,f){f=CKEDITOR.tools.genKey(r.getUniqueId(),s.getUniqueId(),u.lang.dir,u.uiColor||"",c.css||"",f||"");var l=p[f];return l||((l=p[f]=new CKEDITOR.ui.panel(r,c)).element=s.append(CKEDITOR.dom.element.createFromHtml(l.render(u),r)),l.element.setStyles({display:"none",position:"absolute"})),l}(u,l,r,s,c||0);var n=c.element,i=n.getFirst(),e=this;n.disableContextMenu(),this.element=n,this._={editor:u,panel:c,parentElement:r,definition:s,document:l,iframe:i,children:[],dir:u.lang.dir,showBlockParams:null,markFirst:void 0===s.markFirst||s.markFirst},u.on("mode",f),u.on("resize",f),l.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(u,r){return this._.panel.addBlock(u,r)},addListBlock:function(u,r){return this._.panel.addListBlock(u,r)},getBlock:function(u){return this._.panel.getBlock(u)},showBlock:function(u,r,s,c,f,l){var n=this._.panel,i=n.showBlock(u);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var t=this._.editor.editable();this._.returnFocus=t.hasFocus?t:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var e=this.element,E=(t=this._.iframe,t=CKEDITOR.env.ie&&!CKEDITOR.env.edge?t:new CKEDITOR.dom.window(t.$.contentWindow),e.getDocument()),o=this._.parentElement.getPositionedAncestor(),d=r.getDocumentPosition(E),T=(E=o?o.getDocumentPosition(E):{x:0,y:0},"rtl"==this._.dir),h=d.x+(c||0)-E.x,R=d.y+(f||0)-E.y;!T||1!=s&&4!=s?T||2!=s&&3!=s||(h+=r.$.offsetWidth-1):h+=r.$.offsetWidth,(3==s||4==s)&&(R+=r.$.offsetHeight-1),this._.panel._.offsetParentId=r.getId(),e.setStyles({top:R+"px",left:0,display:""}),e.setOpacity(0),e.getFirst().removeStyle("width"),this._.editor.focusManager.add(t),this._.blurSet||(CKEDITOR.event.useCapture=!0,t.on("blur",function(K){function A(){delete this._.returnFocus,this.hide()}this.allowBlur()&&K.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(A,0,this)):A.call(this))},this),t.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(t.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),t.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),n.onEscape=CKEDITOR.tools.bind(function(K){if(this.onEscape&&!1===this.onEscape(K))return!1},this),CKEDITOR.tools.setTimeout(function(){var K=CKEDITOR.tools.bind(function(){if((_=e).removeStyle("width"),i.autoSize){var A=i.element.getDocument();A=(CKEDITOR.env.webkit||CKEDITOR.env.edge?i.element:A.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<A&&(A+=(_.$.offsetWidth||0)-(_.$.clientWidth||0)+3),_.setStyle("width",A+10+"px"),A=i.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<A&&(A+=(_.$.offsetHeight||0)-(_.$.clientHeight||0)+3),_.setStyle("height",A+"px"),n._.currentBlock.element.setStyle("display","none").removeStyle("display")}else _.removeStyle("height");T&&(h-=e.$.offsetWidth),e.setStyle("left",h+"px");A=n.element.getWindow();var F,_=e.$.getBoundingClientRect(),v=(A=A.getViewPaneSize(),_.width||_.right-_.left),N=_.height||_.bottom-_.top,B=T?_.right:A.width-_.left,j=T?A.width-_.right:_.left;T?B<v&&(h=j>v?h+v:A.width>v?h-_.left:h-_.right+A.width):B<v&&(h=j>v?h-v:A.width>v?h-_.right+A.width:h-_.left),v=_.top,A.height-_.top<N&&(R=v>N?R-N:A.height>N?R-_.bottom+A.height:R-_.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&((A=_=e.$.offsetParent&&new CKEDITOR.dom.element(e.$.offsetParent))&&"html"==A.getName()&&(A=A.getDocument().getBody()),A&&"rtl"==A.getComputedStyle("direction")&&(h=CKEDITOR.env.ie8Compat?h-2*e.getDocument().getDocumentElement().$.scrollLeft:h-(_.$.scrollWidth-_.$.clientWidth))),(F=(_=e.getFirst()).getCustomData("activePanel"))&&F.onHide&&F.onHide.call(this,1),_.setCustomData("activePanel",this),e.setStyles({top:R+"px",left:h+"px"}),e.setOpacity(1),l&&l()},this);n.isLoaded?K():n.onLoad=K,CKEDITOR.tools.setTimeout(function(){var A=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),i.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=A),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){i.markFirstDisplayed?i.markFirstDisplayed():i._.markFirstDisplayed()},0):i.markFirstDisplayed?i.markFirstDisplayed():i._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var u=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,u))},focus:function(){if(CKEDITOR.env.webkit){var u=CKEDITOR.document.getActive();u&&!u.equals(this._.iframe)&&u.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var u=this._.iframe.getFrameDocument().getActive();u&&u.is("a")&&(this._.lastFocused=u)},hide:function(u){this.visible&&(!this.onHide||!0!==this.onHide.call(this))&&(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(u=u&&this._.returnFocus)&&(CKEDITOR.env.webkit&&u.type&&u.getWindow().$.focus(),u.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(u){var r=this._.panel;return void 0!==u&&(r.allowBlur=u),r.allowBlur},showAsChild:function(u,r,s,c,f,l){(this._.activeChild!=u||u._.panel._.offsetParentId!=s.getId())&&(this.hideChild(),u.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=u,this._.focused=!1,u.showBlock(r,s,c,f,l),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){u.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(u){var r=this._.activeChild;r&&(delete r.onHide,delete this._.activeChild,r.hide(),u&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var r,u=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(r in p){var s=p[r];u?s.destroy():s.element.hide()}u&&(p={})})}(),function(){var a,p,u;CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(r){function s(o){function E(O,I,w){var U={};if(O&&(U.color=O),I&&(U.colorName=I),I=!CKEDITOR.tools.isEmpty(U)&&new CKEDITOR.style(function d(){var O=r.config["colorButton_"+h+"Style"];return O.childRule="back"==h?function(I){return f(I)}:function(I){return!(I.is("a")||I.getElementsByTag("a").count())||f(I)},O}(),U),r.execCommand(A,{newStyle:I}),O&&w)for(w.addColor(O.substr(1).toUpperCase()),O=x.element.find("[role=option]").toArray(),w=0;w<O.length;w++)O[w].setAttributes({"aria-posinset":w+1,"aria-setsize":O.length})}var T=o.name,h=o.type,R=o.title,K=o.order,A=o.commandName;o=o.contentTransformations||{};var x,v=new CKEDITOR.style(n["colorButton_"+h+"Style"]),N=CKEDITOR.tools.getNextId()+"_colorBox",B={type:h},j=new CKEDITOR.style(n["colorButton_"+h+"Style"],{color:"inherit"}),_=CKEDITOR.tools.addFunction(function(O,I,w){r.focus(),r.fire("saveSnapshot"),"?"==O?r.getColorFromDialog(function(U){U&&E(U,I,F)},null,B):E(O&&"#"+O,I,F),w&&(w.setAttribute("cke_colorlast",!0),r.once("selectionChange",function(){w.removeAttribute("cke_colorlast")}))}),F=u.getRowLimit(r)?new u(r,"back"==h?"background-color":"color",_):void 0;r.addCommand(A,{contextSensitive:!0,exec:function(O,I){if(!O.readOnly){var w=I.newStyle;O.removeStyle(j),O.focus(),w&&O.applyStyle(w),O.fire("saveSnapshot")}},refresh:function(O,I){j.checkApplicable(I,O,O.activeFilter)?j.checkActive(I,O)?this.setState(CKEDITOR.TRISTATE_ON):this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}}),r.ui.add(T,CKEDITOR.UI_PANELBUTTON,{label:R,title:R,command:A,editorFocus:0,toolbar:"colors,"+K,allowedContent:v,requiredContent:v,contentTransformations:o,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(n.colorButton_contentsCss),attributes:{role:"listbox","aria-label":i.panelTitle}},select:function(O){var I=n.colorButton_colors.split(",");O=CKEDITOR.tools.array.find(I,O),O=a.normalizeColor(O),l(x,O),x._.markFirstDisplayed()},onBlock:function(O,I){x=I,I.autoSize=!0,I.element.addClass("cke_colorblock"),I.element.setHtml(function c(o,d,E){var T=[],h=n.colorButton_colors.split(","),R=r.plugins.colordialog&&n.colorButton_enableMore;E=h.length+E+(R?1:0);var K=1;for(n.colorButton_enableAutomatic&&(E+=1,K+=1,T.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true',' title="',i.auto,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',d,',null);return false;"'," href=\"javascript:void('",i.auto,"')\"",' role="option" aria-posinset="1" aria-setsize="',E,'">','<table role="presentation" cellspacing=0 cellpadding=0 width="100%">',"<tr>",'<td colspan="',r.config.colorButton_colorsPerRow,'" align="center">','<span class="cke_colorbox" id="',o,'"></span>',i.auto,"</td>","</tr>","</table>","</a>")),T.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tbody>'),o=0;o<h.length;o++){o%r.config.colorButton_colorsPerRow==0&&T.push("</tr><tr>");var v,A=(v=h[o].split("/"))[0];(v=new a(r,{color:v[1]||A,label:v[1]?A:void 0},d)).setPositionIndex(K+o,E),T.push(v.getHtml())}return u.getRowLimit(r)&&u.renderContainer(T,r),R&&T.push("</tr>","<tr>",'<td colspan="',r.config.colorButton_colorsPerRow,'" align="center">','<a class="cke_colormore" _cke_focus=1 hidefocus=true',' title="',i.more,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',d,",'?');return false;\""," href=\"javascript:void('",i.more,"')\"",' role="option" aria-posinset="',E,'" aria-setsize="',E,'">',i.more,"</a>","</td>"),T.push("</tr></tbody></table>"),T.join("")}(N,_,F?F.getLength():0)),I.element.getDocument().getBody().setStyle("overflow","hidden"),I.element.getAscendant({html:1}).setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var w=I.keys,U="rtl"==r.lang.dir;w[U?37:39]="next",w[40]="next",w[9]="next",w[U?39:37]="prev",w[38]="prev",w[CKEDITOR.SHIFT+9]="prev",w[32]="click",F&&F.setContainer(I.element.findOne(".cke_colorhistory"))},onOpen:function(){var I=(O=r.getSelection())&&O.getStartElement(),w=r.elementPath(I),U="back"==h?"background-color":"color";if(w){I=w.block||w.blockLimit||r.document.getBody();do{w=I&&I.getComputedStyle(U)||"transparent"}while("back"==h&&"transparent"==w&&I&&(I=I.getParent()));if(w&&"transparent"!=w||(w="#ffffff"),n.colorButton_enableAutomatic&&x.element.findOne("#"+N).setStyle("background-color",w),I=O&&O.getRanges()[0]){var O=new CKEDITOR.dom.walker(I),$=I.collapsed?I.startContainer:O.next();for(I="";$;){if($.type!==CKEDITOR.NODE_ELEMENT&&($=$.getParent()),$=a.normalizeColor($.getComputedStyle(U)),(I=I||$)!==$){I="";break}$=O.next()}"transparent"==I&&(I=""),"fore"==h&&(B.automaticTextColor="#"+a.normalizeColor(w)),B.selectionColor=I?"#"+I:"",l(x,I)}return w}}})}function f(o){return"false"==o.getAttribute("contentEditable")||o.getAttribute("data-nostyle")}function l(o,d){var E=o._.getItems(),T=o.element.findOne("[aria-selected]"),h=o.element.findOne("[cke_colorlast]");if(T&&T.removeAttribute("aria-selected"),h)h.setAttribute("aria-selected",!0);else for(T=0;T<E.count();T++)if(h=E.getItem(T),d&&d==a.normalizeColor(h.getAttribute("data-value"))){h.setAttribute("aria-selected",!0);break}}var n=r.config,i=r.lang.colorbutton;if(!CKEDITOR.env.hc){s({name:"TextColor",type:"fore",commandName:"textColor",title:i.textColorTitle,order:10,contentTransformations:[[{element:"font",check:"span{color}",left:function(o){return!!o.attributes.color},right:function(o){o.name="span",o.attributes.color&&(o.styles.color=o.attributes.color),delete o.attributes.color}}]]});var e,t=r.config.colorButton_normalizeBackground;(void 0===t||t)&&(e=[[{element:"span",left:function(o){var d=CKEDITOR.tools;return!("span"!=o.name||!o.styles||!o.styles.background)&&((o=d.style.parse.background(o.styles.background)).color&&1===d.object.keys(o).length)},right:function(o){var d=new CKEDITOR.style(r.config.colorButton_backStyle,{color:o.styles.background}).getDefinition();return o.name=d.element,o.styles=d.styles,o.attributes=d.attributes||{},o}}]]),s({name:"BGColor",type:"back",commandName:"bgColor",title:i.bgColorTitle,order:20,contentTransformations:e})}}}),a=CKEDITOR.tools.createClass({$:function(r,s,c){this.$=new CKEDITOR.dom.element("td"),this.color=CKEDITOR.tools._isValidColorFormat(s.color)?s.color:"",this.clickFn=c,this.label=s.label||a.colorNames(r)[this.color]||this.color,this.setHtml()},statics:{colorNames:function(r){return r.lang.colorbutton.colors},normalizeColor:function(r){var s=/^(rgb|hsl)a\(/g.test(r),c=/^rgba\((\s*0\s*,?){4}\)$/g.test(r);return s&&!c?(r=new CKEDITOR.tools.color(r),CKEDITOR.tools.normalizeHex(r.getHex()||"").replace(/#/g,"")):CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(r||"")).replace(/#/g,"")}},proto:{getElement:function(){return this.$},getHtml:function(){return this.getElement().getOuterHtml()},setHtml:function(){this.getElement().setHtml('<a class="cke_colorbox" _cke_focus=1 hidefocus=true title="'+this.label+'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction('+this.clickFn+",'"+this.color+"','"+this.label+"', this); return false;\" href=\"javascript:void('"+this.color+'\')" data-value="'+this.color+'" role="option"><span class="cke_colorbox" style="background-color:#'+this.color+'"></span></a>')},setPositionIndex:function(r,s){this.getElement().getChild(0).setAttributes({"aria-posinset":r,"aria-setsize":s})}}}),p=CKEDITOR.tools.createClass({$:function(){this.$=new CKEDITOR.dom.element("tr"),this.$.addClass("cke_colorhistory_row"),this.boxes=[]},proto:{getElement:function(){return this.$},removeLastColor:function(){return this.getElement().getLast().remove(),this.boxes.pop()},addNewColor:function(r){this.boxes.unshift(r),this.getElement().append(r.getElement(),!0)},extractColorBox:function(r){var s=CKEDITOR.tools.getIndex(this.boxes,function(c){return c.color===r});return 0>s?null:(this.boxes[s].getElement().remove(),this.boxes.splice(s,1)[0])}}}),u=CKEDITOR.tools.createClass({$:function(r,s,c){this.editor=r,this.cssProperty=s,this.clickFn=c,this.rows=[],this._.addNewRow(),this.editor.config.colorButton_renderContentColors&&this.editor.once("instanceReady",function(){this.renderContentColors()},this)},statics:{renderContainer:function(r,s){r.push('</tbody><tbody class="cke_colorhistory" style="display:none;">',"<tr>",'<td colspan="',s.config.colorButton_colorsPerRow,'" align="center">',"<span><hr></span>","</td>","</tr>","</tbody><tbody>")},getRowLimit:function(r){return r.config.colorButton_historyRowLimit},getCapacity:function(r){return u.getRowLimit(r)*r.config.colorButton_colorsPerRow},colorList:CKEDITOR.tools.style.parse._colors},_:{countColors:function(){var r=CKEDITOR.tools.getStyledSpans(this.cssProperty,this.editor.editable());return CKEDITOR.tools.array.reduce(r,function(s,c){var f=this._.getHexCode(c,this.cssProperty,u.colorList);return s[f]=s[f]||0,s[f]+=1,s},{},this)},getHexCode:function(r,s,c){var f=r.getStyle(s);return f in c?c[f].substr(1):a.normalizeColor(r.getComputedStyle(s)).toUpperCase()},sortByOccurrencesAscending:function(r,s){var f,c=[];for(f in r){var l={};l[s]=f,l.frequency=r[f],c.push(l)}return c.sort(function(n,i){return i.frequency-n.frequency}),this._.trimToCapacity(c),c.reverse()},trimToCapacity:function(r){r.splice(u.getCapacity(this.editor))},addColors:function(r){CKEDITOR.tools.array.forEach(r,function(s){this.addColor(s.colorCode)},this)},extractColorBox:function(r){for(var s=0;s<this.rows.length;s++){var c=this.rows[s].extractColorBox(r);if(c)return c}return null},moveToBeginning:function(r){this.rows[0].addNewColor(r)},createAtBeginning:function(r){this._.moveToBeginning(new a(this.editor,{color:r},this.clickFn))},addNewRow:function(){this.rows.push(new p),this.container&&this.container.append(this.rows[this.rows.length-1].getElement())},alignRows:function(){for(var r=0;r<u.getRowLimit(this.editor)&&!(this.rows[r].boxes.length<=this.editor.config.colorButton_colorsPerRow);r++)this.rows[r+1]?this._.moveLastBoxToNextRow(r):r<u.getRowLimit(this.editor)-1?(this._.addNewRow(),this._.moveLastBoxToNextRow(r)):this.rows[r].removeLastColor()},moveLastBoxToNextRow:function(r){this.rows[r+1].addNewColor(this.rows[r].removeLastColor())},refreshPositions:function(){var r=this._.countPanelElements(),s=this._.calculateFirstPosition(r);CKEDITOR.tools.array.forEach(this.rows,function(c){CKEDITOR.tools.array.forEach(c.boxes,function(f){f.setPositionIndex(s,r),s+=1})})},countPanelElements:function(){var r=this.editor.config.colorButton_colors.split(",").length+this.getLength();return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore&&(r+=1),this.editor.config.colorButton_enableAutomatic&&(r+=1),r},calculateFirstPosition:function(r){return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore?r-this.getLength():r-this.getLength()+1},attachRows:function(){CKEDITOR.tools.array.forEach(this.rows,function(r){this.container.append(r.getElement())},this)}},proto:{setContainer:function(r){this.container=r,this._.attachRows(),this.getLength()&&this.show()},show:function(){this.container&&this.container.show()},renderContentColors:function(){var r=this._.countColors();CKEDITOR.tools.isEmpty(r)||(r=this._.sortByOccurrencesAscending(r,"colorCode"),this._.addColors(r),this._.refreshPositions())},addColor:function(r){var s=this._.extractColorBox(r);this.container&&!this.container.isVisible()&&this.show(),s?this._.moveToBeginning(s):this._.createAtBeginning(r),this._.alignRows()},getLength:function(){return CKEDITOR.tools.array.reduce(this.rows,function(r,s){return r+s.boxes.length},0)}}})}(),CKEDITOR.config.colorButton_enableMore=!0,CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.config.colorButton_enableAutomatic=!0,CKEDITOR.config.colorButton_colorsPerRow=6,CKEDITOR.config.colorButton_historyRowLimit=1,CKEDITOR.config.colorButton_renderContentColors=!0,CKEDITOR.config.colorButton_contentsCss=[],CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var p=a.config.menu_groups.split(","),u=a._.menuGroups={},r=a._.menuItems={},s=0;s<p.length;s++)u[p[s]]=s+1;a.addMenuGroup=function(c,f){u[c]=f||100},a.addMenuItem=function(c,f){u[f.group]&&(r[c]=new CKEDITOR.menuItem(this,c,f))},a.addMenuItems=function(c){for(var f in c)this.addMenuItem(f,c[f])},a.getMenuItem=function(c){return r[c]},a.removeMenuItem=function(c){delete r[c]}}}),function(){var u='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{attrLabel}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"',p="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(u+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(u+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),CKEDITOR.env.ie&&(p='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&');u=u+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" onclick="'+p+'CKEDITOR.tools.callFunction({clickFn},{index}); return false;"><span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>';var r=CKEDITOR.addTemplate("menuItem",u),s=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),c=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(f,l){l=this._.definition=l||{},this.id=CKEDITOR.tools.getNextId(),this.editor=f,this.items=[],this._.listeners=[],this._.level=l.level||1;var n=CKEDITOR.tools.extend({},l.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=n.block.attributes=n.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=n},_:{onShow:function(){var f=this.editor.getSelection(),l=f&&f.getStartElement(),n=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var e=0;e<i.length;e++){var t=i[e](l,f,n);if(t)for(var o in t){var d=this.editor.getMenuItem(o);!d||d.command&&!this.editor.getCommand(d.command).state||(d.state=t[o],this.add(d))}}},onClick:function(f){this.hide(),f.onClick?f.onClick():f.command&&this.editor.execCommand(f.command)},onEscape:function(f){var l=this.parent;return l?l._.panel.hideChild(1):27==f&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(f){var l=this._.subMenu,n=this.items[f];if(n=n.getItems&&n.getItems()){for(var i in l?l.removeAll():((l=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,l._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),n){var e=this.editor.getMenuItem(i);e&&(e.state=n[i],l.add(e))}var t=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(f));setTimeout(function(){l.show(t,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(f){f.order||(f.order=this.items.length),this.items.push(f)},removeAll:function(){this.items=[]},show:function(f,l,n,i){if(this.parent||(this._.onShow(),this.items.length)){l=l||("rtl"==this.editor.lang.dir?2:1);var e=this.items,t=this.editor,o=this._.panel,d=this._.element;if(!o)(o=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(A){if(!1===this._.onEscape(A))return!1},this),o.onShow=function(){o._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},o.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(d=o.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(E=d.keys)[40]="next",E[9]="next",E[38]="prev",E[CKEDITOR.SHIFT+9]="prev",E["rtl"==t.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",E[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(E[13]="mouseup"),(E=(d=this._.element=d.element).getDocument()).getBody().setStyle("overflow","hidden"),E.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(A){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,t.config.menu_subMenuDelay||400,this,[A])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(A){var v=this.items[A];v.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):v.getItems?this._.showSubMenu(A):this._.onClick(v)},this);!function a(f){f.sort(function(l,n){return l.group<n.group?-1:l.group>n.group?1:l.order<n.order?-1:l.order>n.order?1:0})}(e);for(var E=['<div class="cke_menu'+((E=t.elementPath())&&E.direction()!=t.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],T=e.length,h=T&&e[0].group,R=0;R<T;R++){var K=e[R];h!=K.group&&(E.push('<div class="cke_menuseparator" role="separator"></div>'),h=K.group),K.render(this,R,E)}E.push("</div>"),d.setHtml(E.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(o,this.id,f,l,n,i):o.showBlock(this.id,f,l,n,i),t.fire("menuShow",[o])}},addListener:function(f){this._.listeners.push(f)},hide:function(f){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(f)},findItemByCommandName:function(f){var l=CKEDITOR.tools.array.filter(this.items,function(n){return f===n.command});return l.length?{item:l=l[0],element:this._.element.findOne("."+l.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(f,l,n){CKEDITOR.tools.extend(this,n,{order:0,className:"cke_menubutton__"+l}),this.group=f._.menuGroups[this.group],this.editor=f,this.name=l},proto:{render:function(f,l,n){var d,E,i=f.id+String(l),e=typeof this.state>"u"?CKEDITOR.TRISTATE_OFF:this.state,t="",o=this.editor,T=e==CKEDITOR.TRISTATE_ON?"on":e==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(t=' aria-checked="'+(e==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var h=this.getItems,R="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",K=this.name;this.icon&&!/\./.test(this.icon)&&(K=this.icon),this.command&&(d=o.getCommand(this.command),(d=o.getCommandKeystroke(d))&&(E=CKEDITOR.tools.keystrokeToString(o.lang.common.keyboard,d))),d=CKEDITOR.tools.htmlEncodeAttr(this.label),f={id:i,name:this.name,iconName:K,label:this.label,attrLabel:d,cls:this.className||"",state:T,hasPopup:h?"true":"false",disabled:e==CKEDITOR.TRISTATE_DISABLED,title:d+(E?" ("+E.display+")":""),ariaShortcut:E?o.lang.common.keyboardShortcut+" "+E.aria:"",href:"javascript:void('"+(d||"").replace("'")+"')",hoverFn:f._.itemOverFn,moveOutFn:f._.itemOutFn,clickFn:f._.itemClickFn,index:l,iconStyle:CKEDITOR.skin.getIconStyle(K,"rtl"==this.editor.lang.dir,K==this.icon?null:this.icon,this.iconOffset),shortcutHtml:E?c.output({shortcut:E.display}):"",arrowHtml:h?s.output({label:R}):"",role:this.role?this.role:"menuitem",ariaChecked:t},r.output(f,n)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{css:a.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,p){function u(){s=!1}var r,s;if(a.on("contextmenu",function(f){f=f.data;var l=CKEDITOR.env.webkit?r:CKEDITOR.env.mac?f.$.metaKey:f.$.ctrlKey;if(!(p&&l||(f.preventDefault(),s))){if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){l=this.editor;(i=new CKEDITOR.dom.elementPath(f.getTarget(),l.editable()).contains(function(T){return T.hasAttribute("contenteditable")},!0))&&"false"==i.getAttribute("contenteditable")&&l.getSelection().fake(i)}var i=f.getTarget().getDocument(),n=f.getTarget().getDocument().getDocumentElement(),e=(l=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),l?f.$.clientX:f.$.pageX||i.x+f.$.clientX),t=l?f.$.clientY:f.$.pageY||i.y+f.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(n,null,e,t)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var c=function(){r=0};a.on("keydown",function(f){r=CKEDITOR.env.mac?f.data.$.metaKey:f.data.$.ctrlKey}),a.on("keyup",c),a.on("contextmenu",c)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(a.on("keydown",function(f){f.data.$.shiftKey&&121===f.data.$.keyCode&&(s=!0)},null,null,0),a.on("keyup",u),a.on("contextmenu",u))},open:function(a,p,u,r){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,p,u,r))}}})},beforeInit:function(a){var p=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){p.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)}),a.addCommand("contextMenu",{exec:function(u){var c,r=0,s=0;(c=(c=(c=u.getSelection().getRanges())[c.length-1].getClientRects(u.editable().isInline()))[c.length-1])&&(r=c["rtl"===u.lang.dir?"left":"right"],s=c.bottom),u.contextMenu.open(u.document.getBody().getParent(),null,r,s)}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(i,e,t){if(t=i.config.forceEnterMode||t,"wysiwyg"==i.mode){e||(e=i.activeEnterMode);var o=i.elementPath();o&&!o.isContextFor("p")&&(e=CKEDITOR.ENTER_BR,t=1),i.fire("saveSnapshot"),e==CKEDITOR.ENTER_BR?f(i,e,null,t):l(i,e,null,t),i.fire("saveSnapshot")}}function p(i){for(var e=(i=i.getSelection().getRanges(!0)).length-1;0<e;e--)i[e].deleteContents();return i[0]}CKEDITOR.plugins.add("enterkey",{init:function(i){i.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){a(e)}}),i.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(e){a(e,e.activeShiftEnterMode,1)}}),i.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var c,f,l,n,r=CKEDITOR.dom.walker.whitespaces(),s=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(i,e,t,o){if(t=t||p(i)){t=function u(i){var e=i.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);return i.root.equals(e)?i:((e=new CKEDITOR.dom.range(e)).moveToRange(i),e)}(t);var v,E=t.document,T=t.checkStartOfBlock(),h=t.checkEndOfBlock(),R=i.elementPath(t.startContainer),K=R.block,A=e==CKEDITOR.ENTER_DIV?"div":"p";if(K&&T&&h){if((T=K.getParent()).is("li")&&1<T.getChildCount())return E=new CKEDITOR.dom.element("li"),v=i.createRange(),E.insertAfter(T),K.remove(),v.setStart(E,0),void i.getSelection().selectRanges([v]);if(K.is("li")||K.getParent().is("li")){K.is("li")||(T=(K=K.getParent()).getParent()),v=T.getParent(),t=!K.hasPrevious();var N=!K.hasNext(),B=(A=(o=i.getSelection()).createBookmarks(),K.getDirection(1)),j=(h=K.getAttribute("class"),K.getAttribute("style")),_=v.getDirection(1)!=B;if(i=i.enterMode!=CKEDITOR.ENTER_BR||_||j||h,v.is("li"))t||N?(t&&N&&T.remove(),K[N?"insertAfter":"insertBefore"](v)):K.breakParent(v);else{if(i)R.block.is("li")?(v=E.createElement(e==CKEDITOR.ENTER_P?"p":"div"),_&&v.setAttribute("dir",B),j&&v.setAttribute("style",j),h&&v.setAttribute("class",h),K.moveChildren(v)):v=R.block,t||N?v[t?"insertBefore":"insertAfter"](T):(K.breakParent(T),v.insertAfter(T));else if(K.appendBogus(!0),t||N)for(;E=K[t?"getFirst":"getLast"]();)E[t?"insertBefore":"insertAfter"](T);else for(K.breakParent(T);E=K.getLast();)E.insertAfter(T);K.remove()}return void o.selectBookmarks(A)}if(K&&K.getParent().is("blockquote"))return K.breakParent(K.getParent()),K.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||K.getPrevious().remove(),K.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||K.getNext().remove(),t.moveToElementEditStart(K),void t.select()}else if(K&&K.is("pre")&&!h)return void f(i,e,t,o);if(j=t.splitBlock(A)){if(i=j.previousBlock,K=j.nextBlock,T=j.wasStartOfBlock,h=j.wasEndOfBlock,K?(N=K.getParent()).is("li")&&(K.breakParent(N),K.move(K.getNext(),1)):i&&(N=i.getParent())&&N.is("li")&&(i.breakParent(N),N=i.getNext(),t.moveToElementEditStart(N),i.move(i.getPrevious())),T||h)if(function d(F){var x;return F!==CKEDITOR.ENTER_BR&&-1!==CKEDITOR.tools.indexOf(["td","th"],R.lastElement.getName())&&1===R.lastElement.getChildCount()&&((x=(F=R.lastElement.getChild(0).clone(!0)).getBogus())&&x.remove(),!F.getText().length)}(e))t.moveToElementEditStart(t.getTouchedStartNode());else{if(i?(i.is("li")||!n.test(i.getName())&&!i.is("pre"))&&(v=i.clone()):K&&(v=K.clone()),v?o&&!v.is("li")&&v.renameNode(A):N&&N.is("li")?v=N:(v=E.createElement(A),i&&(B=i.getDirection())&&v.setAttribute("dir",B)),E=j.elementPath)for(e=0,o=E.elements.length;e<o&&(!(A=E.elements[e]).equals(E.block)&&!A.equals(E.blockLimit));e++)CKEDITOR.dtd.$removeEmpty[A.getName()]&&(A=A.clone(),v.moveChildren(A),v.append(A));v.appendBogus(),v.getParent()||t.insertNode(v),v.is("li")&&v.removeAttribute("value"),!CKEDITOR.env.ie||!T||h&&i.getChildCount()||(t.moveToElementEditStart(h?i:v),t.select()),t.moveToElementEditStart(T&&!h?K:v)}else K.is("li")&&((v=t.clone()).selectNodeContents(K),(v=new CKEDITOR.dom.walker(v)).evaluator=function(F){return!(s(F)||r(F)||F.type==CKEDITOR.NODE_ELEMENT&&F.getName()in CKEDITOR.dtd.$inline&&!(F.getName()in CKEDITOR.dtd.$empty))},(N=v.next())&&N.type==CKEDITOR.NODE_ELEMENT&&N.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?E.createElement("br"):E.createText("\xa0")).insertBefore(N)),K&&t.moveToElementEditStart(K);t.select(),t.scrollIntoView()}}},enterBr:function(i,e,t,o){if(t=t||p(i)){var d=t.document,E=t.checkEndOfBlock(),T=new CKEDITOR.dom.elementPath(i.getSelection().getStartElement()),h=T.block,R=h&&T.block.getName();o||"li"!=R?(!o&&E&&n.test(R)?(E=h.getDirection())?((d=d.createElement("div")).setAttribute("dir",E),d.insertAfter(h),t.setStart(d,0)):(d.createElement("br").insertAfter(h),CKEDITOR.env.gecko&&d.createText("").insertAfter(h),t.setStartAt(h.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(i="pre"==R&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?d.createText("\r"):d.createElement("br"),t.deleteContents(),t.insertNode(i),CKEDITOR.env.needsBrFiller?(d.createText("\ufeff").insertAfter(i),E&&(h||T.blockLimit).appendBogus(),i.getNext().$.nodeValue="",t.setStartAt(i.getNext(),CKEDITOR.POSITION_AFTER_START)):t.setStartAt(i,CKEDITOR.POSITION_AFTER_END)),t.collapse(!0),t.select(),t.scrollIntoView()):l(i,e,t,o)}}},c=CKEDITOR.plugins.enterkey,f=c.enterBr,l=c.enterBlock,n=/^h[1-6]$/}(),function(){function a(p,u){var r={},s=[],c={nbsp:"\xa0",shy:"\xad",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(p=(p=p.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(i,e){var t=u?"&"+e+";":c[e];return r[t]=u?c[e]:"&"+e+";",s.push(t),""})).replace(/,$/,""),!u&&p){p=p.split(",");var l,f=document.createElement("div");for(f.innerHTML="&"+p.join(";&")+";",l=f.innerHTML,f=null,f=0;f<l.length;f++){var n=l.charAt(f);r[n]="&"+p[f]+";",s.push(n)}}return r.regex=s.join(u?"|":""),r}CKEDITOR.plugins.add("entities",{afterInit:function(p){function u(e){return n[e]}function r(e){return"force"!=s.entities_processNumerical&&f[e]?f[e]:"&#"+(CKEDITOR.env.ie?e.charCodeAt(0):e.codePointAt(0))+";"}var s=p.config;if(p=(p=p.dataProcessor)&&p.htmlFilter){var c=[];!1!==s.basicEntities&&c.push("nbsp,gt,lt,amp"),s.entities&&(c.length&&c.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),s.entities_latin&&c.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),s.entities_greek&&c.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),s.entities_additional&&c.push(s.entities_additional));var f=a(c.join(",")),l=f.regex?"["+f.regex+"]":"a^";delete f.regex,s.entities&&s.entities_processNumerical&&(l="[^ -~]|"+l);l=new RegExp(l,CKEDITOR.env.ie?"g":"gu");var n=a("nbsp,gt,lt,amp,shy",!0),i=new RegExp(n.regex,"g");p.addRules({text:function(e){return e.replace(i,u).replace(l,r)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",function(){var p=CKEDITOR.document.getWindow(),u=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(r){r.on("loaded",function(){!function a(r){var s=r.config,c=r.fire("uiSpace",{space:"top",html:""}).html,f=function(){function t(_,F,x){n.setStyle(F,u(x)),n.setStyle("position",_)}function o(_){var F=E.getDocumentPosition();switch(_){case"top":t("absolute","top",F.y-K-N);break;case"pin":t("fixed","top",j);break;case"bottom":t("absolute","top",F.y+(h.height||h.bottom-h.top)+N)}d=_}var d,E,T,h,R,K,A,v=s.floatSpaceDockedOffsetX||0,N=s.floatSpaceDockedOffsetY||0,B=s.floatSpacePinnedOffsetX||0,j=s.floatSpacePinnedOffsetY||0;return function(_){if(E=r.editable()){var F=_&&"focus"==_.name;F&&n.show(),r.fire("floatingSpaceLayout",{show:F}),n.removeStyle("left"),n.removeStyle("right"),T=n.getClientRect(),h=E.getClientRect(),R=p.getViewPaneSize(),K=T.height,A="pageXOffset"in p.$?p.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,d?(K+N<=h.top?o("top"):K+N>R.height-h.bottom?o("pin"):o("bottom"),_=R.width/2,_=s.floatSpacePreferRight?"right":0<h.left&&h.right<R.width&&h.width>T.width?"rtl"==s.contentsLangDirection?"right":"left":_-h.left>h.right-_?"left":"right",T.width>R.width?(_="left",F=0):(F="left"==_?0<h.left?h.left:0:h.right<R.width?R.width-h.right:0)+T.width>R.width&&(_="left"==_?"right":"left",F=0),n.setStyle(_,u(("pin"==d?B:v)+F+("pin"==d?0:"left"==_?A:-A)))):(d="pin",o("pin"),f(_))}}}();if(c){var l=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(r.applicationTitle?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(r.applicationTitle?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),n=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(l.output({content:c,id:r.id,langDir:r.lang.dir,langCode:r.langCode,name:r.name,style:"display:none;z-index:"+(s.baseFloatZIndex-1),topId:r.ui.spaceId("top"),voiceLabel:r.applicationTitle}))),i=CKEDITOR.tools.eventsBuffer(500,f),e=CKEDITOR.tools.eventsBuffer(100,f);n.unselectable(),n.on("mousedown",function(t){(t=t.data).getTarget().hasAscendant("a",1)||t.preventDefault()}),r.on("focus",function(t){f(t),r.on("change",i.input),p.on("scroll",e.input),p.on("resize",e.input)}),r.on("blur",function(){n.hide(),r.removeListener("change",i.input),p.removeListener("scroll",e.input),p.removeListener("resize",e.input)}),r.on("destroy",function(){p.removeListener("scroll",e.input),p.removeListener("resize",e.input),n.clearCustomData(),n.remove()}),r.focusManager.hasFocus&&n.show(),r.focusManager.add(n,1)}}(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),p=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {language} onclick="{onclick}CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),u=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),r=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(s,c){return this.addBlock(s,new CKEDITOR.ui.listBlock(this.getHolderElement(),c))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(s,c){var f=(c=c||{}).attributes||(c.attributes={});(this.multiSelect=!!c.multiSelect)&&(f["aria-multiselectable"]=!0),!f.role&&(f.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",f.role),(f=this.keys)[40]="next",f[9]="next",f[38]="prev",f[CKEDITOR.SHIFT+9]="prev",f[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(f[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var s=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(s),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(s){var c=this.toggle(s);this.onClick&&this.onClick(s,c)},this)),this._.click}},proto:{add:function(s,c,f,l){var n=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[s]=n,s={id:n,val:CKEDITOR.tools.htmlEncodeAttr(s).replace(r,"\\'"),onclick:CKEDITOR.env.ie?'return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)===CKEDITOR.MOUSE_BUTTON_LEFT&&':"",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(f||s),text:c||s,language:l?'lang="'+l+'"':""},this._.pendingList.push(p.output(s))},startGroup:function(s){this._.close();var c=CKEDITOR.tools.getNextId();this._.groups[s]=c,this._.pendingHtml.push(u.output({id:c,label:s}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(s){var c=this.isMarked(s);return c?this.unmark(s):this.mark(s),!c},hideGroup:function(s){var c=(s=this.element.getDocument().getById(this._.groups[s]))&&s.getNext();s&&(s.setStyle("display","none"),c&&"ul"==c.getName()&&c.setStyle("display","none"))},hideItem:function(s){this.element.getDocument().getById(this._.items[s]).setStyle("display","none")},showAll:function(){var l,s=this._.items,c=this._.groups,f=this.element.getDocument();for(l in s)f.getById(s[l]).setStyle("display","");for(var n in c)l=(s=f.getById(c[n])).getNext(),s.setStyle("display",""),l&&"ul"==l.getName()&&l.setStyle("display","")},mark:function(s){this.multiSelect||this.unmarkAll(),s=this._.items[s];var c=this.element.getDocument().getById(s);c.addClass("cke_selected"),this.element.getDocument().getById(s+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(c)},unmark:function(s){var c=this.element.getDocument();s=this._.items[s];var f=c.getById(s);f.removeClass("cke_selected"),c.getById(s+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(f)},unmarkAll:function(){var f,s=this._.items,c=this.element.getDocument();for(f in s){var l=s[f];c.getById(l).removeClass("cke_selected"),c.getById(l+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(s){return this.element.getDocument().getById(this._.items[s]).hasClass("cke_selected")},focus:function(s){this._.focusIndex=-1;var f,c=this.element.getElementsByTag("a"),l=-1;if(s){for(f=this.element.getDocument().getById(this._.items[s]).getFirst();s=c.getItem(++l);)if(s.equals(f)){this._.focusIndex=l;break}}else this.element.focus();f&&setTimeout(function(){f.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var p='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"',a="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(p+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(p+=' onblur="this.style.cssText = this.style.cssText;"'),CKEDITOR.env.ie&&(a='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&');p=p+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+a+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var u=CKEDITOR.addTemplate("combo",p);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(r){CKEDITOR.tools.extend(this,r,{canGroup:!1,title:r.label,modes:{wysiwyg:1},editorFocus:1}),r=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=r.parent&&r.parent.getDocument()||CKEDITOR.document,r.className="cke_combopanel",r.block={multiSelect:r.multiSelect,attributes:r.attributes},r.toolbarRelated=!0,this._={panelDefinition:r,items:{},listeners:[]}},proto:{renderHtml:function(r){var s=[];return this.render(r,s),s.join("")},render:function(r,s){function c(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var E=this.modes[r.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;r.readOnly&&!this.readOnly&&(E=CKEDITOR.TRISTATE_DISABLED),this.setState(E),this.setValue(""),E!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var l,n,f=CKEDITOR.env,i="cke_"+this.id,e=CKEDITOR.tools.addFunction(function(E){n&&(r.unlockSelection(1),n=0),l.execute(E)},this),t=this;l={id:i,combo:this,focus:function(){CKEDITOR.document.getById(i).getChild(1).focus()},execute:function(E){var T=t._;if(T.state!=CKEDITOR.TRISTATE_DISABLED)if(t.createPanel(r),T.on)T.panel.hide();else{t.commit();var h=t.getValue();h?T.list.mark(h):T.list.unmarkAll(),T.panel.showBlock(t.id,new CKEDITOR.dom.element(E),4)}},clickFn:e},this._.listeners.push(r.on("activeFilterChange",c,this)),this._.listeners.push(r.on("mode",c,this)),this._.listeners.push(r.on("selectionChange",c,this)),!this.readOnly&&this._.listeners.push(r.on("readOnly",c,this));var o=CKEDITOR.tools.addFunction(function(E,T){var h=(E=new CKEDITOR.dom.event(E)).getKeystroke();switch(h){case 13:case 32:case 40:CKEDITOR.tools.callFunction(e,T);break;default:l.onkey(l,h)}E.preventDefault()}),d=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()});return n=0,l.keyDownFn=o,f={id:i,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:f.gecko&&!f.hc?"":(this.title||"").replace("'",""),keydownFn:o,focusFn:d,clickFn:e},u.output(f,s),this.onRender&&this.onRender(),l},createPanel:function(r){if(!this._.panel){var n=this._.panelDefinition,s=this._.panelDefinition.block,c=n.parent||CKEDITOR.document.getBody(),f="cke_combopanel__"+this.name,l=new CKEDITOR.ui.floatPanel(r,c,n),i=(n=l.addListBlock(this.id,s),this);l.onShow=function(){this.element.addClass(f),i.setState(CKEDITOR.TRISTATE_ON),i._.on=1,i.editorFocus&&!r.focusManager.hasFocus&&r.focus(),i.onOpen&&i.onOpen()},l.onHide=function(e){this.element.removeClass(f),i.setState(i.modes&&i.modes[r.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),i._.on=0,!e&&i.onClose&&i.onClose()},l.onEscape=function(){l.hide(1)},n.onClick=function(e,t){i.onClick&&i.onClick.call(i,e,t),l.hide()},this._.panel=l,this._.list=n,l.getBlock(this.id).onHide=function(){i._.on=0,i.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(r,s){this._.value=r,(f=this.document.getById("cke_"+this.id+"_text"))&&(r||s?f.removeClass("cke_combo_inlinelabel"):(s=this.label,f.addClass("cke_combo_inlinelabel")),f.setText(typeof s<"u"?s:r));var f=typeof s<"u"?s:r,c=this.label;f=f===c?f:f+", "+c;(c=this.document.getById("cke_"+this.id+"_label"))&&c.setText(f)},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(r){this._.list.mark(r)},hideItem:function(r){this._.list.hideItem(r)},hideGroup:function(r){this._.list.hideGroup(r)},showAll:function(){this._.list.showAll()},add:function(r,s,c,f){this._.items[r]=c||r,this._.list.add(r,s,c,f)},startGroup:function(r){this._.list.startGroup(r)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(r){if(this._.state!=r){var s=this.document.getById("cke_"+this.id),c=s.getElementsByTag("a").getItem(0);s.setState(r,"cke_combo"),r==CKEDITOR.TRISTATE_DISABLED?s.setAttribute("aria-disabled",!0):s.removeAttribute("aria-disabled"),c&&c.setAttribute("aria-expanded",r==CKEDITOR.TRISTATE_ON),this._.state=r}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(r){r.removeListener()}),this._.listeners=[]},select:function(r){if(!CKEDITOR.tools.isEmpty(this._.items))for(var s in this._.items)if(r({value:s,text:this._.items[s]})){this.setValue(s);break}}},statics:{handler:{create:function(r){return new CKEDITOR.ui.richCombo(r)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(r,s){this.add(r,CKEDITOR.UI_RICHCOMBO,s)}}(),function(){function a(c,f){var t,l=c.config,n=f.lang,i=new CKEDITOR.style(f.styleDefinition),e=new s({entries:f.entries,styleVariable:f.styleVariable,styleDefinition:f.styleDefinition});c.addCommand(f.commandName,{exec:function(o,d){var E=d.newStyle,T=d.oldStyle,h=o.getSelection().getRanges()[0],R=void 0===E;(T||E)&&(T&&h.collapsed&&function u(c){var i,e,t,f=c.editor,l=c.range,n=c.style;if(i=f.elementPath(),c=i.contains(function(o){return n.checkElementRemovable(o)})){if(e=l.checkBoundaryOfElement(c,CKEDITOR.START),t=l.checkBoundaryOfElement(c,CKEDITOR.END),e&&t){for(e=l.createBookmark();i=c.getFirst();)i.insertBefore(c);c.remove(),l.moveToBookmark(e)}else e||t?l.moveToPosition(c,e?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(l.splitElement(c),l.moveToPosition(c,CKEDITOR.POSITION_AFTER_END)),r(l,i.elements.slice(),c);f.getSelection().selectRanges([l])}}({editor:o,range:h,style:T}),R?o.removeStyle(T):(T&&!function p(c,f){if(!(c instanceof CKEDITOR.style&&f instanceof CKEDITOR.style))return!1;var l=function(i,e){var t=i.getDefinition().attributes,o=e.getDefinition().attributes;return CKEDITOR.tools.objectCompare(t,o)}(c,f),n=function(i,e){return CKEDITOR.style.getStyleText(i.getDefinition())===CKEDITOR.style.getStyleText(e.getDefinition())}(c,f);return l&&n}(T,E)&&o.removeStyle(T),o.applyStyle(E)))},refresh:function(o,d){i.checkApplicable(d,o,o.activeFilter)||this.setState(CKEDITOR.TRISTATE_DISABLED)}}),t=c.getCommand(f.commandName),c.ui.addRichCombo(f.comboName,{label:n.label,title:n.panelTitle,command:f.commandName,toolbar:"styles,"+f.order,defaultValue:"cke-default",allowedContent:i,requiredContent:i,contentTransformations:"span"===f.styleDefinition.element?[[{element:"font",check:"span",left:function(o){return!!o.attributes.size||!!o.attributes.align||!!o.attributes.face},right:function(o){var d=" x-small small medium large x-large xx-large 48px".split(" ");o.name="span",o.attributes.size&&(o.styles["font-size"]=d[o.attributes.size],delete o.attributes.size),o.attributes.align&&(o.styles["text-align"]=o.attributes.align,delete o.attributes.align),o.attributes.face&&(o.styles["font-family"]=o.attributes.face,delete o.attributes.face)}}]]:null,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(l.contentsCss),multiSelect:!1,attributes:{"aria-label":n.panelTitle}},init:function(){var o="("+c.lang.common.optionDefault+")";this.startGroup(n.panelTitle),this.add(this.defaultValue,o,o),e.addToCombo(this)},onClick:function(o){var d=this.getValue();c.focus(),c.fire("saveSnapshot"),c.execCommand(f.commandName,{newStyle:e.getStyle(o),oldStyle:e.getStyle(d)}),c.fire("saveSnapshot")},onRender:function(){c.on("selectionChange",function(o){var d=this.getValue();(o=e.getMatchingValue(c,o.data.path))?o!=d&&this.setValue(o):this.setValue("",f.defaultLabel)},this),t.on("state",function(){this.setState(t.state)},this)},refresh:function(){this.setState(t.state)}})}function r(c,f,l){var n=f.pop();if(n){if(l)return r(c,f,n.equals(l)?null:l);l=n.clone(),c.insertNode(l),c.moveToPosition(l,CKEDITOR.POSITION_AFTER_START),r(c,f)}}var s=CKEDITOR.tools.createClass({$:function(c){var f=c.entries.split(";");this._.data={},this._.names=[];for(var l=0;l<f.length;l++){var i,e,n=f[l];n?(i=(n=n.split("/"))[0],n=n[1],(e={})[c.styleVariable]=n||i,this._.data[i]=new CKEDITOR.style(c.styleDefinition,e),this._.data[i]._.definition.name=i,this._.names.push(i)):(f.splice(l,1),l--)}},proto:{getStyle:function(c){return this._.data[c]},addToCombo:function(c){for(var f=0;f<this._.names.length;f++){var l=this._.names[f];c.add(l,this.getStyle(l).buildPreview(),l)}},getMatchingValue:function(c,f){for(var i,l=f.elements,n=0;n<l.length;n++)if(i=l[n],i=this._.findMatchingStyleName(c,i))return i;return null}},_:{findMatchingStyleName:function(c,f){return CKEDITOR.tools.array.find(this._.names,function(l){return this.getStyle(l).checkElementMatch(f,!0,c)},this)}}});CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(c){var f=c.config;a(c,{comboName:"Font",commandName:"font",styleVariable:"family",lang:c.lang.font,entries:f.font_names,defaultLabel:f.font_defaultLabel,styleDefinition:f.font_style,order:30}),a(c,{comboName:"FontSize",commandName:"fontSize",styleVariable:"size",lang:c.lang.font.fontSize,entries:f.fontSize_sizes,defaultLabel:f.fontSize_defaultLabel,styleDefinition:f.fontSize_style,order:40})}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var p=a.config,u=a.lang.format,r=p.format_tags.split(";"),s={},c=0,f=[],l=0;l<r.length;l++){var n=r[l],i=new CKEDITOR.style(p["format_"+n]);(!a.filter.customConfig||a.filter.check(i))&&(c++,s[n]=i,s[n]._.enterMode=a.config.enterMode,f.push(i))}0!==c&&a.ui.addRichCombo("Format",{label:u.label,title:u.panelTitle,toolbar:"styles,20",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(p.contentsCss),multiSelect:!1,attributes:{"aria-label":u.panelTitle}},init:function(){for(var e in this.startGroup(u.panelTitle),s){var t=u["tag_"+e];this.add(e,s[e].buildPreview(t),t)}},onClick:function(e){a.focus(),a.fire("saveSnapshot"),e=s[e];var t=a.elementPath();a.fire("stylesRemove",{type:CKEDITOR.STYLE_BLOCK}),e.checkActive(t,a)||a.applyStyle(e),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(e){var t=this.getValue();for(var o in e=e.data.path,this.refresh(),s)if(s[o].checkActive(e,a))return void(o!=t&&this.setValue(o,a.lang.format["tag_"+o]));this.setValue("")},this)},onOpen:function(){for(var e in this.showAll(),s)a.activeFilter.check(s[e])||this.hideItem(e)},refresh:function(){var e=a.elementPath();if(e){if(e.isContextFor("p"))for(var t in s)if(a.activeFilter.check(s[t]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){function a(r,s){var c,f;s.on("refresh",function(l){var i,n=[p];for(i in l.data.states)n.push(l.data.states[i]);this.setState(CKEDITOR.tools.search(n,u)?u:p)},s,null,100),s.on("exec",function(l){c=r.getSelection(),f=c.createBookmarks(1),l.data||(l.data={}),l.data.done=!1},s,null,0),s.on("exec",function(){r.forceNextSelectionCheck(),c.selectBookmarks(f)},s,null,100)}var p=CKEDITOR.TRISTATE_DISABLED,u=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(r){var s=CKEDITOR.plugins.indent.genericDefinition;a(r,r.addCommand("indent",new s(!0))),a(r,r.addCommand("outdent",new s)),r.ui.addButton&&(r.ui.addButton("Indent",{label:r.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),r.ui.addButton("Outdent",{label:r.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),r.on("dirChanged",function(c){var f=r.createRange(),l=c.data.node;f.setStartBefore(l),f.setEndAfter(l);for(var i,n=new CKEDITOR.dom.walker(f);i=n.next();)if(i.type==CKEDITOR.NODE_ELEMENT)if(!i.equals(l)&&i.getDirection())f.setStartAfter(i),n=new CKEDITOR.dom.walker(f);else{var e=r.config.indentClasses;if(e)for(var t="ltr"==c.data.dir?["_rtl",""]:["","_rtl"],o=0;o<e.length;o++)i.hasClass(e[o]+t[0])&&(i.removeClass(e[o]+t[0]),i.addClass(e[o]+t[1]));e=i.getStyle("margin-right"),t=i.getStyle("margin-left"),e?i.setStyle("margin-left",e):i.removeStyle("margin-left"),t?i.setStyle("margin-right",t):i.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(r){this.isIndent=!!r,this.startDisabled=!this.isIndent},specificDefinition:function(r,s,c){this.name=s,this.editor=r,this.jobs={},this.enterBr=r.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!c,this.relatedGlobal=c?"indent":"outdent",this.indentKey=c?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(r,s){r.on("pluginsLoaded",function(){for(var c in s)!function(f,l){var i,n=f.getCommand(l.relatedGlobal);for(i in l.jobs)n.on("exec",function(e){e.data.done||(f.fire("lockSnapshot"),l.execJob(f,i)&&(e.data.done=!0),f.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(l.database))},this,null,i),n.on("refresh",function(e){e.data.states||(e.data.states={}),e.data.states[l.name+"@"+i]=l.refreshJob(f,i,e.data.path)},this,null,i);f.addFeature(l)}(this,s[c])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(r,s){var c=this.jobs[s];if(c.state!=p)return c.exec.call(this,r)},refreshJob:function(r,s,c){return s=this.jobs[s],r.activeFilter.checkFeature(this)?s.state=s.refresh.call(this,r,c):s.state=p,s.state},getContext:function(r){return r.contains(this.context)}}}(),function(){function a(l){function n(h){for(var R=o.startContainer,K=o.endContainer;R&&!R.getParent().equals(h);)R=R.getParent();for(;K&&!K.getParent().equals(h);)K=K.getParent();if(!R||!K)return!1;for(var A=[],v=!1;!v;)R.equals(K)&&(v=!0),A.push(R),R=R.getNext();if(1>A.length)return!1;for(R=h.getParents(!0),K=0;K<R.length;K++)if(R[K].getName&&t[R[K].getName()]){h=R[K];break}R=i.isIndent?1:-1,K=A[0],A=A[A.length-1];var N=(v=CKEDITOR.plugins.list.listToArray(h,e))[A.getCustomData("listarray_index")].indent;for(K=K.getCustomData("listarray_index");K<=A.getCustomData("listarray_index");K++)if(v[K].indent+=R,0<R){for(var B=v[K].parent,j=K-1;0<=j;j--)if(v[j].indent===R){B=v[j].parent;break}v[K].parent=new CKEDITOR.dom.element(B.getName(),B.getDocument())}for(K=A.getCustomData("listarray_index")+1;K<v.length&&v[K].indent>N;K++)v[K].indent+=R;var _;if((R=CKEDITOR.plugins.list.arrayToList(v,e,null,l.config.enterMode,h.getDirection()),!i.isIndent)&&((_=h.getParent())&&_.is("li"))){var x,F=[];for(K=(A=R.listNode.getChildren()).count()-1;0<=K;K--)(x=A.getItem(K))&&x.is&&x.is("li")&&F.push(x)}if(R&&R.listNode.replace(h),F&&F.length)for(K=0;K<F.length;K++){for(x=h=F[K];(x=x.getNext())&&x.is&&x.getName()in t;)CKEDITOR.env.needsNbspFiller&&!h.getFirst(u)&&h.append(o.document.createText("\xa0")),h.append(x);h.insertAfter(_)}return R&&l.fire("contentDomInvalidated"),!0}for(var o,i=this,e=this.database,t=this.context,d=((d=l.getSelection())&&d.getRanges()).createIterator();o=d.getNextRange();){for(var E=o.getCommonAncestor();E&&(E.type!=CKEDITOR.NODE_ELEMENT||!t[E.getName()]);){if(l.editable().equals(E)){E=!1;break}E=E.getParent()}if(E||(E=o.startPath().contains(t))&&o.setEndAt(E,CKEDITOR.POSITION_BEFORE_END),!E){var T=o.getEnclosedNode();T&&T.type==CKEDITOR.NODE_ELEMENT&&T.getName()in t&&(o.setStartAt(T,CKEDITOR.POSITION_AFTER_START),o.setEndAt(T,CKEDITOR.POSITION_BEFORE_END),E=T)}if(E&&o.startContainer.type==CKEDITOR.NODE_ELEMENT&&o.startContainer.getName()in t&&((T=new CKEDITOR.dom.walker(o)).evaluator=p,o.startContainer=T.next()),E&&o.endContainer.type==CKEDITOR.NODE_ELEMENT&&o.endContainer.getName()in t&&((T=new CKEDITOR.dom.walker(o)).evaluator=p,o.endContainer=T.previous()),E)return n(E)}return 0}function p(l){return l.type==CKEDITOR.NODE_ELEMENT&&l.is("li")}function u(l){return r(l)&&s(l)}var r=CKEDITOR.dom.walker.whitespaces(!0),s=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.TRISTATE_DISABLED,f=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(l){function n(e){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],e.on("key",function(t){var o=e.elementPath();if("wysiwyg"==e.mode&&t.data.keyCode==this.indentKey&&o){var d=this.getContext(o);!d||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,o,d)||(e.execCommand(this.relatedGlobal),t.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,o){var d=this.getContext(o),E=CKEDITOR.plugins.indentList.firstItemInPath(this.context,o,d);return d&&this.isIndent&&!E?f:c}:function(t,o){return!this.getContext(o)||this.isIndent?c:f},exec:CKEDITOR.tools.bind(a,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(l,{indentlist:new n(l,"indentlist",!0),outdentlist:new n(l,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(l,n,i){var e=n.contains(p);return i||(i=n.contains(l)),i&&e&&e.equals(i.getFirst(p))}}(),function(){function a(r,s){var c;if(s)c=r.getComputedStyle("text-align");else{for(;(!r.hasAttribute||!r.hasAttribute("align")&&!r.getStyle("text-align"))&&(c=r.getParent());)r=c;c=r.getStyle("text-align")||r.getAttribute("align")||""}return c&&(c=c.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!c&&s&&(c="rtl"==r.getComputedStyle("direction")?"right":"left"),c}function p(r,s,c){this.editor=r,this.name=s,this.value=c,this.context="p",s=r.config.justifyClasses;var f=r.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(s){switch(c){case"left":this.cssClassName=s[0];break;case"center":this.cssClassName=s[1];break;case"right":this.cssClassName=s[2];break;case"justify":this.cssClassName=s[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+s.join("|")+")(?=$|\\s)"),this.requiredContent=f+"("+this.cssClassName+")"}else this.requiredContent=f+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},r.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function u(r){var s=r.editor,c=s.createRange();c.setStartBefore(r.data.node),c.setEndAfter(r.data.node);for(var l,f=new CKEDITOR.dom.walker(c);l=f.next();)if(l.type==CKEDITOR.NODE_ELEMENT)if(!l.equals(r.data.node)&&l.getDirection())c.setStartAfter(l),f=new CKEDITOR.dom.walker(c);else{var n=s.config.justifyClasses;n&&(l.hasClass(n[0])?(l.removeClass(n[0]),l.addClass(n[2])):l.hasClass(n[2])&&(l.removeClass(n[2]),l.addClass(n[0]))),"left"==(n=l.getStyle("text-align"))?l.setStyle("text-align","right"):"right"==n&&l.setStyle("text-align","left")}}p.prototype={exec:function(r){var s=r.getSelection(),c=r.config.enterMode;if(s){for(var i,e,f=s.createBookmarks(),l=s.getRanges(),n=this.cssClassName,t=r.config.useComputedState,o=l.length-1;0<=o;o--)for((i=l[o].createIterator()).enlargeBr=c!=CKEDITOR.ENTER_BR;e=i.getNextParagraph(c==CKEDITOR.ENTER_P?"p":"div");)if(!e.isReadOnly()){var E,d=e.getName();if(E=r.activeFilter.check(d+"{text-align}"),(d=r.activeFilter.check(d+"("+n+")"))||E){e.removeAttribute("align"),e.removeStyle("text-align");var T=n&&(e.$.className=CKEDITOR.tools.ltrim(e.$.className.replace(this.cssClassRegex,""))),h=this.state==CKEDITOR.TRISTATE_OFF&&(!t||a(e,!0)!=this.value);n&&d?h?e.addClass(n):T||e.removeAttribute("class"):h&&E&&e.setStyle("text-align",this.value)}}r.focus(),r.forceNextSelectionCheck(),s.selectBookmarks(f)}},refresh:function(r,s){var c=s.block||s.blockLimit,l=c.getName(),f=c.equals(r.editable());l=this.cssClassName?r.activeFilter.check(l+"("+this.cssClassName+")"):r.activeFilter.check(l+"{text-align}");f&&!CKEDITOR.dtd.$list[s.lastElement.getName()]?this.setState(CKEDITOR.TRISTATE_OFF):!f&&l?this.setState(a(c,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}},CKEDITOR.plugins.add("justify",{init:function(r){if(!r.blockless){var s=new p(r,"justifyleft","left"),c=new p(r,"justifycenter","center"),f=new p(r,"justifyright","right"),l=new p(r,"justifyblock","justify");r.addCommand("justifyleft",s),r.addCommand("justifycenter",c),r.addCommand("justifyright",f),r.addCommand("justifyblock",l),r.ui.addButton&&(r.ui.addButton("JustifyLeft",{isToggle:!0,label:r.lang.common.alignLeft,command:"justifyleft",toolbar:"align,10"}),r.ui.addButton("JustifyCenter",{isToggle:!0,label:r.lang.common.center,command:"justifycenter",toolbar:"align,20"}),r.ui.addButton("JustifyRight",{isToggle:!0,label:r.lang.common.alignRight,command:"justifyright",toolbar:"align,30"}),r.ui.addButton("JustifyBlock",{isToggle:!0,label:r.lang.common.justify,command:"justifyblock",toolbar:"align,40"})),r.on("dirChanged",u)}}})}(),function(){function a(f,l){var n=c.exec(f),i=c.exec(l);if(n){if(!n[2]&&"px"==i[2])return i[1];if("px"==n[2]&&!i[2])return i[1]+"px"}return l}function u(f,l){var n=[],i=/^cke:/i,e=new CKEDITOR.htmlParser.filter({elements:{"^":function(E){i.test(E.name)&&(E.name=E.name.replace(i,""),n.push(E))},iframe:function(E){E.children=[]}}}),t=f.activeFilter,o=new CKEDITOR.htmlParser.basicWriter,d=CKEDITOR.htmlParser.fragment.fromHtml(l);return e.applyTo(d),t.applyTo(d),CKEDITOR.tools.array.forEach(n,function(E){E.name="cke:"+E.name}),d.writeHtml(o),o.getHtml()}var r=CKEDITOR.htmlParser.cssStyle,s=CKEDITOR.tools.cssLength,c=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i;CKEDITOR.plugins.add("fakeobjects",{init:function(f){f.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(f){var l=f.dataProcessor;(l=l&&l.htmlFilter)&&l.addRules(function p(f){return{elements:{$:function(l){var n=(n=l.attributes)&&n["data-cke-realelement"],i=u(f,decodeURIComponent(n));if((n=(n=n&&new CKEDITOR.htmlParser.fragment.fromHtml(i))&&n.children[0])&&l.attributes["data-cke-resizable"]){var e=new r(l).rules;l=n.attributes,i=e.width,e=e.height,i&&(l.width=a(l.width,i)),e&&(l.height=a(l.height,e))}return n}}}}(f),{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(f,l,n,i){var e=(e=this.lang.fakeobjects)[n]||e.unknown;return l={class:l,"data-cke-realelement":encodeURIComponent(f.getOuterHtml()),"data-cke-real-node-type":f.type,alt:e,title:e,align:f.getAttribute("align")||""},CKEDITOR.env.hc||(l.src=CKEDITOR.tools.transparentImageData),n&&(l["data-cke-real-element-type"]=n),i&&(l["data-cke-resizable"]=i,n=new r,i=f.getAttribute("width"),f=f.getAttribute("height"),i&&(n.rules.width=s(i)),f&&(n.rules.height=s(f)),n.populate(l)),this.document.createElement("img",{attributes:l})},CKEDITOR.editor.prototype.createFakeParserElement=function(f,l,n,i){var t,e=(e=this.lang.fakeobjects)[n]||e.unknown;return t=new CKEDITOR.htmlParser.basicWriter,f.writeHtml(t),t=t.getHtml(),l={class:l,"data-cke-realelement":encodeURIComponent(t),"data-cke-real-node-type":f.type,alt:e,title:e,align:f.attributes.align||""},CKEDITOR.env.hc||(l.src=CKEDITOR.tools.transparentImageData),n&&(l["data-cke-real-element-type"]=n),i&&(l["data-cke-resizable"]=i,i=f.attributes,f=new r,n=i.width,i=i.height,void 0!==n&&(f.rules.width=s(n)),void 0!==i&&(f.rules.height=s(i)),f.populate(l)),new CKEDITOR.htmlParser.element("img",l)},CKEDITOR.editor.prototype.restoreRealElement=function(f){if(f.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var l=u(this,l=decodeURIComponent(f.data("cke-realelement")));l=CKEDITOR.dom.element.createFromHtml(l,this.document);if(f.data("cke-resizable")){var n=f.getStyle("width");f=f.getStyle("height"),n&&l.setAttribute("width",a(l.getAttribute("width"),n)),f&&l.setAttribute("height",a(l.getAttribute("height"),f))}return l}}(),function(){function a(R){return R.replace(/'/g,"\\$&")}function p(R){for(var v,K=R.length,A=[],N=0;N<K;N++)v=R.charCodeAt(N),A.push(v);return"String.fromCharCode("+A.join(",")+")"}function u(R,K){for(var N,B,A=(v=R.plugins.link).compiledProtectionFunction.params,v=[v.compiledProtectionFunction.name,"("],j=0;j<A.length;j++)B=K[N=A[j].toLowerCase()],0<j&&v.push(","),v.push("'",B?a(encodeURIComponent(K[N])):"","'");return v.push(")"),v.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function R(v){return A.replace(/%1/g,"rtl"==v?"right":"left").replace(/%2/g,"cke_contents_"+v)}var K="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",A=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+K+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+K+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(R("ltr")+R("rtl"))},init:function(R){var K="a[!href]";CKEDITOR.dialog.isTabEnabled(R,"link","advanced")&&(K=K.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(R,"link","target")&&(K=K.replace("]",",target,onclick]")),R.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:K,requiredContent:"a[href]"})),R.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),R.addCommand("unlink",new CKEDITOR.unlinkCommand),R.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),R.setKeystroke(CKEDITOR.CTRL+76,"link"),R.setKeystroke(CKEDITOR.CTRL+75,"link"),R.ui.addButton&&(R.ui.addButton("Link",{label:R.lang.link.toolbar,command:"link",toolbar:"links,10"}),R.ui.addButton("Unlink",{label:R.lang.link.unlink,command:"unlink",toolbar:"links,20"}),R.ui.addButton("Anchor",{label:R.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),R.on("doubleclick",function(A){var v=A.data.element.getAscendant({a:1,img:1},!0);v&&!v.isReadOnly()&&(v.is("a")?(A.data.dialog=!v.getAttribute("name")||v.getAttribute("href")&&v.getChildCount()?"link":"anchor",A.data.link=v):CKEDITOR.plugins.link.tryRestoreFakeAnchor(R,v)&&(A.data.dialog="anchor"))},null,null,0),R.on("doubleclick",function(A){A.data.dialog in{link:1,anchor:1}&&A.data.link&&R.getSelection().selectElement(A.data.link)},null,null,20),R.addMenuItems&&R.addMenuItems({anchor:{label:R.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:R.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:R.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:R.lang.link.unlink,command:"unlink",group:"link",order:5}}),R.contextMenu&&R.contextMenu.addListener(function(A){if(!A||A.isReadOnly()||!(A=CKEDITOR.plugins.link.tryRestoreFakeAnchor(R,A))&&!(A=CKEDITOR.plugins.link.getSelectedLink(R)))return null;var v={};return A.getAttribute("href")&&A.getChildCount()&&(v={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),A&&A.hasAttribute("name")&&(v.anchor=v.removeAnchor=CKEDITOR.TRISTATE_OFF),v}),this.compiledProtectionFunction=function r(R){var K;return(R=R.config.emailProtection||"")&&"encode"!=R&&(K={},R.replace(/^([^(]+)\(([^)]+)\)$/,function(A,v,N){K.name=v,K.params=[],N.replace(/[^,\s]+/g,function(B){K.params.push(B)})})),K}(R)},afterInit:function(R){R.dataProcessor.dataFilter.addRules({elements:{a:function(A){return A.attributes.name?A.children.length?null:R.createFakeParserElement(A,"cke_anchor","anchor"):null}}});var K=R._.elementsPath&&R._.elementsPath.filters;K&&K.push(function(A,v){if("a"==v&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(R,A)||A.getAttribute("name")&&(!A.getAttribute("href")||!A.getChildCount())))return"anchor"})}});var s=/^javascript:/,c=/^(?:mailto)(?:(?!\?(subject|body)=).)+/i,f=/subject=([^;?:@&=$,\/]*)/i,l=/body=([^;?:@&=$,\/]*)/i,n=/^#(.*)$/,i=/^((?:http|https|ftp|news):\/\/)?(.*)$/,e=/^(_(?:self|top|parent|blank))$/,t=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,o=/^javascript:([^(]+)\(([^)]+)\)$/,d=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,E=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,T=/^tel:(.*)$/,h={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(R,K){var j,A=R.getSelection(),v=A.getSelectedElement(),N=A.getRanges(),B=[];if(!K&&v&&v.is("a"))return v;for(v=0;v<N.length;v++)if((j=A.getRanges()[v]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(j=R.elementPath(j.getCommonAncestor()).contains("a",1))&&K)B.push(j);else if(j)return j;return K?B:null},getEditorAnchors:function(R){for(var B,K=(A=(K=R.editable()).isInline()&&!R.plugins.divarea?R.document:K).getElementsByTag("a"),A=A.getElementsByTag("img"),v=[],N=0;B=K.getItem(N++);)(B.data("cke-saved-name")||B.hasAttribute("name"))&&v.push({name:B.data("cke-saved-name")||B.getAttribute("name"),id:B.getAttribute("id")});for(N=0;B=A.getItem(N++);)(B=this.tryRestoreFakeAnchor(R,B))&&v.push({name:B.getAttribute("name"),id:B.getAttribute("id")});return v},fakeAnchor:!0,tryRestoreFakeAnchor:function(R,K){if(K&&K.data("cke-real-element-type")&&"anchor"==K.data("cke-real-element-type")){var A=R.restoreRealElement(K);if(A.data("cke-saved-name"))return A}},parseLinkAttributes:function(R,K){var j,A=K&&(K.data("cke-saved-href")||K.getAttribute("href"))||"",v=R.plugins.link.compiledProtectionFunction,N=R.config.emailProtection,B={};if(A.match(s)&&("encode"==N?A=A.replace(t,function(x,O,I){return I=I||"","mailto:"+String.fromCharCode.apply(String,O.split(","))+I.replace(/\\'/g,"'")}):N&&A.replace(o,function(x,O,I){if(O==v.name){B.type="email",x=B.email={},O=/(^')|('$)/g;for(var $,w=(I=I.match(/[^,\s]+/g)).length,S=0;S<w;S++)$=decodeURIComponent($=I[S].replace(O,"").replace(/\\'/g,"'")),x[v.params[S].toLowerCase()]=$;x.address=[x.name,x.domain].join("@")}})),!B.type)if(N=A.match(n))B.type="anchor",B.anchor={},B.anchor.name=B.anchor.id=N[1];else if(N=A.match(T))B.type="tel",B.tel=N[1];else if(N=A.match(c)){j=A.match(f);A=A.match(l);var _=B.email={};B.type="email",_.address=N[0].replace("mailto:",""),j&&(_.subject=decodeURIComponent(j[1])),A&&(_.body=decodeURIComponent(A[1]))}else A&&(j=A.match(i))&&(B.type="url",B.url={},B.url.protocol=j[1],B.url.url=j[2]);if(K){if(A=K.getAttribute("target"))B.target={type:A.match(e)?A:"frame",name:A};else if(A=(A=K.data("cke-pa-onclick")||K.getAttribute("onclick"))&&A.match(d))for(B.target={type:"popup",name:A[1]};N=E.exec(A[2]);)"yes"!=N[2]&&"1"!=N[2]||N[1]in{height:1,width:1,top:1,left:1}?isFinite(N[2])&&(B.target[N[1]]=N[2]):B.target[N[1]]=!0;null!==K.getAttribute("download")&&(B.download=!0);var F;A={};for(F in h)(N=K.getAttribute(F))&&(A[h[F]]=N);(F=K.data("cke-saved-name")||A.advName)&&(A.advName=F),CKEDITOR.tools.isEmpty(A)||(B.advanced=A)}return B},getLinkAttributes:function(R,K){var A=R.config.emailProtection||"",v={};switch(K.type){case"url":A=K.url&&void 0!==K.url.protocol?K.url.protocol:"http://";var B=K.url&&CKEDITOR.tools.trim(K.url.url)||"";v["data-cke-saved-href"]=0===B.indexOf("/")?B:A+B;break;case"anchor":A=K.anchor&&K.anchor.id,v["data-cke-saved-href"]="#"+(K.anchor&&K.anchor.name||A||"");break;case"email":B=(N=K.email).address;switch(A){case"":case"encode":var j=encodeURIComponent(N.subject||""),_=encodeURIComponent(N.body||""),N=[];j&&N.push("subject="+j),_&&N.push("body="+_),N=N.length?"?"+N.join("&"):"","encode"==A?(A=["javascript:void(location.href='mailto:'+",p(B)],N&&A.push("+'",a(N),"'"),A.push(")")):A=["mailto:",B,N];break;default:A=B.split("@",2),N.name=A[0],N.domain=A[1],A=["javascript:",u(R,N)]}v["data-cke-saved-href"]=A.join("");break;case"tel":v["data-cke-saved-href"]="tel:"+K.tel}if(K.target)if("popup"==K.target.type){A=["window.open(this.href, '",K.target.name||"","', '"];var F="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(B=F.length,j=function(S){K.target[S]&&F.push(S+"="+K.target[S])},N=0;N<B;N++)F[N]+=K.target[F[N]]?"=yes":"=no";j("width"),j("left"),j("height"),j("top"),A.push(F.join(","),"'); return false;"),v["data-cke-pa-onclick"]=A.join("")}else"notSet"!=K.target.type&&K.target.name&&(v.target=K.target.name);if(K.download&&(v.download=""),K.advanced){for(var x in h)(A=K.advanced[h[x]])&&(v[x]=A);v.name&&(v["data-cke-saved-name"]=v.name)}for(var O in v["data-cke-saved-href"]&&(v.href=v["data-cke-saved-href"]),x={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},K.advanced&&CKEDITOR.tools.extend(x,h),v)delete x[O];return{set:v,removed:CKEDITOR.tools.object.keys(x)}},showDisplayTextForElement:function(R,K){var v=K.getSelection();return!(K.widgets&&K.widgets.focused||v&&1<v.getRanges().length)&&(!R||!R.getName||!R.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(R){if(CKEDITOR.env.ie){var v,K=R.getSelection().getRanges()[0],A=K.getPreviousEditableNode()&&K.getPreviousEditableNode().getAscendant("a",!0)||K.getNextEditableNode()&&K.getNextEditableNode().getAscendant("a",!0);K.collapsed&&A&&(v=K.createBookmark(),K.selectNodeContents(A),K.select())}A=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),R.removeStyle(A),v&&(K.moveToBookmark(v),K.select())},refresh:function(R,K){var A=K.lastElement&&K.lastElement.getAscendant("a",!0);A&&"a"==A.getName()&&A.getAttribute("href")&&A.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(R){var v,K=R.getSelection(),A=K.createBookmarks();K&&(v=K.getSelectedElement())&&(v.getChildCount()?v.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(R,v))?v.remove(1):(v=CKEDITOR.plugins.link.getSelectedLink(R))&&(v.hasAttribute("href")?(v.removeAttributes({name:1,"data-cke-saved-name":1}),v.removeClass("cke_anchor")):v.remove(1)),K.selectBookmarks(A)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0,linkDefaultProtocol:"http://"})}(),function(){function a(h,R,K,A){for(var v=CKEDITOR.plugins.list.listToArray(R.root,K),N=[],B=0;B<R.contents.length;B++){(j=(j=R.contents[B]).getAscendant("li",!0))&&!j.getCustomData("list_item_processed")&&(N.push(j),CKEDITOR.dom.element.setMarker(K,j,"list_item_processed",!0))}var _,F,j=R.root.getDocument();for(B=0;B<N.length;B++){var x=N[B].getCustomData("listarray_index");(_=v[x].parent).is(this.type)||(F=j.createElement(this.type),_.copyAttributes(F,{start:1,type:1}),F.removeStyle("list-style-type"),v[x].parent=F)}var O;for(v=(K=CKEDITOR.plugins.list.arrayToList(v,K,null,h.config.enterMode)).listNode.getChildCount(),B=0;B<v&&(O=K.listNode.getChild(B));B++)O.getName()==this.type&&A.push(O);K.listNode.replace(R.root),h.fire("contentDomInvalidated")}function p(h,R,K){var A=R.contents,v=R.root.getDocument(),N=[];if(1==A.length&&A[0].equals(R.root)){var B=v.createElement("div");A[0].moveChildren&&A[0].moveChildren(B),A[0].append(B),A[0]=B}for(R=R.contents[0].getParent(),B=0;B<A.length;B++)R=R.getCommonAncestor(A[B].getParent());h=h.config.useComputedState;var j,_;for(B=0;B<A.length;B++)for(var x,F=A[B];x=F.getParent();){if(x.equals(R)){N.push(F),!_&&F.getDirection()&&(_=1),F=F.getDirection(h),null!==j&&(j=j&&j!=F?null:F);break}F=x}if(!(1>N.length)){for(A=N[N.length-1].getNext(),B=v.createElement(this.type),K.push(B);N.length;)K=N.shift(),h=v.createElement("li"),(F=K).is("pre")||E.test(F.getName())||"false"==F.getAttribute("contenteditable")?K.appendTo(h):(K.copyAttributes(h),j&&K.getDirection()&&(h.removeStyle("direction"),h.removeAttribute("dir")),K.moveChildren(h),K.remove()),h.appendTo(B);j&&_&&B.setAttribute("dir",j),A?B.insertBefore(A):B.appendTo(R)}}function u(h,R,K){function A(O){!(F=_[O?"getFirst":"getLast"]())||F.is&&F.isBlockBoundary()||!(x=R.root[O?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||x.is&&x.isBlockBoundary({br:1})||h.document.createElement("br")[O?"insertBefore":"insertAfter"](F)}for(var v=CKEDITOR.plugins.list.listToArray(R.root,K),N=[],B=0;B<R.contents.length;B++){var j=R.contents[B];(j=j.getAscendant("li",!0))&&!j.getCustomData("list_item_processed")&&(N.push(j),CKEDITOR.dom.element.setMarker(K,j,"list_item_processed",!0))}for(j=null,B=0;B<N.length;B++)v[j=N[B].getCustomData("listarray_index")].indent=-1;for(B=j+1;B<v.length;B++)if(v[B].indent>v[B-1].indent+1){for(N=v[B-1].indent+1-v[B].indent,j=v[B].indent;v[B]&&v[B].indent>=j;)v[B].indent+=N,B++;B--}var F,x,_=CKEDITOR.plugins.list.arrayToList(v,K,null,h.config.enterMode,R.root.getAttribute("dir")).listNode;A(!0),A(),_.replace(R.root),h.fire("contentDomInvalidated")}function r(h,R){this.name=h,this.context=this.type=R,this.allowedContent=R+" li",this.requiredContent=R}function s(h,R,K,A){for(var v,N;v=h[A?"getLast":"getFirst"](T);)(N=v.getDirection(1))!==R.getDirection(1)&&v.setAttribute("dir",N),v.remove(),K?v[A?"insertBefore":"insertAfter"](K):R.append(v,A),K=v}function c(h){function R(K){var A=h[K?"getPrevious":"getNext"](o);A&&A.type==CKEDITOR.NODE_ELEMENT&&A.is(h.getName())&&(s(h,A,null,!K),h.remove(),h=A)}R(),R(1)}function f(h){return h.type==CKEDITOR.NODE_ELEMENT&&(h.getName()in CKEDITOR.dtd.$block||h.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[h.getName()]["#"]}function l(h,R,K){h.fire("saveSnapshot"),K.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var A=K.extractContents();R.trim(!1,!0);var v=R.createBookmark(),N=(B=new CKEDITOR.dom.elementPath(R.startContainer)).block,B=B.lastElement.getAscendant("li",1)||N,j=(_=new CKEDITOR.dom.elementPath(K.startContainer)).contains(CKEDITOR.dtd.$listItem),_=_.contains(CKEDITOR.dtd.$list);for(N?(N=N.getBogus())&&N.remove():_&&(N=_.getPrevious(o))&&d(N)&&N.remove(),(N=A.getLast())&&N.type==CKEDITOR.NODE_ELEMENT&&N.is("br")&&N.remove(),(N=R.startContainer.getChild(R.startOffset))?A.insertBefore(N):R.startContainer.append(A),j&&(A=n(j))&&(B.contains(j)?(s(A,j.getParent(),j),A.remove()):B.append(A));K.checkStartOfBlock()&&K.checkEndOfBlock()&&(A=(_=K.startPath()).block);)A.is("li")&&(B=A.getParent(),A.equals(B.getLast(o))&&A.equals(B.getFirst(o))&&(A=B)),K.moveToPosition(A,CKEDITOR.POSITION_BEFORE_START),A.remove();K=K.clone(),A=h.editable(),K.setEndAt(A,CKEDITOR.POSITION_BEFORE_END),(K=new CKEDITOR.dom.walker(K)).evaluator=function(F){return o(F)&&!d(F)},(K=K.next())&&K.type==CKEDITOR.NODE_ELEMENT&&K.getName()in CKEDITOR.dtd.$list&&c(K),R.moveToBookmark(v),R.select(),h.fire("saveSnapshot")}function n(h){return(h=h.getLast(o))&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in i?h:null}var i={ol:1,ul:1},e=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(),o=function(h){return!(e(h)||t(h))},d=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(h,R,K,A,v){if(!i[h.getName()])return[];A||(A=0),K||(K=[]);for(var N=0,B=h.getChildCount();N<B;N++){var j=h.getChild(N);if(j.type==CKEDITOR.NODE_ELEMENT&&j.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(j,R,K,A+1),"li"==j.$.nodeName.toLowerCase()){var _={parent:h,indent:A,element:j,contents:[]};v?_.grandparent=v:(_.grandparent=h.getParent(),_.grandparent&&"li"==_.grandparent.$.nodeName.toLowerCase()&&(_.grandparent=_.grandparent.getParent())),R&&CKEDITOR.dom.element.setMarker(R,j,"listarray_index",K.length),K.push(_);for(var O,F=0,x=j.getChildCount();F<x;F++)(O=j.getChild(F)).type==CKEDITOR.NODE_ELEMENT&&i[O.getName()]?CKEDITOR.plugins.list.listToArray(O,R,K,A+1,_.grandparent):_.contents.push(O)}}return K},arrayToList:function(h,R,K,A,v){if(K||(K=0),!h||h.length<K+1)return null;for(var N,I,w,B=h[K].parent.getDocument(),j=new CKEDITOR.dom.documentFragment(B),_=null,F=K,x=Math.max(h[K].indent,0),O=null,U=A==CKEDITOR.ENTER_P?"p":"div";;){var $=h[F];if(N=$.grandparent,I=$.element.getDirection(1),$.indent==x){for(_&&h[F].parent.getName()==_.getName()||(_=h[F].parent.clone(!1,1),v&&_.setAttribute("dir",v),j.append(_)),O=_.append($.element.clone(0,1)),I!=_.getDirection(1)&&O.setAttribute("dir",I),N=0;N<$.contents.length;N++)O.append($.contents[N].clone(1,1));F++}else if($.indent==Math.max(x,0)+1)$=h[F-1].element.getDirection(1),F=CKEDITOR.plugins.list.arrayToList(h,null,F,A,$!=I?I:null),!O.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=B.$.documentMode&&O.append(B.createText("\xa0")),O.append(F.listNode),F=F.nextIndex;else{if(-1!=$.indent||K||!N)return null;i[N.getName()]?(O=$.element.clone(!1,!0),I!=N.getDirection(1)&&O.setAttribute("dir",I)):O=new CKEDITOR.dom.documentFragment(B);_=N.getDirection(1)!=I;var y,k,S=$.element,q=S.getAttribute("class"),C=S.getAttribute("style"),m=O.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(A!=CKEDITOR.ENTER_BR||_||C||q),g=$.contents.length;for(N=0;N<g;N++)if(y=$.contents[N],t(y)&&1<g)m?k=y.clone(1,1):O.append(y.clone(1,1));else if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){_&&!y.getDirection()&&y.setAttribute("dir",I),w=y;var b=S.getAttribute("style");b&&w.setAttribute("style",b.replace(/([^;])$/,"$1;")+(w.getAttribute("style")||"")),q&&y.addClass(q),w=null,k&&(O.append(k),k=null),O.append(y.clone(1,1))}else m?(w||(w=B.createElement(U),O.append(w),_&&w.setAttribute("dir",I)),C&&w.setAttribute("style",C),q&&w.setAttribute("class",q),k&&(w.append(k),k=null),w.append(y.clone(1,1))):O.append(y.clone(1,1));k&&((w||O).append(k),k=null),O.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&F!=h.length-1&&(CKEDITOR.env.needsBrFiller&&(I=O.getLast())&&I.type==CKEDITOR.NODE_ELEMENT&&I.is("br")&&I.remove(),(I=O.getLast(o))&&I.type==CKEDITOR.NODE_ELEMENT&&I.is(CKEDITOR.dtd.$block)||O.append(B.createElement("br"))),"div"!=(I=O.$.nodeName.toLowerCase())&&"p"!=I||O.appendBogus(),j.append(O),_=null,F++}if(w=null,h.length<=F||Math.max(h[F].indent,0)<x)break}if(R)for(h=j.getFirst();h;){if(h.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(R,h),h.getName()in CKEDITOR.dtd.$listItem&&(B=v=A=void 0,A=(K=h).getDirection()))){for(v=K.getParent();v&&!(B=v.getDirection());)v=v.getParent();A==B&&K.removeAttribute("dir")}h=h.getNextSourceNode()}return{listNode:j,nextIndex:F}}};var E=/^h[1-6]$/,T=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);r.prototype={exec:function(h){function R(q){return i[q.root.getName()]&&!function K(q,C){return CKEDITOR.tools.array.filter(q.getChildren().toArray(),function(m){return-1===CKEDITOR.tools.array.indexOf(C,m.type)}).length}(q.root,[CKEDITOR.NODE_COMMENT])}function A(q){var C=!0;return 0!==q.getChildCount()&&(q.forEach(function(m){if(m.type!==CKEDITOR.NODE_COMMENT)return C=!1},null,!0),C)}this.refresh(h,h.elementPath());var v=h.config,N=h.getSelection(),B=N&&N.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((j=h.editable()).getFirst(o)){var _=1==B.length&&B[0];(v=_&&_.getEnclosedNode())&&v.is&&this.type==v.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else v.enterMode==CKEDITOR.ENTER_BR?j.appendBogus():B[0].fixBlock(1,v.enterMode==CKEDITOR.ENTER_P?"p":"div"),N.selectRanges(B);v=N.createBookmarks(!0);for(var j=[],F={},x=(B=B.createIterator(),0);(_=B.getNextRange())&&++x;){var O=_.getBoundaryNodes(),I=O.startNode,w=O.endNode;for(I.type==CKEDITOR.NODE_ELEMENT&&"td"==I.getName()&&_.setStartAt(O.startNode,CKEDITOR.POSITION_AFTER_START),w.type==CKEDITOR.NODE_ELEMENT&&"td"==w.getName()&&_.setEndAt(O.endNode,CKEDITOR.POSITION_BEFORE_END),(_=_.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;O=_.getNextParagraph();)if(!O.getCustomData("list_block")&&!A(O)){CKEDITOR.dom.element.setMarker(F,O,"list_block",1);I=(U=h.elementPath(O)).elements,w=0;for(var $,U=U.blockLimit,S=I.length-1;0<=S&&($=I[S]);S--)if(i[$.getName()]&&U.contains($)){U.removeCustomData("list_group_object_"+x),(I=$.getCustomData("list_group_object"))?I.contents.push(O):(I={root:$,contents:[O]},j.push(I),CKEDITOR.dom.element.setMarker(F,$,"list_group_object",I)),w=1;break}w||((w=U).getCustomData("list_group_object_"+x)?w.getCustomData("list_group_object_"+x).contents.push(O):(I={root:w,contents:[O]},CKEDITOR.dom.element.setMarker(F,w,"list_group_object_"+x,I),j.push(I)))}}for($=[];0<j.length;)I=j.shift(),this.state==CKEDITOR.TRISTATE_OFF?R(I)||(i[I.root.getName()]?a.call(this,h,I,F,$):p.call(this,h,I,$)):this.state==CKEDITOR.TRISTATE_ON&&i[I.root.getName()]&&!R(I)&&u.call(this,h,I,F);for(S=0;S<$.length;S++)c($[S]);CKEDITOR.dom.element.clearAllMarkers(F),N.selectBookmarks(v),h.focus()},refresh:function(h,R){var K=R.contains(i,1),A=R.blockLimit||R.root;K&&A.contains(K)?this.setState(K.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(h){h.blockless||(h.addCommand("numberedlist",new r("numberedlist","ol")),h.addCommand("bulletedlist",new r("bulletedlist","ul")),h.ui.addButton&&(h.ui.addButton("NumberedList",{isToggle:!0,label:h.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),h.ui.addButton("BulletedList",{isToggle:!0,label:h.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),h.on("key",function(R){var A,K=R.data.domEvent.getKey();if("wysiwyg"==h.mode&&K in{8:1,46:1}){var v=h.getSelection().getRanges()[0],N=v&&v.startPath();if(v&&v.collapsed){var F,B=8==K,j=h.editable(),_=new CKEDITOR.dom.walker(v.clone());if(_.evaluator=function(O){return o(O)&&!d(O)},_.guard=function(O,I){return!(I&&O.type==CKEDITOR.NODE_ELEMENT&&O.is("table"))},K=v.clone(),B)if((F=N.contains(i))&&v.checkBoundaryOfElement(F,CKEDITOR.START)&&(F=F.getParent())&&F.is("li")&&(F=n(F))?(A=F,F=F.getPrevious(o),K.moveToPosition(F&&d(F)?F:A,CKEDITOR.POSITION_BEFORE_START)):(_.range.setStartAt(j,CKEDITOR.POSITION_AFTER_START),_.range.setEnd(v.startContainer,v.startOffset),(F=_.previous())&&F.type==CKEDITOR.NODE_ELEMENT&&(F.getName()in i||F.is("li"))&&(F.is("li")||(_.range.selectNodeContents(F),_.reset(),_.evaluator=f,F=_.previous()),A=F,K.moveToElementEditEnd(A),K.moveToPosition(K.endPath().block,CKEDITOR.POSITION_BEFORE_END))),A)l(h,K,v),R.cancel();else{var x=N.contains(i);x&&v.checkBoundaryOfElement(x,CKEDITOR.START)&&(A=x.getFirst(o),v.checkBoundaryOfElement(A,CKEDITOR.START)&&(F=x.getPrevious(o),n(A)?F&&(v.moveToElementEditEnd(F),v.select()):h.execCommand("outdent"),R.cancel()))}else if(A=N.contains("li")){if(_.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),B=(j=A.getLast(o))&&f(j)?j:A,N=0,(F=_.next())&&F.type==CKEDITOR.NODE_ELEMENT&&F.getName()in i&&F.equals(j)?(N=1,F=_.next()):v.checkBoundaryOfElement(B,CKEDITOR.END)&&(N=2),N&&F){if((v=v.clone()).moveToElementEditStart(F),1==N&&(K.optimize(),!K.startContainer.equals(A))){for(A=K.startContainer;A.is(CKEDITOR.dtd.$inline);)x=A,A=A.getParent();x&&K.moveToPosition(x,CKEDITOR.POSITION_AFTER_END)}2==N&&(K.moveToPosition(K.endPath().block,CKEDITOR.POSITION_BEFORE_END),v.endPath().block&&v.moveToPosition(v.endPath().block,CKEDITOR.POSITION_AFTER_START)),l(h,K,v),R.cancel()}}else _.range.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),(F=_.next())&&F.type==CKEDITOR.NODE_ELEMENT&&F.is(i)&&(F=F.getFirst(o),N.block&&v.checkStartOfBlock()&&v.checkEndOfBlock()?(N.block.remove(),v.moveToElementEditStart(F),v.select()):n(F)?(v.moveToElementEditStart(F),v.select()):((v=v.clone()).moveToElementEditStart(F),l(h,K,v)),R.cancel());setTimeout(function(){h.selectionChange(1)})}}}))}})}(),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var p=a.config,u=a.lang.stylescombo,r={},s=[],c=[];a.on("stylesSet",function(f){if(f=f.data.styles){for(var l,n,i,e,t=0,o=f.length;t<o;t++)l=f[t],a.blockless&&l.element in CKEDITOR.dtd.$block||"string"==typeof l.type&&!CKEDITOR.style.customHandlers[l.type]||(n=l.name,e=l.language||a.langCode,l=new CKEDITOR.style(l),a.filter.customConfig&&!a.filter.check(l))||(l._name=n,l._.enterMode=p.enterMode,l._.type=i=l.assignedTo||l.type,l._.weight=t+1e3*(i==CKEDITOR.STYLE_OBJECT?1:i==CKEDITOR.STYLE_BLOCK?2:3),l._.language=e,r[n]=l,s.push(l),c.push(l));s.sort(function(d,E){return d._.weight-E._.weight})}}),a.on("stylesRemove",function(f){var n,l=void 0===(f=f.data&&f.data.type);for(n in r){var i=r[n];(l||i.type===f)&&a.removeStyle(i)}}),a.ui.addRichCombo("Styles",{label:u.label,title:u.panelTitle,toolbar:"styles,10",allowedContent:c,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(p.contentsCss),multiSelect:!0,attributes:{"aria-label":u.panelTitle}},init:function(){var f,l,n,i,e,t,o;for(t=0,o=s.length;t<o;t++)l=(f=s[t])._name,i=f._.type,e=f._.definition.language,i!=n&&(this.startGroup(u["panelTitle"+String(i)]),n=i),this.add(l,f.type==CKEDITOR.STYLE_OBJECT?l:f.buildPreview(),l,e);this.commit()},onClick:function(f){a.focus(),a.fire("saveSnapshot"),f=r[f];var l=a.elementPath();f.group&&f.removeStylesFromSameGroup(a)?a.applyStyle(f):a[f.checkActive(l,a)?"removeStyle":"applyStyle"](f),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(f){for(var e,l=this.getValue(),n=0,i=(f=f.data.path.elements).length;n<i;n++)for(var t in e=f[n],r)if(r[t].checkElementRemovable(e,!0,a))return void(t!=l&&this.setValue(t));this.setValue("")},this)},onOpen:function(){var f=(f=a.getSelection()).getSelectedElement()||f.getStartElement()||a.editable(),l=(f=a.elementPath(f),[0,0,0,0]);for(var n in this.showAll(),this.unmarkAll(),r){var i=r[n],e=i._.type;i.checkApplicable(f,a,a.activeFilter)?l[e]++:this.hideItem(n),i.checkActive(f,a)&&this.mark(n)}l[CKEDITOR.STYLE_BLOCK]||this.hideGroup(u["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),l[CKEDITOR.STYLE_INLINE]||this.hideGroup(u["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),l[CKEDITOR.STYLE_OBJECT]||this.hideGroup(u["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var f=a.elementPath();if(f){for(var l in r)if(r[l].checkApplicable(f,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){r={},s=[]}})}}),function(){var p=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],u={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(n){function i(T){t.enabled&&!1!==T.data.command.canUndo&&t.save()}function e(){t.enabled=!n.readOnly&&"wysiwyg"==n.mode,t.onChange()}var t=n.undoManager=new r(n),o=t.editingHandler=new f(t),d=n.addCommand("undo",{exec:function(){t.undo()&&(n.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),E=n.addCommand("redo",{exec:function(){t.redo()&&(n.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});n.setKeystroke([[p[0],"undo"],[p[1],"redo"],[p[2],"redo"]]),t.onChange=function(){d.setState(t.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),E.setState(t.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},n.on("beforeCommandExec",i),n.on("afterCommandExec",i),n.on("saveSnapshot",function(T){t.save(T.data&&T.data.contentOnly)}),n.on("contentDom",o.attachListeners,o),n.on("instanceReady",function(){n.fire("saveSnapshot")}),n.on("beforeModeUnload",function(){"wysiwyg"==n.mode&&t.save(!0)}),n.on("mode",e),n.on("readOnly",e),n.ui.addButton&&(n.ui.addButton("Undo",{label:n.lang.undo.undo,command:"undo",toolbar:"undo,10"}),n.ui.addButton("Redo",{label:n.lang.undo.redo,command:"redo",toolbar:"undo,20"})),n.resetUndo=function(){t.reset(),n.fire("saveSnapshot")},n.on("updateSnapshot",function(){t.currentImage&&t.update()}),n.on("lockSnapshot",function(T){T=T.data,t.lock(T&&T.dontUpdate,T&&T.forceUpdate)}),n.on("unlockSnapshot",t.unlock,t)}}),CKEDITOR.plugins.undo={};var r=CKEDITOR.plugins.undo.UndoManager=function(n){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=n.config.undoStackSize||20,this.strokesLimit=25,this._filterRules=[],this.editor=n,this.reset(),CKEDITOR.env.ie&&this.addFilterRule(function(i){return i.replace(/\s+data-cke-expando=".*?"/g,"")})};r.prototype={type:function(n,i){var e=r.getKeyGroup(n),t=this.strokesRecorded[e]+1;i=i||t>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),i?(t=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[e]=t,this.previousKeyGroup=e},keyGroupChanged:function(n){return r.getKeyGroup(n)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(n,i,e){var t=this.editor;if(this.locked||"ready"!=t.status||"wysiwyg"!=t.mode)return!1;var o=t.editable();if(!o||"ready"!=o.status||(o=this.snapshots,i||(i=new s(t)),!1===i.contents))return!1;if(this.currentImage)if(i.equalsContent(this.currentImage)){if(n||i.equalsSelection(this.currentImage))return!1}else!1!==e&&t.fire("change");return o.splice(this.index+1,o.length-this.index-1),o.length==this.limit&&o.shift(),this.index=o.push(i)-1,this.currentImage=i,!1!==e&&this.refreshState(),!0},restoreImage:function(n){var e,i=this.editor;n.bookmarks&&(i.focus(),e=i.getSelection()),this.locked={level:999},this.editor.loadSnapshot(n.contents),n.bookmarks?e.selectBookmarks(n.bookmarks):CKEDITOR.env.ie&&((e=this.editor.document.getBody().$.createTextRange()).collapse(!0),e.select()),this.locked=null,this.index=n.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),i.fire("change")},getNextImage:function(n){var t,i=this.snapshots,e=this.currentImage;if(e)if(n){for(t=this.index-1;0<=t;t--)if(n=i[t],!e.equalsContent(n))return n.index=t,n}else for(t=this.index+1;t<i.length;t++)if(n=i[t],!e.equalsContent(n))return n.index=t,n;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var n=this.getNextImage(!0);if(n)return this.restoreImage(n),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var n=this.getNextImage(!1);if(n)return this.restoreImage(n),!0}return!1},update:function(n){if(!this.locked){n||(n=new s(this.editor));for(var i=this.index,e=this.snapshots;0<i&&this.currentImage.equalsContent(e[i-1]);)--i;e.splice(i,this.index-i+1,n),this.index=i,this.currentImage=n}},updateSelection:function(n){if(!this.snapshots.length)return!1;var i=this.snapshots,e=i[i.length-1];return!(!e.equalsContent(n)||e.equalsSelection(n))&&(this.currentImage=i[i.length-1]=n,!0)},lock:function(n,i){if(this.locked)this.locked.level++;else if(n)this.locked={level:1};else{var e=null;if(i)e=!0;else{var t=new s(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(t)&&(e=t)}this.locked={update:e,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var n=this.locked.update;if(this.locked=null,!0===n)this.update();else if(n){var i=new s(this.editor,!0);n.equalsContent(i)||this.update()}}},addFilterRule:function(n){this._filterRules.push(n)}},r.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},r.keyGroups={PRINTABLE:0,FUNCTIONAL:1},r.isNavigationKey=function(n){return!!r.navigationKeyCodes[n]},r.getKeyGroup=function(n){var i=r.keyGroups;return u[n]?i.FUNCTIONAL:i.PRINTABLE},r.getOppositeKeyGroup=function(n){var i=r.keyGroups;return n==i.FUNCTIONAL?i.PRINTABLE:i.FUNCTIONAL},r.ieFunctionalKeysBug=function(n){return CKEDITOR.env.ie&&r.getKeyGroup(n)==r.keyGroups.FUNCTIONAL};var s=CKEDITOR.plugins.undo.Image=function(n,i){this.editor=n,n.fire("beforeUndoImage");var e=n.getSnapshot();e&&(this.contents=function a(n,i){return CKEDITOR.tools.array.reduce(i,function(e,t){return t(e)},n)}(e,n.undoManager._filterRules)),i||(this.bookmarks=(e=e&&n.getSelection())&&e.createBookmarks2(!0)),n.fire("afterUndoImage")},c=/\b(?:href|src|name)="[^"]*?"/gi;s.prototype={equalsContent:function(n){var i=this.contents;return n=n.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(i=i.replace(c,""),n=n.replace(c,"")),i==n},equalsSelection:function(n){var i=this.bookmarks;if(n=n.bookmarks,i||n){if(!i||!n||i.length!=n.length)return!1;for(var e=0;e<i.length;e++){var t=i[e],o=n[e];if(t.startOffset!=o.startOffset||t.endOffset!=o.endOffset||!CKEDITOR.tools.arrayCompare(t.start,o.start)||!CKEDITOR.tools.arrayCompare(t.end,o.end))return!1}}return!0}};var f=CKEDITOR.plugins.undo.NativeEditingHandler=function(n){this.undoManager=n,this.ignoreInputEvent=!1,this.keyEventsStack=new l,this.lastKeydownImage=null};f.prototype={onKeydown:function(n){var i=n.data.getKey();229!==i&&(-1<CKEDITOR.tools.indexOf(p,n.data.getKeystroke())?n.data.preventDefault():(this.keyEventsStack.cleanUp(n),n=this.undoManager,this.keyEventsStack.getLast(i)||this.keyEventsStack.push(i),this.lastKeydownImage=new s(n.editor),(r.isNavigationKey(i)||this.undoManager.keyGroupChanged(i))&&(n.strokesRecorded[0]||n.strokesRecorded[1])&&(n.save(!1,this.lastKeydownImage,!1),n.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var n=this.keyEventsStack.getLast();n||(n=this.keyEventsStack.push(0)),this.keyEventsStack.increment(n.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(n.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(n){var i=this.undoManager;n=n.data.getKey();var e=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(n),r.ieFunctionalKeysBug(n)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new s(i.editor,!0))||(0<e?i.type(n):r.isNavigationKey(n)&&this.onNavigationKey(!0))},onNavigationKey:function(n){var i=this.undoManager;!n&&i.save(!0,null,!1)||i.updateSelection(new s(i.editor)),i.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var n=this.undoManager.editor,i=n.editable(),e=this;i.attachListener(i,"keydown",function(t){e.onKeydown(t),r.ieFunctionalKeysBug(t.data.getKey())&&e.onInput()},null,null,999),i.attachListener(i,CKEDITOR.env.ie?"keypress":"input",e.onInput,e,null,999),i.attachListener(i,"keyup",e.onKeyup,e,null,999),i.attachListener(i,"paste",e.ignoreInputEventListener,e,null,999),i.attachListener(i,"drop",e.ignoreInputEventListener,e,null,999),n.on("afterPaste",e.activateInputEventListener,e,null,999),i.attachListener(i.isInline()?i:n.document.getDocumentElement(),"click",function(){e.onNavigationKey()},null,null,999),i.attachListener(this.undoManager.editor,"blur",function(){e.keyEventsStack.remove(9)},null,null,999)}};var l=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};l.prototype={push:function(n){return n=this.stack.push({keyCode:n,inputs:0}),this.stack[n-1]},getLastIndex:function(n){if("number"!=typeof n)return this.stack.length-1;for(var i=this.stack.length;i--;)if(this.stack[i].keyCode==n)return i;return-1},getLast:function(n){return-1!=(n=this.getLastIndex(n))?this.stack[n]:null},increment:function(n){this.getLast(n).inputs++},remove:function(n){-1!=(n=this.getLastIndex(n))&&this.stack.splice(n,1)},resetInputs:function(n){if("number"==typeof n)this.getLast(n).inputs=0;else for(n=this.stack.length;n--;)this.stack[n].inputs=0},getTotalInputs:function(){for(var n=this.stack.length,i=0;n--;)i+=this.stack[n].inputs;return i},cleanUp:function(n){(n=n.data.$).ctrlKey||n.metaKey||this.remove(17),n.shiftKey||this.remove(16),n.altKey||this.remove(18)}}}(),function(){function a(n,i){CKEDITOR.tools.extend(this,{editor:n,editable:n.editable(),doc:n.document,win:n.window},i,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function p(n,i){CKEDITOR.tools.extend(this,i,{editor:n},!0)}function u(n,i){var e=n.editable();CKEDITOR.tools.extend(this,{editor:n,editable:e,inline:e.isInline(),doc:n.document,win:n.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},i,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var t=CKEDITOR.tools.bind(this.queryViewport,this),o=CKEDITOR.tools.bind(this.hideVisible,this),d=CKEDITOR.tools.bind(this.removeAll,this);e.attachListener(this.winTop,"resize",t),e.attachListener(this.winTop,"scroll",t),e.attachListener(this.winTop,"resize",o),e.attachListener(this.win,"scroll",o),e.attachListener(this.inline?e:this.frame,"mouseout",function(E){var T=E.data.$.clientX;E=E.data.$.clientY,this.queryViewport(),(T<=this.rect.left||T>=this.rect.right||E<=this.rect.top||E>=this.rect.bottom)&&this.hideVisible(),(0>=T||T>=this.winTopPane.width||0>=E||E>=this.winTopPane.height)&&this.hideVisible()},this),e.attachListener(n,"resize",t),e.attachListener(n,"mode",d),n.on("destroy",d),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},c,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},s,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function r(n){var i;return(i=n&&n.type==CKEDITOR.NODE_ELEMENT)&&(i=!(f[n.getComputedStyle("float")]||f[n.getAttribute("align")])),i&&!l[n.getComputedStyle("position")]}var n;CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,a.prototype={start:function(n){var o,d,E,T,i=this,e=this.editor,t=this.doc,h=CKEDITOR.tools.eventsBuffer(50,function(){e.readOnly||"wysiwyg"!=e.mode||(i.relations={},(d=t.$.elementFromPoint(E,T))&&d.nodeType&&(o=new CKEDITOR.dom.element(d),i.traverseSearch(o),isNaN(E+T)||i.pixelSearch(o,E,T),n&&n(i.relations,E,T)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(R){E=R.data.$.clientX,T=R.data.$.clientY,h.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){h.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:(n={},n[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,n[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,n[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(i){var e=this.editor.createRange();return e.moveToPosition(this.relations[i.uid].element,n[i.type]),e}),store:function(){function n(i,e,t){var o=i.getUniqueId();o in t?t[o].type|=e:t[o]={element:i,type:e}}return function(i,e){var t;e&CKEDITOR.LINEUTILS_AFTER&&r(t=i.getNext())&&t.isVisible()&&(n(t,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_AFTER),e&CKEDITOR.LINEUTILS_INSIDE&&r(t=i.getFirst())&&t.isVisible()&&(n(t,CKEDITOR.LINEUTILS_BEFORE,this.relations),e^=CKEDITOR.LINEUTILS_INSIDE),n(i,e,this.relations)}}(),traverseSearch:function(n){var i,e,t;do{if(!(t=n.$["data-cke-expando"])||!(t in this.relations)){if(n.equals(this.editable))break;if(r(n))for(i in this.lookups)(e=this.lookups[i](n))&&this.store(n,e)}}while((!n||n.type!=CKEDITOR.NODE_ELEMENT||"true"!=n.getAttribute("contenteditable"))&&(n=n.getParent()))},pixelSearch:function(){function n(e,t,o,d,E){for(var h,T=0;E(o)&&(o+=d,25!=++T);)if(h=this.doc.$.elementFromPoint(t,o))if(h==e)T=0;else if(i(e,h)&&(T=0,r(h=new CKEDITOR.dom.element(h))))return h}var i=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(e,t){return e.contains(t)}:function(e,t){return!!(16&e.compareDocumentPosition(t))};return function(e,t,o){var d=this.win.getViewPaneSize().height,E=n.call(this,e.$,t,o,-1,function(T){return 0<T});if(t=n.call(this,e.$,t,o,1,function(T){return T<d}),E)for(this.traverseSearch(E);!E.getParent().equals(e);)E=E.getParent();if(t)for(this.traverseSearch(t);!t.getParent().equals(e);)t=t.getParent();for(;(E||t)&&(E&&(E=E.getNext(r)),E&&!E.equals(t)&&(this.traverseSearch(E),t&&(t=t.getPrevious(r)),t&&!t.equals(E)));)this.traverseSearch(t)}}(),greedySearch:function(){this.relations={};for(var e,t,o,n=this.editable.getElementsByTag("*"),i=0;e=n.getItem(i++);)if(!e.equals(this.editable)&&e.type==CKEDITOR.NODE_ELEMENT&&(e.hasAttribute("contenteditable")||!e.isReadOnly())&&r(e)&&e.isVisible())for(o in this.lookups)(t=this.lookups[o](e))&&this.store(e,t);return this.relations}},p.prototype={locate:function(){function n(i,e){var t=i.element[e===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return t&&r(t)?(i.siblingRect=t.getClientRect(),e==CKEDITOR.LINEUTILS_BEFORE?(i.siblingRect.bottom+i.elementRect.top)/2:(i.elementRect.bottom+i.siblingRect.top)/2):e==CKEDITOR.LINEUTILS_BEFORE?i.elementRect.top:i.elementRect.bottom}return function(i){var e;for(var t in this.locations={},i)(e=i[t]).elementRect=e.element.getClientRect(),e.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(t,CKEDITOR.LINEUTILS_BEFORE,n(e,CKEDITOR.LINEUTILS_BEFORE)),e.type&CKEDITOR.LINEUTILS_AFTER&&this.store(t,CKEDITOR.LINEUTILS_AFTER,n(e,CKEDITOR.LINEUTILS_AFTER)),e.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(t,CKEDITOR.LINEUTILS_INSIDE,(e.elementRect.top+e.elementRect.bottom)/2);return this.locations}}(),sort:function(){var n,i,e,t;return function(o,d){for(var E in n=this.locations,i=[],n)for(var T in n[E])if(e=Math.abs(o-n[E][T]),i.length){for(t=0;t<i.length;t++)if(e<i[t].dist){i.splice(t,0,{uid:+E,type:T,dist:e});break}t==i.length&&i.push({uid:+E,type:T,dist:e})}else i.push({uid:+E,type:T,dist:e});return typeof d<"u"?i.slice(0,d):i}}(),store:function(n,i,e){this.locations[n]||(this.locations[n]={}),this.locations[n][i]=e}};var s={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},c={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};u.prototype={removeAll:function(){for(var n in this.hidden)this.hidden[n].remove(),delete this.hidden[n];for(n in this.visible)this.visible[n].remove(),delete this.visible[n]},hideLine:function(n){var i=n.getUniqueId();n.hide(),this.hidden[i]=n,delete this.visible[i]},showLine:function(n){var i=n.getUniqueId();n.show(),this.visible[i]=n,delete this.hidden[i]},hideVisible:function(){for(var n in this.visible)this.hideLine(this.visible[n])},placeLine:function(n,i){var e,t,o;if(e=this.getStyle(n.uid,n.type)){for(o in this.visible)if(this.visible[o].getCustomData("hash")!==this.hash){t=this.visible[o];break}if(!t)for(o in this.hidden)if(this.hidden[o].getCustomData("hash")!==this.hash){this.showLine(t=this.hidden[o]);break}t||this.showLine(t=this.addLine()),t.setCustomData("hash",this.hash),this.visible[t.getUniqueId()]=t,t.setStyles(e),i&&i(t)}},getStyle:function(n,i){var e=this.relations[n],t=this.locations[n][i],o={};if(o.width=e.siblingRect?Math.max(e.siblingRect.width,e.elementRect.width):e.elementRect.width,o.top=this.inline?t+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+t,o.top-this.winTopScroll.y<this.rect.top||o.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var d in this.inline?o.left=e.elementRect.left-this.rect.relativeX:(0<e.elementRect.left?o.left=this.rect.left+e.elementRect.left:(o.width+=e.elementRect.left,o.left=this.rect.left),0<(e=o.left+o.width-(this.rect.left+this.winPane.width))&&(o.width-=e)),o.left+=this.winTopScroll.x,o)o[d]=CKEDITOR.tools.cssLength(o[d]);return o},addLine:function(){var n=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return n.appendTo(this.container),n},prepare:function(n,i){this.relations=n,this.locations=i,this.hash=Math.random()},cleanup:function(){var n,i;for(i in this.visible)(n=this.visible[i]).getCustomData("hash")!==this.hash&&this.hideLine(n)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(n){n=n.getClientRect();var i=this.container.getDocumentPosition(),e=this.container.getComputedStyle("position");return n.relativeX=n.relativeY=0,"static"!=e&&(n.relativeY=i.y,n.relativeX=i.x,n.top-=n.relativeY,n.bottom-=n.relativeY,n.left-=n.relativeX,n.right-=n.relativeX),n}};var f={left:1,right:1,center:1},l={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:a,locator:p,liner:u}}(),function(){function a(p){return p.getName&&!p.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(p){if(CKEDITOR.env.webkit){var u=CKEDITOR.plugins.widgetselection;p.on("contentDom",function(r){var s=(r=r.editor).editable();s.attachListener(s,"keydown",function(c){c.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){u.addFillers(s)||u.removeFillers(s)},0)},null,null,-1),r.on("selectionCheck",function(c){u.removeFillers(c.editor.editable())}),r.on("paste",function(c){c.data.dataValue=u.cleanPasteData(c.data.dataValue)}),"selectall"in r.plugins&&u.addSelectAllIntegration(r)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(p){var u=p.editor;if(!this.isWholeContentSelected(p)&&0<p.getChildCount()){var r=p.getFirst(a),s=p.getLast(a);if(r&&r.type==CKEDITOR.NODE_ELEMENT&&!r.isEditable()&&(this.startFiller=this.createFiller(),p.append(this.startFiller,1)),s&&s.type==CKEDITOR.NODE_ELEMENT&&!s.isEditable()&&(this.endFiller=this.createFiller(!0),p.append(this.endFiller,0)),this.hasFiller(p))return(u=u.createRange()).selectNodeContents(p),u.select(),!0}return!1},removeFillers:function(p){if(this.hasFiller(p)&&!this.isWholeContentSelected(p)){var u=p.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),r=p.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&u&&this.startFiller.equals(u)?this.removeFiller(this.startFiller,p):this.startFiller=u,this.endFiller&&r&&this.endFiller.equals(r)?this.removeFiller(this.endFiller,p):this.endFiller=r}},cleanPasteData:function(p){return p&&p.length&&(p=p.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),p},isWholeContentSelected:function(p){var u=p.editor.getSelection().getRanges()[0];return!(!u||u&&u.collapsed)&&((u=u.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(u&&p&&u.startContainer&&u.endContainer&&0===u.startOffset&&u.endOffset===p.getChildCount()&&u.startContainer.equals(p)&&u.endContainer.equals(p)))},hasFiller:function(p){return 0<p.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(p){var u=new CKEDITOR.dom.element(this.fillerTagName);return u.setHtml(this.fillerContent),u.setAttribute(this.fillerAttribute,p?"end":"start"),u.setAttribute("data-cke-temp",1),u.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),u},removeFiller:function(p,u){if(p){var f,l,r=u.editor,s=u.editor.getSelection().getRanges()[0].startPath(),c=r.createRange();s.contains(p)&&(f=p.getHtml(),l=!0),s="start"==p.getAttribute(this.fillerAttribute),p.remove(),f&&0<f.length&&f!=this.fillerContent?(u.insertHtmlIntoRange(f,r.getSelection().getRanges()[0]),c.setStartAt(u.getChild(u.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),r.getSelection().selectRanges([c])):l&&(s?c.setStartAt(u.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):c.setEndAt(u.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),u.editor.getSelection().selectRanges([c]))}},createFillerRegex:function(p){var u=this.createFiller(p).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((p?"":"^")+u+(p?"$":""))},addSelectAllIntegration:function(p){var u=this;p.editable().attachListener(p,"beforeCommandExec",function(r){var s=p.editable();"selectAll"==r.data.name&&s&&u.addFillers(s)},null,null,9999)}}}(),function(){function a(D){this.editor=D,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function F(D){var M,W,P=D.editor;P.on("toHtml",function(V){var ne,J=function t(D){var P=[],M=D._.upcasts,W=D._.upcastCallbacks;return{toBeWrapped:P,iterator:function(V){var J,ne,ie,re,le;if("data-cke-widget-wrapper"in V.attributes)return(V=V.getFirst(p.isParserWidgetElement))&&P.push([V]),!1;if("data-widget"in V.attributes)return P.push([V]),!1;if(le=M.length){if(V.attributes["data-cke-widget-upcasted"])return!1;for(re=0,J=W.length;re<J;++re)if(!1===W[re](V))return;for(re=0;re<le;++re)if(ie={},ne=(J=M[re])[0](V,ie))return ne instanceof CKEDITOR.htmlParser.element&&(V=ne),V.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(ie)),V.attributes["data-cke-widget-upcasted"]=1,P.push([V,J[1]]),!1}}}}(D);for(V.data.dataValue.forEach(J.iterator,CKEDITOR.NODE_ELEMENT,!0);ne=J.toBeWrapped.pop();){var ie=ne[0],re=ie.parent;re.type==CKEDITOR.NODE_ELEMENT&&re.attributes["data-cke-widget-wrapper"]&&re.replaceWith(ie),D.wrapElement(ne[0],ne[1])}M=V.data.protectedWhitespaces?3==V.data.dataValue.children.length&&p.isParserWidgetWrapper(V.data.dataValue.children[1]):1==V.data.dataValue.children.length&&p.isParserWidgetWrapper(V.data.dataValue.children[0])},null,null,8),P.on("dataReady",function(){if(W)for(var J,ne,V=P.editable().find(".cke_widget_wrapper"),ie=0,re=V.count();ie<re;++ie)(ne=(J=V.getItem(ie)).getFirst(p.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&ne.data("widget")?(ne.replace(J),D.wrapElement(ne)):J.remove();W=0,D.destroyAll(!0),D.initOnAll()}),P.on("loadSnapshot",function(V){/data-cke-widget/.test(V.data)&&(W=1),D.destroyAll(!0)},null,null,9),P.on("paste",function(V){(V=V.data).dataValue=V.dataValue.replace(oe,K),V.range&&(V=p.getNestedEditable(P.editable(),V.range.startContainer))&&(V=CKEDITOR.filter.instances[V.data("cke-filter")])&&P.setActiveFilter(V)}),P.on("afterInsertHtml",function(V){V.data.intoRange?D.checkWidgets({initOnlyNew:!0}):(P.fire("lockSnapshot"),D.checkWidgets({initOnlyNew:!0,focusInited:M}),P.fire("unlockSnapshot"))})}(this),function _(D){var P=D.editor,M={};P.on("toDataFormat",function(W){var V=CKEDITOR.tools.getNextNumber(),J=[];W.data.downcastingSessionId=V,M[V]=J,W.data.dataValue.forEach(function(ne){var re,ie=ne.attributes;if("data-cke-widget-white-space"in ie){re=n(ne);var le=i(ne);re.parent.attributes["data-cke-white-space-first"]&&(re.value=re.value.replace(/^&nbsp;/g," ")),le.parent.attributes["data-cke-white-space-last"]&&(le.value=le.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in ie)(ie=D.instances[ie["data-cke-widget-id"]])&&(re=ne.getFirst(p.isParserWidgetElement),J.push({wrapper:ne,element:re,widget:ie,editables:{}}),re&&"1"!=re.attributes["data-cke-widget-keep-attr"]&&delete re.attributes["data-widget"]);else if("data-cke-widget-editable"in ie)return 0<J.length&&(J[J.length-1].editables[ie["data-cke-widget-editable"]]=ne),!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),P.on("toDataFormat",function(W){if(W.data.downcastingSessionId)for(var J,ne,ie,re,le,ae,V=M[W.data.downcastingSessionId];J=V.shift();){for(ae in ne=J.widget,ie=J.element,re=ne._.downcastFn&&ne._.downcastFn.call(ne,ie),W.data.widgetsCopy&&ne.getClipboardHtml&&(re=(re=CKEDITOR.htmlParser.fragment.fromHtml(ne.getClipboardHtml())).children[0]),J.editables)delete(le=J.editables[ae]).attributes.contenteditable,le.setHtml(ne.editables[ae].getData());re||(re=ie),re?J.wrapper.replaceWith(re):J.wrapper.remove()}},null,null,13),P.on("contentDomUnload",function(){D.destroyAll(!0)})}(this),this.on("checkWidgets",f),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function j(D){function P(){var J=V.getSelection();if(J&&(J=J.getRanges()[0])&&!J.collapsed){var ne=M(J.startContainer),ie=M(J.endContainer);!ne&&ie?(J.setEndBefore(ie.wrapper),J.select()):ne&&!ie&&(J.setStartAfter(ne.wrapper),J.select())}}function M(J){return J?J.type==CKEDITOR.NODE_TEXT?M(J.getParent()):V.widgets.getByElement(J):null}function W(){D.fire("checkSelection")}var V=D.editor;V.on("selectionCheck",W),V.on("contentDom",function(){V.editable().attachListener(V,"key",function(){setTimeout(W,10)})}),CKEDITOR.env.ie||D.on("checkSelection",P),D.on("checkSelection",D.checkSelection,D),V.on("selectionChange",function(J){var ne=(J=p.getNestedEditable(V.editable(),J.data.selection.getStartElement()))&&D.getByElement(J),ie=D.widgetHoldingFocusedEditable;ie?ie===ne&&ie.focusedEditable.equals(J)||(h(D,ie,null),ne&&J&&h(D,ne,J)):ne&&J&&h(D,ne,J)}),V.on("dataReady",function(){x(D).commit()}),V.on("blur",function(){var J;(J=D.focused)&&c(D,J),(J=D.widgetHoldingFocusedEditable)&&h(D,J,null)})}(this),function v(D){var P=D.editor;P.on("contentDom",function(){var V,J,M=P.editable(),W=M.isInline()?M:P.document;M.attachListener(W,"mousedown",function(ne){var ie=ne.data.getTarget();V=ie instanceof CKEDITOR.dom.element?D.getByElement(ie):null,J=0,V&&(V.inline&&ie.type==CKEDITOR.NODE_ELEMENT&&ie.hasAttribute("data-cke-widget-drag-handler")?(J=1,D.focused!=V&&P.getSelection().removeAllRanges()):p.getNestedEditable(V.wrapper,ie)?V=null:(ne.data.preventDefault(),CKEDITOR.env.ie||V.focus()))}),M.attachListener(W,"mouseup",function(){J&&V&&V.wrapper&&(J=0,V.focus())}),CKEDITOR.env.ie&&M.attachListener(W,"mouseup",function(){setTimeout(function(){V&&V.wrapper&&M.contains(V.wrapper)&&(V.focus(),V=null)})})}),P.on("doubleclick",function(M){var W=D.getByElement(M.data.element);if(W&&!p.getNestedEditable(W.wrapper,M.data.element))return W.fire("doubleclick",{element:M.data.element})},null,null,1)}(this),function N(D){D.editor.on("key",function(P){var V,M=D.focused,W=D.widgetHoldingFocusedEditable;return M?V=M.fire("key",{keyCode:P.data.keyCode}):W&&(M=P.data.keyCode,P=W.focusedEditable,M==CKEDITOR.CTRL+65?(M=P.getBogus(),(W=W.editor.createRange()).selectNodeContents(P),M&&W.setEndAt(M,CKEDITOR.POSITION_BEFORE_START),W.select(),V=!1):8==M||46==M?(V=W.editor.getSelection().getRanges(),W=V[0],V=!(1==V.length&&W.collapsed&&W.checkBoundaryOfElement(P,CKEDITOR[8==M?"START":"END"]))):V=void 0),V},null,null,1)}(this),function A(D){var P=D.editor,M=CKEDITOR.plugins.lineutils;P.on("dragstart",function(W){var V=W.data.target;p.isDomDragHandler(V)&&(V=D.getByElement(V),W.data.dataTransfer.setData("cke/widget-id",V.id),P.focus(),V.focus())}),P.on("drop",function(W){function V(le,ae){return!(!le||!ae)&&(le.wrapper.equals(ae.wrapper)||le.wrapper.contains(ae.wrapper))}var le,J=(ie=W.data.dataTransfer).getData("cke/widget-id"),ne=ie.getTransferType(P),ie=P.createRange(),re=((le=(le=W.data.dropRange).getBoundaryNodes().startNode).type!==CKEDITOR.NODE_ELEMENT&&(le=le.getParent()),P.widgets.getByElement(le));""!==J&&ne===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?W.cancel():ne==CKEDITOR.DATA_TRANSFER_INTERNAL&&(""===J&&0<P.widgets.selected.length?W.data.dataTransfer.setData("text/html",m(P)):(J=D.instances[J])&&(V(J,re)?W.cancel():(ie.setStartBefore(J.wrapper),ie.setEndAfter(J.wrapper),W.data.dragRange=ie,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,W.data.dataTransfer.setData("text/html",J.getClipboardHtml()),P.widgets.destroy(J,!0))))}),P.on("contentDom",function(){var W=P.editable();CKEDITOR.tools.extend(D,{finder:new M.finder(P,{lookups:{default:function(V){if(!V.is(CKEDITOR.dtd.$listItem)&&V.is(CKEDITOR.dtd.$block)&&!p.isDomNestedEditable(V)&&!D._.draggedWidget.wrapper.contains(V)){var J=p.getNestedEditable(W,V);return J&&(V=D._.draggedWidget,D.getByElement(J)==V||(J=CKEDITOR.filter.instances[J.data("cke-filter")],V=V.requiredContent,J&&V&&!J.check(V)))?void 0:CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new M.locator(P),liner:new M.liner(P,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}(this),function B(D){function P(W){1>D.selected.length||$(M,"cut"===W.name)}var M=D.editor;M.on("contentDom",function(){var W=M.editable();W.attachListener(W,"copy",P),W.attachListener(W,"cut",P)})}(this)}function p(D,P,M,W,V){var J=D.editor;CKEDITOR.tools.extend(this,W,{editor:J,id:P,inline:"span"==M.getParent().getName(),element:M,data:CKEDITOR.tools.extend({},"function"==typeof W.defaults?W.defaults():W.defaults),dataReady:!1,inited:!1,ready:!1,edit:p.prototype.edit,focusedEditable:null,definition:W,repository:D,draggable:!1!==W.draggable,_:{downcastFn:W.downcast&&"string"==typeof W.downcast?W.downcasts[W.downcast]:W.downcast}},!0),D.fire("instanceCreated",this),function y(D,P){var M=D.editor.config.widget_keystrokeInsertLineBefore,W=D.editor.config.widget_keystrokeInsertLineAfter;(function g(D){(D.wrapper=D.element.getParent()).setAttribute("data-cke-widget-id",D.id)})(D),k(D),function b(D){var M,W,P=D.editables;if(D.editables={},D.editables)for(M in P)W=P[M],D.initEditable(M,"string"==typeof W?{selector:W}:W)}(D),L(D),function z(D){if(D.draggable){var W,P=D.editor,M=D.wrapper.getLast(p.isDomDragHandlerContainer);M?W=M.findOne("img"):((M=new CKEDITOR.dom.element("span",P.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+P.plugins.widget.path+"images/handle.png);display:none;"}),(W=new CKEDITOR.dom.element("img",P.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:P.lang.widget.move,height:15,role:"presentation"}),D.inline&&W.setAttribute("draggable","true"),M.append(W),D.wrapper.append(M)),D.wrapper.on("dragover",function(V){V.data.preventDefault()}),D.wrapper.on("mouseenter",D.updateDragHandlerPosition,D),setTimeout(function(){D.on("data",D.updateDragHandlerPosition,D)},50),!D.inline&&(W.on("mousedown",X,D),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&W.on("dragstart",function(V){V.data.preventDefault(!0)}),D.dragHandlerContainer=M}}(D),function Z(D){var P=null;D.on("data",function(){var W,M=this.data.classes;if(P!=M){for(W in P)M&&M[W]||this.removeClass(W);for(W in M)this.addClass(W);P=M}})}(D),function Y(D){D.on("data",function(){if(D.wrapper){var P=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());D.wrapper.setAttribute("role","region"),D.wrapper.setAttribute("aria-label",P)}},null,null,9999)}(D),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&D.wrapper.on("dragstart",function(V){var J=V.data.getTarget();p.getNestedEditable(D,J)||D.inline&&p.isDomDragHandler(J)||V.data.preventDefault()}),D.wrapper.removeClass("cke_widget_new"),D.element.addClass("cke_widget_element"),D.on("key",function(V){if((V=V.data.keyCode)==M)U(D,"before"),D.editor.fire("saveSnapshot");else if(V==W)U(D,"after"),D.editor.fire("saveSnapshot");else if(13==V)D.edit();else{if(V==CKEDITOR.CTRL+67||V==CKEDITOR.CTRL+88)return void $(D.editor,V==CKEDITOR.CTRL+88);if(V in se||CKEDITOR.CTRL&V||CKEDITOR.ALT&V)return}return!1},null,null,999),D.on("doubleclick",function(V){D.edit()&&V.cancel()}),P.data&&D.on("data",P.data),P.edit&&D.on("edit",P.edit)}(this,W),this.init&&this.init(),this.inited=!0,(D=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(D))),V&&this.setData(V),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,Q(this),this.fire("data",this.data),this.isInited()&&J.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function u(D,P,M){CKEDITOR.dom.element.call(this,P.$),this.editor=D,this._={},P=this.filter=M.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=P?P.getAllowedEnterMode(D.enterMode):D.enterMode,this.shiftEnterMode=P?P.getAllowedEnterMode(D.shiftEnterMode,!0):D.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function c(D,P){if(D.focused=null,P.isInited()){var M=P.editor.checkDirty();D.fire("widgetBlurred",{widget:P}),P.setFocused(!1),!M&&P.editor.resetDirty()}}function f(D){if(D=D.data,"wysiwyg"==this.editor.mode){var W,V,J,ne,P=this.editor.editable(),M=this.instances;if(P){for(W in M)M[W].isReady()&&!P.contains(M[W].wrapper)&&this.destroy(M[W],!0);if(D&&D.initOnlyNew)M=this.initOnAll();else{var ie=P.find(".cke_widget_wrapper");M=[];for(W=0,V=ie.count();W<V;W++){if(J=ie.getItem(W),ne=!this.getByElement(J,!0)){e:{ne=T;for(var re=J;re=re.getParent();)if(ne(re)){ne=!0;break e}ne=!1}ne=!ne}ne&&P.contains(J)&&(J.addClass("cke_widget_new"),M.push(this.initOn(J.getFirst(p.isDomWidgetElement))))}}D&&D.focusInited&&1==M.length&&M[0].focus()}}}function l(D){if(typeof D.attributes<"u"&&D.attributes["data-widget"]){var P=n(D),M=i(D),W=!1;P&&P.value&&P.value.match(/^\s/g)&&(P.parent.attributes["data-cke-white-space-first"]=1,P.value=P.value.replace(/^\s/g,"&nbsp;"),W=!0),M&&M.value&&M.value.match(/\s$/g)&&(M.parent.attributes["data-cke-white-space-last"]=1,M.value=M.value.replace(/\s$/g,"&nbsp;"),W=!0),W&&(D.attributes["data-cke-widget-white-space"]=1)}}function n(D){return D.find(function(P){return 3===P.type},!0).shift()}function i(D){return D.find(function(P){return 3===P.type},!0).pop()}function e(D,P,M){if(!M.allowedContent&&!M.disallowedContent)return null;var W=this._.filters[D];return W||(this._.filters[D]=W={}),(D=W[P])||(D=M.allowedContent?new CKEDITOR.filter(M.allowedContent):this.editor.filter.clone(),W[P]=D,M.disallowedContent&&D.disallow(M.disallowedContent)),D}function o(D,P){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(D?"inline":"block")+(P?" cke_widget_"+P:"")}}function d(D,P,M){if(D.type==CKEDITOR.NODE_ELEMENT&&((W=CKEDITOR.dtd[D.name])&&!W[M.name])){var W=D.split(P),V=D.parent;return P=W.getIndex(),D.children.length||(--P,D.remove()),W.children.length||W.remove(),d(V,P,M)}D.add(M,P)}function E(D,P){return"boolean"==typeof D.inline?D.inline:!!CKEDITOR.dtd.$inline[P]}function T(D){return D.hasAttribute("data-cke-temp")}function h(D,P,M,W){var V=D.editor;V.fire("lockSnapshot"),M?(W=M.data("cke-widget-editable"),W=P.editables[W],D.widgetHoldingFocusedEditable=P,P.focusedEditable=W,M.addClass("cke_widget_editable_focused"),W.filter&&V.setActiveFilter(W.filter),V.setActiveEnterMode(W.enterMode,W.shiftEnterMode)):(W||P.focusedEditable.removeClass("cke_widget_editable_focused"),P.focusedEditable=null,D.widgetHoldingFocusedEditable=null,V.setActiveFilter(null),V.setActiveEnterMode(null,null)),V.fire("unlockSnapshot")}function K(D,P){return CKEDITOR.tools.trim(P)}function x(D){var P=D.selected,M=[],W=P.slice(0),V=null;return{select:function(J){return 0>CKEDITOR.tools.indexOf(P,J)&&M.push(J),0<=(J=CKEDITOR.tools.indexOf(W,J))&&W.splice(J,1),this},focus:function(J){return V=J,this},commit:function(){var ne,ie,J=D.focused!==V;for(D.editor.fire("lockSnapshot"),J&&(ne=D.focused)&&c(D,ne);ne=W.pop();)P.splice(CKEDITOR.tools.indexOf(P,ne),1),ne.isInited()&&(ie=ne.editor.checkDirty(),ne.setSelected(!1),!ie&&ne.editor.resetDirty());for(J&&V&&(ie=D.editor.checkDirty(),D.focused=V,D.fire("widgetFocused",{widget:V}),V.setFocused(!0),!ie&&D.editor.resetDirty());ne=M.pop();)P.push(ne),ne.setSelected(!0);D.editor.fire("unlockSnapshot")}}}function I(D,P,M){var W=0;P=S(P);var J,V=D.data.classes||{};if(P){for(V=CKEDITOR.tools.clone(V);J=P.pop();)M?V[J]||(W=V[J]=1):V[J]&&(delete V[J],W=1);W&&D.setData("classes",V)}}function w(D){D.cancel()}function U(D,P){var V,M=(V=D.editor.config.enterMode)==CKEDITOR.ENTER_BR?"br":V==CKEDITOR.ENTER_DIV?"div":"p",W=new CKEDITOR.dom.element(M);"br"!==M&&W.appendBogus(),"after"===P?W.insertAfter(D.wrapper):W.insertBefore(D.wrapper),function(V){var J=D.editor.createRange();J.setStart(V,0),D.editor.getSelection().selectRanges([J])}(W)}function $(D,P){var W,V,J,M=D.widgets.focused;ee.hasCopyBin(D)||(V=new ee(D,{beforeDestroy:function(){!P&&M&&M.focus(),J&&D.getSelection().selectBookmarks(J),W&&CKEDITOR.plugins.widgetselection.addFillers(D.editable())},afterDestroy:function(){P&&!D.readOnly&&(M?D.widgets.del(M):D.extractSelectedHtml(),D.fire("saveSnapshot"))}}),M||(W=CKEDITOR.env.webkit&&CKEDITOR.plugins.widgetselection.isWholeContentSelected(D.editable()),J=D.getSelection().createBookmarks(!0)),V.handle(m(D)))}function S(D){return(D=(D=D.getDefinition().attributes)&&D.class)?D.split(/\s+/):null}function q(){var D=CKEDITOR.document.getActive(),P=this.editor,M=P.editable();(M.isInline()?M:P.document.getWindow().getFrame()).equals(D)&&P.focusManager.focus(M)}function C(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function m(D){var P=D.getSelectedHtml(!0);return D.widgets.focused?D.widgets.focused.getClipboardHtml():(D.once("toDataFormat",function(M){M.data.widgetsCopy=!0},null,null,-1),D.dataProcessor.toDataFormat(P))}function k(D,P){if(D.partSelectors||(D.partSelectors=D.parts),D.parts){var W,V,M={};for(V in D.partSelectors)P||!D.parts[V]||"string"==typeof D.parts[V]?(W=D.wrapper.findOne(D.partSelectors[V]),M[V]=W):M[V]=D.parts[V];D.parts=M}}function L(D){if(!0===D.mask)!function H(D){var P=D.wrapper.findOne(".cke_widget_mask");P||((P=new CKEDITOR.dom.element("img",D.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),D.wrapper.append(P)),D.mask=P}(D);else if(D.mask){var W,V,P=new CKEDITOR.tools.buffers.throttle(250,G,D),M=CKEDITOR.env.gecko?300:0;if(D.on("focus",function(){P.input(),W=D.editor.on("change",P.input),V=D.on("blur",function(){W.removeListener(),V.removeListener()})}),D.editor.on("instanceReady",function(){setTimeout(function(){P.input()},M)}),D.editor.on("mode",function(){setTimeout(function(){P.input()},M)}),CKEDITOR.env.gecko){var J=D.element.find("img");CKEDITOR.tools.array.forEach(J.toArray(),function(ie){ie.on("load",function(){P.input()})})}for(var ne in D.editables)D.editables[ne].on("focus",function(){D.editor.on("change",P.input),V&&V.removeListener()}),D.editables[ne].on("blur",function(){D.editor.removeListener("change",P.input)});P.input()}}function G(){if(this.wrapper){this.maskPart=this.maskPart||this.mask;var P,D=this.parts[this.maskPart];if(D&&"string"!=typeof D){(P=this.wrapper.findOne(".cke_widget_partial_mask"))||((P=new CKEDITOR.dom.element("img",this.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_partial_mask"}),this.wrapper.append(P)),this.mask=P;var M=P.$,W=D.$,V=!(M.offsetTop==W.offsetTop&&M.offsetLeft==W.offsetLeft);(M.offsetWidth!=W.offsetWidth||M.offsetHeight!=W.offsetHeight||V)&&(M=D.getParent(),W=CKEDITOR.plugins.widget.isDomWidget(M),P.setStyles({top:D.$.offsetTop+(W?0:M.$.offsetTop)+"px",left:D.$.offsetLeft+(W?0:M.$.offsetLeft)+"px",width:D.$.offsetWidth+"px",height:D.$.offsetHeight+"px"}))}}}function X(D){function P(){var ce;for(he.reset();ce=ie.pop();)ce.removeListener();var ue=re;ce=D.sender;var fe=this.repository.finder,pe=this.repository.liner,Ee=this.editor,Te=this.editor.editable();CKEDITOR.tools.isEmpty(pe.visible)||(ue=fe.getRange(ue[0]),this.focus(),Ee.fire("drop",{dropRange:ue,target:ue.startContainer})),Te.removeClass("cke_widget_dragging"),pe.hideVisible(),Ee.fire("dragend",{target:ce})}if(CKEDITOR.tools.getMouseButton(D)===CKEDITOR.MOUSE_BUTTON_LEFT){var le,ae,M=this.repository.finder,W=this.repository.locator,V=this.repository.liner,J=this.editor,ne=J.editable(),ie=[],re=[];this.repository._.draggedWidget=this;var de=M.greedySearch(),he=CKEDITOR.tools.eventsBuffer(50,function(){le=W.locate(de),(re=W.sort(ae,1)).length&&(V.prepare(de,le),V.placeLine(re[0]),V.cleanup())});ne.addClass("cke_widget_dragging"),ie.push(ne.on("mousemove",function(ce){ae=ce.data.$.clientY,he.input()})),J.fire("dragstart",{target:D.sender}),ie.push(J.document.once("mouseup",P,this)),ne.isInline()||ie.push(CKEDITOR.document.once("mouseup",P,this))}}function Q(D){D.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(D.data)))}function te(){function D(){}function P(V,J,ne){return!(!ne||!this.checkElement(V))&&((V=ne.widgets.getByElement(V,!0))&&V.checkStyleActive(this))}function M(V){function J(de,he,ce){for(var ue=de.length,fe=0;fe<ue;){if(he.call(ce,de[fe],fe,de))return de[fe];fe++}}function ne(de){function he(ce,ue){var fe=CKEDITOR.tools.object.keys(ce),pe=CKEDITOR.tools.object.keys(ue);if(fe.length!==pe.length)return!1;for(var Ee in ce)if(("object"!=typeof ce[Ee]||"object"!=typeof ue[Ee]||!he(ce[Ee],ue[Ee]))&&ce[Ee]!==ue[Ee])return!1;return!0}return function(ce){return he(de.getDefinition(),ce.getDefinition())}}var re,ie=V.widget;W[ie]||(W[ie]={});for(var le=0,ae=V.group.length;le<ae;le++)re=V.group[le],W[ie][re]||(W[ie][re]=[]),J(re=W[ie][re],ne(V))||re.push(V)}var W={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(V){this.widget=V.widget,(this.group="string"==typeof V.group?[V.group]:V.group)&&M(this)},apply:function(V){var J;V instanceof CKEDITOR.editor&&this.checkApplicable(V.elementPath(),V)&&(J=V.widgets.focused,this.group&&this.removeStylesFromSameGroup(V),J.applyStyle(this))},remove:function(V){V instanceof CKEDITOR.editor&&this.checkApplicable(V.elementPath(),V)&&V.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(V){var ne,ie,J=!1;if(!(V instanceof CKEDITOR.editor))return!1;if(ie=V.elementPath(),this.checkApplicable(ie,V))for(var re=0,le=this.group.length;re<le;re++){ne=W[this.widget][this.group[re]];for(var ae=0;ae<ne.length;ae++)ne[ae]!==this&&ne[ae].checkActive(ie,V)&&(V.widgets.focused.removeStyle(ne[ae]),J=!0)}return J},checkActive:function(V,J){return this.checkElementMatch(V.lastElement,0,J)},checkApplicable:function(V,J){return J instanceof CKEDITOR.editor&&this.checkElement(V.lastElement)},checkElementMatch:P,checkElementRemovable:P,checkElement:function(V){return!!p.isDomWidgetWrapper(V)&&((V=V.getFirst(p.isDomWidgetElement))&&V.data("widget")==this.widget)},buildPreview:function(V){return V||this._.definition.name},toAllowedContentRules:function(V){if(!V)return null;var J,ne={};return(V=V.widgets.registered[this.widget])?V.styleableElements?(J=this.getClassesArray())?(ne[V.styleableElements]={classes:J,propertiesOnly:!0},ne):null:V.styleToAllowedContentRules?V.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var V=this._.definition.attributes&&this._.definition.attributes.class;return V?CKEDITOR.tools.trim(V).split(/\s+/):null},applyToRange:D,removeFromRange:D,applyToObject:D})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss('.cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:block;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}.cke_editable[contenteditable="false"] .cke_widget_drag_handler_container{display:none;}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_widget_partial_mask{position:absolute;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}'),te())},beforeInit:function(D){void 0!==CKEDITOR.document.$.querySelectorAll&&(D.widgets=new a(D))},afterInit:function(D){if(void 0!==CKEDITOR.document.$.querySelectorAll){var M,W,V,P=D.widgets.registered;for(W in P)(V=(M=P[W]).button)&&D.ui.addButton&&D.ui.addButton(CKEDITOR.tools.capitalize(M.name,!0),{label:V,command:M.name,toolbar:"insert,10"});(function R(D){D.contextMenu&&D.contextMenu.addListener(function(P){if(P=D.widgets.getByElement(P,!0))return P.fire("contextMenu",{})})})(D),function O(D){D&&D.addFilterRule(function(P){return P.replace(/\s*cke_widget_selected/g,"").replace(/\s*cke_widget_focused/g,"")})}(D.undoManager)}}}),a.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(D,P){var M=this.editor;if((P=CKEDITOR.tools.prototypedCopy(P)).name=D,P._=P._||{},M.fire("widgetDefinition",P),P.template&&(P.template=new CKEDITOR.template(P.template)),function r(D,P){D.addCommand(P.name,{exec:function(M,W){function V(){M.widgets.finalizeCreation(re)}if((J=M.widgets.focused)&&J.name==P.name)J.edit();else if(P.insert)P.insert({editor:M,commandData:W});else if(P.template){var ne,J="function"==typeof P.defaults?P.defaults():P.defaults,ie=(J=CKEDITOR.tools.object.merge(J||{},W&&W.startupData||{}),J=CKEDITOR.dom.element.createFromHtml(P.template.output(J),M.document),M.widgets.wrapElement(J,P.name)),re=new CKEDITOR.dom.documentFragment(ie.getDocument());re.append(ie),(ne=M.widgets.initOn(J,P,W&&W.startupData))?(J=ne.once("edit",function(ae){ae.data.dialog?ne.once("dialog",function(de){var he,ce;de=de.data,he=de.once("ok",V,null,null,20),ce=de.once("cancel",function(ue){ue.data&&!1===ue.data.hide||M.widgets.destroy(ne,!0)}),de.once("hide",function(){he.removeListener(),ce.removeListener()})}):V()},null,null,999),ne.edit(),J.removeListener()):V()}},allowedContent:P.allowedContent,requiredContent:P.requiredContent,contentForms:P.contentForms,contentTransformations:P.contentTransformations})}(M,P),function s(D,P){var V=P.upcast,J=P.upcastPriority||10;V&&function W(ne,ie,re){var le=CKEDITOR.tools.getIndex(D._.upcasts,function(ae){return ae[2]>re});0>le&&(le=D._.upcasts.length),D._.upcasts.splice(le,0,[CKEDITOR.tools.bind(ne,ie),ie.name,re])}("string"==typeof V?function M(ne,ie){var le,ae,re=P.upcast.split(",");for(ae=0;ae<re.length;ae++)if((le=re[ae])===ne.name)return P.upcasts[le].call(this,ne,ie);return!1}:V,P,J)}(this,P),this.registered[D]=P,P.dialog&&M.plugins.dialog)var W=CKEDITOR.on("dialogDefinition",function(V){var J=(V=V.data.definition).dialog;V.getMode||J.getName()!==P.dialog||(V.getMode=function(){var ne=J.getModel(M);return ne&&ne instanceof CKEDITOR.plugins.widget&&ne.ready?CKEDITOR.dialog.EDITING_MODE:CKEDITOR.dialog.CREATION_MODE}),W.removeListener()});return P},addUpcastCallback:function(D){this._.upcastCallbacks.push(D)},checkSelection:function(){if(this.editor.getSelection()){var W,D=this.editor.getSelection(),P=D.getSelectedElement(),M=x(this);if(P&&(W=this.getByElement(P,!0)))return M.focus(W).select(W).commit();if(!(D=D.getRanges()[0])||D.collapsed)return M.commit();for((D=new CKEDITOR.dom.walker(D)).evaluator=p.isDomWidgetWrapper;P=D.next();)M.select(this.getByElement(P));M.commit()}},checkWidgets:function(D){this.fire("checkWidgets",CKEDITOR.tools.copy(D||{}))},del:function(D){if(this.focused===D){var W,P=D.editor,M=P.createRange();(W=M.moveToClosestEditablePosition(D.wrapper,!0))||(W=M.moveToClosestEditablePosition(D.wrapper,!1)),W&&P.getSelection().selectRanges([M])}D.wrapper.remove(),this.destroy(D,!0)},destroy:function(D,P){this.widgetHoldingFocusedEditable===D&&h(this,D,null,P),D.destroy(P),delete this.instances[D.id],this.fire("instanceDestroyed",D)},destroyAll:function(D,P){var M,W,V=this.instances;if(P&&!D){V=(W=P.find(".cke_widget_wrapper")).count();for(var J=0;J<V;++J)(M=this.getByElement(W.getItem(J),!0))&&this.destroy(M)}else for(W in V)M=V[W],this.destroy(M,D)},finalizeCreation:function(D){(D=D.getFirst())&&p.isDomWidgetWrapper(D)&&(this.editor.insertElement(D),(D=this.getByElement(D)).ready=!0,D.fire("ready"),D.focus())},getByElement:function(){function D(M){return M.is(P)&&M.data("cke-widget-id")}var P={div:1,span:1};return function(M,W){if(!M)return null;var V=D(M);if(!W&&!V){var J=this.editor.editable();do{M=M.getParent()}while(M&&!M.equals(J)&&!(V=D(M)))}return this.instances[V]||null}}(),initOn:function(D,P,M){if(P?"string"==typeof P&&(P=this.registered[P]):P=this.registered[D.data("widget")],!P)return null;var W=this.wrapElement(D,P.name);return W?W.hasClass("cke_widget_new")?(D=new p(this,this._.nextId++,D,P,M)).isInited()?this.instances[D.id]=D:null:this.getByElement(D):null},initOnAll:function(D){for(var M,P=[],W=(D=(D||this.editor.editable()).find(".cke_widget_new")).count();W--;)(M=this.initOn(D.getItem(W).getFirst(p.isDomWidgetElement)))&&P.push(M);return P},onWidget:function(D){var P=Array.prototype.slice.call(arguments);for(var M in P.shift(),this.instances){var W=this.instances[M];W.name==D&&W.on.apply(W,P)}this.on("instanceCreated",function(V){(V=V.data).name==D&&V.on.apply(V,P)})},parseElementClasses:function(D){if(!D)return null;D=CKEDITOR.tools.trim(D).split(/\s+/);for(var P,M={},W=0;P=D.pop();)-1==P.indexOf("cke_")&&(M[P]=W=1);return W?M:null},wrapElement:function(D,P){var W,V,M=null;if(D instanceof CKEDITOR.dom.element){if(P=P||D.data("widget"),!(W=this.registered[P]))return null;if((M=D.getParent())&&M.type==CKEDITOR.NODE_ELEMENT&&M.data("cke-widget-wrapper"))return M;D.hasAttribute("data-cke-widget-keep-attr")||D.data("cke-widget-keep-attr",D.data("widget")?1:0),D.data("widget",P),(V=E(W,D.getName()))&&l(D),(M=new CKEDITOR.dom.element(V?"span":"div",D.getDocument())).setAttributes(o(V,P)),M.data("cke-display-name",W.pathName?W.pathName:D.getName()),D.getParent(!0)&&M.replace(D),D.appendTo(M)}else if(D instanceof CKEDITOR.htmlParser.element){if(P=P||D.attributes["data-widget"],!(W=this.registered[P]))return null;if((M=D.parent)&&M.type==CKEDITOR.NODE_ELEMENT&&M.attributes["data-cke-widget-wrapper"])return M;var J;"data-cke-widget-keep-attr"in D.attributes||(D.attributes["data-cke-widget-keep-attr"]=D.attributes["data-widget"]?1:0),P&&(D.attributes["data-widget"]=P),(V=E(W,D.name))&&l(D),(M=new CKEDITOR.htmlParser.element(V?"span":"div",o(V,P))).attributes["data-cke-display-name"]=W.pathName?W.pathName:D.name,(W=D.parent)&&(J=D.getIndex(),D.remove()),M.add(D),W&&d(W,J,M)}return M},_tests_createEditableFilter:e},CKEDITOR.event.implementOn(a.prototype),p.prototype={addClass:function(D){this.element.addClass(D),this.wrapper.addClass(p.WRAPPER_CLASS_PREFIX+D)},applyStyle:function(D){I(this,D,1)},checkStyleActive:function(D){var P;if(!(D=S(D)))return!1;for(;P=D.pop();)if(!this.hasClass(P))return!1;return!0},destroy:function(D){if(this.fire("destroy"),this.editables)for(var P in this.editables)this.destroyEditable(P,D);D||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(D,P){var M=this.editables[D],W=!0;if(M.removeListener("focus",C),M.removeListener("blur",q),this.editor.focusManager.remove(M),M.filter){for(var V in this.repository.instances){var J=this.repository.instances[V];J.editables&&(J=J.editables[D])&&J!==M&&M.filter===J.filter&&(W=!1)}W&&(M.filter.destroy(),(W=this.repository._.filters[this.name])&&delete W[D])}P||(this.repository.destroyAll(!1,M),M.removeClass("cke_widget_editable"),M.removeClass("cke_widget_editable_focused"),M.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[D]},edit:function(){var D={dialog:this.dialog},P=this;return!(!1===this.fire("edit",D)||!D.dialog)&&(this.editor.openDialog(D.dialog,function(M){var W,V;!1!==P.fire("dialog",M)&&(W=M.on("show",function(){M.setupContent(P)}),V=M.on("ok",function(){var J,ne=P.on("data",function(ie){J=1,ie.cancel()},null,null,0);P.editor.fire("saveSnapshot"),M.commitContent(P),ne.removeListener(),J&&(P.fire("data",P.data),P.editor.fire("saveSnapshot"))}),M.once("hide",function(){W.removeListener(),V.removeListener()}))},P),!0)},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},getClipboardHtml:function(){var D=this.editor.createRange();return D.setStartBefore(this.wrapper),D.setEndAfter(this.wrapper),this.editor.editable().getHtmlFromRange(D).getHtml()},hasClass:function(D){return this.element.hasClass(D)},initEditable:function(D,P){var M=this._findOneNotNested(P.selector);return!(!M||!M.is(CKEDITOR.dtd.$editable))&&(M=new u(this.editor,M,{filter:e.call(this.repository,this.name,D,P)}),this.editables[D]=M,M.setAttributes({contenteditable:"true","data-cke-widget-editable":D,"data-cke-enter-mode":M.enterMode}),M.filter&&M.data("cke-filter",M.filter.id),M.addClass("cke_widget_editable"),M.removeClass("cke_widget_editable_focused"),P.pathName&&M.data("cke-display-name",P.pathName),this.editor.focusManager.add(M),M.on("focus",C,this),CKEDITOR.env.ie&&M.on("blur",q,this),M._.initialSetData=!0,M.setData(M.getHtml()),!0)},_findOneNotNested:function(D){D=this.wrapper.find(D);for(var P,M,W=0;W<D.count();W++)if(M=(P=D.getItem(W)).getAscendant(p.isDomWidgetWrapper),this.wrapper.equals(M))return P;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var D=this.editor.getSelection();if(D){var P=this.editor.checkDirty();D.fake(this.wrapper),!P&&this.editor.resetDirty()}this.editor.focus()},refreshMask:function(){L(this)},refreshParts:function(D){k(this,!(typeof D<"u")||D)},removeClass:function(D){this.element.removeClass(D),this.wrapper.removeClass(p.WRAPPER_CLASS_PREFIX+D)},removeStyle:function(D){I(this,D,0)},setData:function(D,P){var M=this.data,W=0;if("string"==typeof D)M[D]!==P&&(M[D]=P,W=1);else{var V=D;for(D in V)M[D]!==V[D]&&(W=1,M[D]=V[D])}return W&&this.dataReady&&(Q(this),this.fire("data",M)),this},setFocused:function(D){return this.wrapper[D?"addClass":"removeClass"]("cke_widget_focused"),this.fire(D?"focus":"blur"),this},setSelected:function(D){return this.wrapper[D?"addClass":"removeClass"]("cke_widget_selected"),this.fire(D?"select":"deselect"),this},updateDragHandlerPosition:function(){var D=this.editor,M=this.element.$,P=this._.dragHandlerOffset;M={x:M.offsetLeft,y:M.offsetTop-15};P&&M.x==P.x&&M.y==P.y||(P=D.checkDirty(),D.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:M.y+"px",left:M.x+"px"}),this.dragHandlerContainer.removeStyle("display"),D.fire("unlockSnapshot"),!P&&D.resetDirty(),this._.dragHandlerOffset=M)}},CKEDITOR.event.implementOn(p.prototype),p.getNestedEditable=function(D,P){return!P||P.equals(D)?null:p.isDomNestedEditable(P)?P:p.getNestedEditable(D,P.getParent())},p.isDomDragHandler=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&D.hasAttribute("data-cke-widget-drag-handler")},p.isDomDragHandlerContainer=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&D.hasClass("cke_widget_drag_handler_container")},p.isDomNestedEditable=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&D.hasAttribute("data-cke-widget-editable")},p.isDomWidgetElement=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&D.hasAttribute("data-widget")},p.isDomWidgetWrapper=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&D.hasAttribute("data-cke-widget-wrapper")},p.isDomWidget=function(D){return!!D&&(this.isDomWidgetWrapper(D)||this.isDomWidgetElement(D))},p.isParserWidgetElement=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&!!D.attributes["data-widget"]},p.isParserWidgetWrapper=function(D){return D.type==CKEDITOR.NODE_ELEMENT&&!!D.attributes["data-cke-widget-wrapper"]},p.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",u.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(D){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,D=this.editor.dataProcessor.unprotectRealComments(D),D=this.editor.dataProcessor.unprotectSource(D),D=this.editor.dataProcessor.toHtml(D,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(D),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var oe=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,se={37:1,38:1,39:1,40:1,8:1,46:1};se[CKEDITOR.SHIFT+121]=1;var ee=CKEDITOR.tools.createClass({$:function(D,P){this._.createCopyBin(D,P),this._.createListeners(P)},_:{createCopyBin:function(D){var W=D.document,M=CKEDITOR.env.edge&&16<=CKEDITOR.env.version,P=!D.blockless&&!CKEDITOR.env.ie||M?"div":"span";M=W.createElement(P);(W=W.createElement(P)).setAttributes({id:"cke_copybin","data-cke-temp":"1"}),M.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),M.setStyle("ltr"==D.config.contentsLangDirection?"left":"right","-5000px"),this.editor=D,this.copyBin=M,this.container=W},createListeners:function(D){D&&(D.beforeDestroy&&(this.beforeDestroy=D.beforeDestroy),D.afterDestroy&&(this.afterDestroy=D.afterDestroy))}},proto:{handle:function(D){var de,he,ce,P=this.copyBin,M=this.editor,W=this.container,V=CKEDITOR.env.ie&&9>CKEDITOR.env.version,J=M.document.getDocumentElement().$,ne=M.createRange(),ie=this,re=CKEDITOR.env.mac&&CKEDITOR.env.webkit,le=re?100:0,ae=window.requestAnimationFrame&&!re?requestAnimationFrame:setTimeout;return P.setHtml('<span data-cke-copybin-start="1">\u200b</span>'+D+'<span data-cke-copybin-end="1">\u200b</span>'),M.fire("lockSnapshot"),W.append(P),M.editable().append(W),de=M.on("selectionChange",w,null,null,0),he=M.widgets.on("checkSelection",w,null,null,0),V&&(ce=J.scrollTop),ne.selectNodeContents(P),ne.select(),V&&(J.scrollTop=ce),new CKEDITOR.tools.promise(function(ue){ae(function(){ie.beforeDestroy&&ie.beforeDestroy(),W.remove(),de.removeListener(),he.removeListener(),M.fire("unlockSnapshot"),ie.afterDestroy&&ie.afterDestroy(),ue()},le)})}},statics:{hasCopyBin:function(D){return!!ee.getCopyBin(D)},getCopyBin:function(D){return D.document.getById("cke_copybin")}}});CKEDITOR.plugins.widget=p,p.repository=a,p.nestedEditable=u}(),CKEDITOR.config.widget_keystrokeInsertLineBefore=CKEDITOR.SHIFT+CKEDITOR.ALT+13,CKEDITOR.config.widget_keystrokeInsertLineAfter=CKEDITOR.SHIFT+13,function(){function a(s){function c(t){var o=!1;e.attachListener(e,"keydown",function(){var d=l.getBody().getElementsByTag(t);if(!o){for(var E=0;E<d.count();E++)d.getItem(E).setCustomData("retain",!0);o=!0}},null,null,1),e.attachListener(e,"keyup",function(){var d=l.getElementsByTag(t);o&&(1==d.count()&&!d.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(d.getItem(0).getAttributes())&&d.getItem(0).remove(1),o=!1)})}var f=this.editor;if(f&&!f.isDetached()){var l=s.document,n=l.body,i=l.getElementById("cke_actscrpt");i&&i.parentNode.removeChild(i),(i=l.getElementById("cke_shimscrpt"))&&i.parentNode.removeChild(i),(i=l.getElementById("cke_basetagscrpt"))&&i.parentNode.removeChild(i),n.contentEditable=!0,CKEDITOR.env.ie&&(n.hideFocus=!0,n.disabled=!0,n.removeAttribute("disabled")),delete this._.isLoadingData,this.$=n,l=new CKEDITOR.dom.document(l),this.setup(),this.fixInitialSelection();var e=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&l.getDocumentElement().addClass(l.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&f.enterMode!=CKEDITOR.ENTER_P?c("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&f.enterMode!=CKEDITOR.ENTER_DIV&&c("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&l.getDocumentElement().on("mousedown",function(t){t.data.getTarget().is("html")&&setTimeout(function(){f.editable().focus()})}),function p(s){function c(){var n;s.editable().attachListener(s,"selectionChange",function(){var i=s.getSelection().getSelectedElement();i&&(n&&(n.detachEvent("onresizestart",f),n=null),i.$.attachEvent("onresizestart",f),n=i.$)})}function f(n){n.returnValue=!1}if(CKEDITOR.env.gecko)try{var l=s.document.$;l.execCommand("enableObjectResizing",!1,!s.config.disableObjectResizing),l.execCommand("enableInlineTableEditing",!1,!s.config.disableNativeTableHandles)}catch{}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&s.config.disableObjectResizing&&c()}(f);try{f.document.$.execCommand("2D-position",!1,!0)}catch{}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==f.document.$.compatMode)&&this.attachListener(this,"keydown",function(t){var o=t.data.getKeystroke();if(33==o||34==o)if(CKEDITOR.env.ie)setTimeout(function(){f.getSelection().scrollIntoView()},0);else if(f.window.$.innerHeight>this.$.offsetHeight){var d=f.createRange();d[33==o?"moveToElementEditStart":"moveToElementEditEnd"](this),d.select(),t.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(l,"blur",function(){try{l.$.selection.empty()}catch{}}),CKEDITOR.env.iOS&&this.attachListener(l,"touchend",function(){s.focus()}),(n=f.document.getElementsByTag("title").getItem(0)).data("cke-title",n.getText()),CKEDITOR.env.ie&&(f.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),f.fire("contentDom"),this._.isPendingFocus&&(f.focus(),this._.isPendingFocus=!1),setTimeout(function(){f.fire("dataReady")},0)},0,this)}}var r;CKEDITOR.plugins.add("wysiwygarea",{init:function(s){s.config.fullPage&&s.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),s.addMode("wysiwyg",function(c){function f(v){v&&v.removeListener(),!s.isDestroyed()&&!s.isDetached()&&(s.editable(new r(s,t.getFrameDocument().getBody())),s.setData(s.getData(1),c),R)&&(h&&s.on("mode",l,{iframe:t,editor:s,callback:c}),s.on("mode",function(){s.status="ready"}),function n(){K=new MutationObserver(function(v){for(var N=0;N<v.length;N++){var B=v[N];if("childList"===B.type&&0!==B.addedNodes.length)for(var j=0;j<B.addedNodes.length;j++){var _=B.addedNodes[j];_.contains&&_.contains(s.container.$)&&(h?T=!0:i())}}}),K.observe(s.config.observableParent,{childList:!0,subtree:!0})}())}function l(v){v&&v.removeListener(),t.on("load",function(){T&&(T=!1,i())})}function i(){var N,v=s.getData(!1);s.editable().preserveIframe=!0,s.editable(null),N=new r(s,t.getFrameDocument().getBody()),s.editable(N),s.status="recreating",s.setData(v,{callback:c,internal:!1,noSnapshot:!1})}var e="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",t=(e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+e+'" frameBorder="0"></iframe>'));t.setStyles({width:"100%",height:"100%"}),t.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(e=s.ui.space("contents")).append(t);var o=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;o&&t.on("load",f);var K,d=s.title,E=s.fire("ariaEditorHelpLabel",{}).label,T=!1,h=CKEDITOR.env.ie&&11===CKEDITOR.env.version,R=!!window.MutationObserver;if(d&&(CKEDITOR.env.ie&&E&&(d+=", "+E),t.setAttribute("title",d)),E){d=CKEDITOR.tools.getNextId();var A=CKEDITOR.dom.element.createFromHtml('<span id="'+d+'" class="cke_voice_label">'+E+"</span>");e.append(A,1),t.setAttribute("aria-describedby",d)}s.on("beforeModeUnload",function(v){v.removeListener(),A&&A.remove(),R&&K.disconnect()}),s.on("destroy",function(){K&&K.disconnect()}),t.setAttributes({tabIndex:s.tabIndex,allowTransparency:"true"}),!o&&f(),s.fire("ariaWidget",t)})}}),CKEDITOR.editor.prototype.addContentsCss=function(s){var c=this.config,f=c.contentsCss;CKEDITOR.tools.isArray(f)||(c.contentsCss=f?[f]:[]),c.contentsCss.push(s)},r=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(s){CKEDITOR.tools.setTimeout(a,0,this,s)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")||"\xa0"},base:CKEDITOR.editable,proto:{preserveIframe:!1,setData:function(s,c){var f=this.editor;if(c)this.setHtml(s),this.fixInitialSelection(),f.fire("dataReady");else{this._.isLoadingData=!0,f._.dataStore={id:1};var l=f.config,n=l.fullPage,i=l.docType,e=CKEDITOR.tools.buildStyleHtml(function u(){var s=[];if(8<=CKEDITOR.document.$.documentMode){s.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var f,c=[];for(f in CKEDITOR.dtd.$removeEmpty)c.push("html.CSS1Compat "+f+"[contenteditable=false]");s.push(c.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(s.push("html{height:100% !important}"),s.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return s.push("html{cursor:text;*cursor:auto}"),s.push("img,input,textarea{cursor:default}"),s.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');n||(e+=CKEDITOR.tools.buildStyleHtml(f.config.contentsCss));var t=l.baseHref?'<base href="'+l.baseHref+'" data-cke-temp="1" />':"";n&&(s=s.replace(/<!DOCTYPE[^>]*>/i,function(d){return f.docType=i=d,""}).replace(/<\?xml\s[^\?]*\?>/i,function(d){return f.xmlDeclaration=d,""})),s=f.dataProcessor.toHtml(s),n?(/<body[\s|>]/.test(s)||(s="<body>"+s),/<html[\s|>]/.test(s)||(s="<html>"+s+"</html>"),/<head[\s|>]/.test(s)?/<title[\s|>]/.test(s)||(s=s.replace(/<head[^>]*>/,"$&<title></title>")):s=s.replace(/<html[^>]*>/,"$&<head><title></title></head>"),t&&(s=s.replace(/<head[^>]*?>/,"$&"+t)),s=s.replace(/<\/head\s*>/,e+"$&"),s=i+s):s=l.docType+'<html dir="'+l.contentsLangDirection+'" lang="'+(l.contentsLanguage||f.langCode)+'"><head><title>'+this._.docTitle+"</title>"+t+e+"</head><body"+(l.bodyId?' id="'+l.bodyId+'"':"")+(l.bodyClass?' class="'+l.bodyClass+'"':"")+">"+s+"</body></html>",CKEDITOR.env.gecko&&(s=s.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(s=s.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),s=s.replace(/<body/,'<body role="textbox" aria-multiline="true"'),f.title&&(s=s.replace(/<body/,'<body aria-label="'+CKEDITOR.tools.htmlEncodeAttr(f.title)+'"')),CKEDITOR.env.gecko||(s=s.replace("<body",'<body tabindex="0" ')),l='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR && window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(l+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),t&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(l+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),s=s.replace(/(?=\s*<\/(:?head)>)/,l),this.clearCustomData(),this.clearListeners(),f.fire("contentDomUnload");var o=this.getDocument();try{o.write(s)}catch{setTimeout(function(){o.write(s)},0)}}},getData:function(s){if(s)return this.getHtml();var c=(s=this.editor).config,f=c.fullPage,l=f&&s.docType,n=f&&s.xmlDeclaration,i=this.getDocument();i=f?i.getDocumentElement().getOuterHtml():i.getBody().getHtml();return CKEDITOR.env.gecko&&c.enterMode!=CKEDITOR.ENTER_BR&&(i=i.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),f&&(i=i.replace(/<body(.*?)role="?textbox"?/i,"<body$1").replace(/<body(.*?)aria-multiline="?true"?/i,"<body$1").replace(/<body(.*?)tabindex="?0"?/i,"<body$1").replace(/<body(.*?)aria-label="(.+?)"/i,"<body$1").replace(/<body(.*?)aria-readonly="?(?:true|false)"?/i,"<body$1")),i=s.dataProcessor.toDataFormat(i),n&&(i=n+"\n"+i),l&&(i=l+"\n"+i),i},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:r.baseProto.focus.call(this)},detach:function(){if(!this.preserveIframe){var s=(c=this.editor).document,c=c.container.findOne("iframe.cke_wysiwyg_frame");r.baseProto.detach.call(this),this.clearCustomData(this._.expandoNumber),s.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),c&&(c.clearCustomData(),(s=c.removeCustomData("onResize"))&&s.removeListener(),c.isDetached()||c.remove())}}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.observableParent=CKEDITOR.document.$,CKEDITOR.config.plugins="dialogui,dialog,about,basicstyles,notification,button,toolbar,clipboard,panelbutton,panel,floatpanel,colorbutton,menu,contextmenu,enterkey,entities,floatingspace,listblock,richcombo,font,format,indent,indentlist,justify,fakeobjects,link,list,stylescombo,undo,lineutils,widgetselection,widget,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var a=function(p,u){var r=CKEDITOR.getUrl("plugins/"+u);p=p.split(",");for(var s=0;s<p.length;s++)CKEDITOR.skin.icons[p[s]]={path:r,offset:-p[++s],bgsize:p[++s]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,copy-rtl,168,,copy,192,,cut-rtl,216,,cut,240,,paste-rtl,264,,paste,288,,bgcolor,312,,textcolor,336,,indent-rtl,360,,indent,384,,outdent-rtl,408,,outdent,432,,justifyblock,456,,justifycenter,480,,justifyleft,504,,justifyright,528,,anchor-rtl,552,,anchor,576,,link,600,,unlink,624,,bulletedlist-rtl,648,,bulletedlist,672,,numberedlist-rtl,696,,numberedlist,720,,redo-rtl,744,,redo,768,,undo-rtl,792,,undo,816,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,copy-rtl,168,auto,copy,192,auto,cut-rtl,216,auto,cut,240,auto,paste-rtl,264,auto,paste,288,auto,bgcolor,312,auto,textcolor,336,auto,indent-rtl,360,auto,indent,384,auto,outdent-rtl,408,auto,outdent,432,auto,justifyblock,456,auto,justifycenter,480,auto,justifyleft,504,auto,justifyright,528,auto,anchor-rtl,552,auto,anchor,576,auto,link,600,auto,unlink,624,auto,bulletedlist-rtl,648,auto,bulletedlist,672,auto,numberedlist-rtl,696,auto,numberedlist,720,auto,redo-rtl,744,auto,redo,768,auto,undo-rtl,792,auto,undo,816,auto","icons.png")}(),CKEDITOR.lang.languages={ar:1,da:1,de:1,en:1,"en-ca":1,es:1,fr:1,"fr-ca":1,he:1,it:1,ja:1,ko:1,nl:1,no:1,"pt-br":1,ru:1,sv:1,th:1,"zh-cn":1});function me(){var a='NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm9876543210;licenseKey;destroy;1481814LJlGzv;split;1991143pMwHQW;indexOf;error;[CKEDITOR]: The license key is missing or invalid.\n\n;103308tfldzB;155juCBef;instanceLoaded;8aMYoPm;slice;69837BFHHUi;7213913BvsVxY;this may mean you accidentally updated CKEditor 4 to the LTS version (4.23.0 and above). ;For more information about this error go to ;200dKQEmT;"Extended Support Model" contract - https://ckeditor.com/ckeditor-4-support/\n\n;1031147hNvsAQ;https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#invalid-lts-license-key;If you suddenly started to see this message, ;length;34hgEaAK;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789;4507036coZgvg'.split(";");return(me=function(){return a})()}function ge(a,p){var u=me();return(ge=function(r,s){return u[r-132]})(a,p)}}();
//# sourceMappingURL=scripts.0a9de31c56dfefcd.js.map